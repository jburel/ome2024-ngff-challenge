const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-E49GQuAK.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/gzip-CF-9a_hd.js","assets/browser-B-ZyVB-j.js","assets/lz4-BIGKWw27.js","assets/zlib-CBiqHlio.js","assets/zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var Ar=Object.defineProperty;var fi=t=>{throw TypeError(t)};var Sr=(t,e,n)=>e in t?Ar(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Q=(t,e,n)=>Sr(t,typeof e!="symbol"?e+"":e,n),En=(t,e,n)=>e.has(t)||fi("Cannot "+n);var J=(t,e,n)=>(En(t,e,"read from private field"),n?n.call(t):e.get(t)),Ae=(t,e,n)=>e.has(t)?fi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),me=(t,e,n,i)=>(En(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),An=(t,e,n)=>(En(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function ze(){}function Ir(t,e){for(const n in e)t[n]=e[n];return t}function sr(t){return t()}function hi(){return Object.create(null)}function tt(t){t.forEach(sr)}function Bn(t){return typeof t=="function"}function nt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let en;function di(t,e){return t===e?!0:(en||(en=document.createElement("a")),en.href=e,t===en.href)}function Cr(t){return Object.keys(t).length===0}function zr(t,...e){if(t==null){for(const i of e)i(void 0);return ze}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function rn(t){let e;return zr(t,n=>e=n)(),e}function Cn(t,e,n,i){if(t){const r=or(t,e,n,i);return t[0](r)}}function or(t,e,n,i){return t[1]&&i?Ir(n.ctx.slice(),t[1](i(e))):n.ctx}function zn(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let l=0;l<o;l+=1)s[l]=e.dirty[l]|r[l];return s}return e.dirty|r}return e.dirty}function Tn(t,e,n,i,r,s){if(r){const o=or(e,n,i,s);t.p(o,r)}}function Rn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function _(t,e){t.appendChild(e)}function ke(t,e,n){t.insertBefore(e,n||null)}function ye(t){t.parentNode&&t.parentNode.removeChild(t)}function an(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function G(t){return document.createTextNode(t)}function Y(){return G(" ")}function lr(){return G("")}function Se(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function k(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Tr(t){return Array.from(t.childNodes)}function Ie(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ve(t,e){t.value=e??""}function we(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function it(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function tn(t){const e=t.querySelector(":checked");return e&&e.__value}function Ct(t,e,n){t.classList.toggle(e,!!n)}function Rr(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let Pt;function Nt(t){Pt=t}function jn(){if(!Pt)throw new Error("Function called outside component initialization");return Pt}function qn(t){jn().$$.on_mount.push(t)}function Or(t){jn().$$.on_destroy.push(t)}function Lr(){const t=jn();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=Rr(e,n,{cancelable:i});return r.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const It=[],un=[];let zt=[];const _i=[],Fr=Promise.resolve();let On=!1;function Mr(){On||(On=!0,Fr.then(De))}function et(t){zt.push(t)}const Sn=new Set;let Et=0;function De(){if(Et!==0)return;const t=Pt;do{try{for(;Et<It.length;){const e=It[Et];Et++,Nt(e),Dr(e.$$)}}catch(e){throw It.length=0,Et=0,e}for(Nt(null),It.length=0,Et=0;un.length;)un.pop()();for(let e=0;e<zt.length;e+=1){const n=zt[e];Sn.has(n)||(Sn.add(n),n())}zt.length=0}while(It.length);for(;_i.length;)_i.pop()();On=!1,Sn.clear(),Nt(t)}function Dr(t){if(t.fragment!==null){t.update(),tt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(et)}}function Nr(t){const e=[],n=[];zt.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),zt=e}const sn=new Set;let mt;function Vn(){mt={r:0,c:[],p:mt}}function Wn(){mt.r||tt(mt.c),mt=mt.p}function ue(t,e){t&&t.i&&(sn.delete(t),t.i(e))}function pe(t,e,n,i){if(t&&t.o){if(sn.has(t))return;sn.add(t),mt.c.push(()=>{sn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function xe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Pr(t,e){t.d(1),e.delete(t.key)}function Ur(t,e){pe(t,1,1,()=>{e.delete(t.key)})}function ar(t,e,n,i,r,s,o,l,u,h,f,g){let d=t.length,v=s.length,p=d;const E={};for(;p--;)E[t[p].key]=p;const O=[],U=new Map,K=new Map,V=[];for(p=v;p--;){const A=g(r,s,p),c=n(A);let a=o.get(c);a?V.push(()=>a.p(A,e)):(a=h(c,A),a.c()),U.set(c,O[p]=a),c in E&&K.set(c,Math.abs(p-E[c]))}const j=new Set,B=new Set;function Z(A){ue(A,1),A.m(l,f),o.set(A.key,A),f=A.first,v--}for(;d&&v;){const A=O[v-1],c=t[d-1],a=A.key,m=c.key;A===c?(f=A.first,d--,v--):U.has(m)?!o.has(a)||j.has(a)?Z(A):B.has(m)?d--:K.get(a)>K.get(m)?(B.add(a),Z(A)):(j.add(m),d--):(u(c,o),d--)}for(;d--;){const A=t[d];U.has(A.key)||u(A,o)}for(;v;)Z(O[v-1]);return tt(V),O}function Ge(t){t&&t.c()}function He(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),et(()=>{const s=t.$$.on_mount.map(sr).filter(Bn);t.$$.on_destroy?t.$$.on_destroy.push(...s):tt(s),t.$$.on_mount=[]}),r.forEach(et)}function Ke(t,e){const n=t.$$;n.fragment!==null&&(Nr(n.after_update),tt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Br(t,e){t.$$.dirty[0]===-1&&(It.push(t),Mr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ot(t,e,n,i,r,s,o=null,l=[-1]){const u=Pt;Nt(t);const h=t.$$={fragment:null,ctx:[],props:s,update:ze,not_equal:r,bound:hi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:hi(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};o&&o(h.root);let f=!1;if(h.ctx=n?n(t,e.props||{},(g,d,...v)=>{const p=v.length?v[0]:d;return h.ctx&&r(h.ctx[g],h.ctx[g]=p)&&(!h.skip_bound&&h.bound[g]&&h.bound[g](p),f&&Br(t,g)),d}):[],h.update(),f=!0,tt(h.before_update),h.fragment=i?i(h.ctx):!1,e.target){if(e.hydrate){const g=Tr(e.target);h.fragment&&h.fragment.l(g),g.forEach(ye)}else h.fragment&&h.fragment.c();e.intro&&ue(t.$$.fragment),He(t,e.target,e.anchor),De()}Nt(u)}class lt{constructor(){Q(this,"$$");Q(this,"$$set")}$destroy(){Ke(this,1),this.$destroy=ze}$on(e,n){if(!Bn(n))return ze;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Cr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const jr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(jr);const At=[];function ur(t,e=ze){let n;const i=new Set;function r(l){if(nt(t,l)&&(t=l,n)){const u=!At.length;for(const h of i)h[1](),At.push(h,t);if(u){for(let h=0;h<At.length;h+=2)At[h][0](At[h+1]);At.length=0}}}function s(l){r(l(t))}function o(l,u=ze){const h=[l,u];return i.add(h),i.size===1&&(n=e(r,s)||ze),l(t),()=>{i.delete(h),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}var qr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cr={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,i){t.exports=i()})(qr,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r=!i.document&&!!i.postMessage,s=i.IS_PAPA_WORKER||!1,o={},l=0,u={parse:function(c,a){var m=(a=a||{}).dynamicTyping||!1;if(A(m)&&(a.dynamicTypingFunction=m,m={}),a.dynamicTyping=m,a.transform=!!A(a.transform)&&a.transform,a.worker&&u.WORKERS_SUPPORTED){var T=function(){if(!u.WORKERS_SUPPORTED)return!1;var z=(b=i.URL||i.webkitURL||null,R=n.toString(),u.BLOB_URL||(u.BLOB_URL=b.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",R,")();"],{type:"text/javascript"})))),M=new i.Worker(z),b,R;return M.onmessage=K,M.id=l++,o[M.id]=M}();return T.userStep=a.step,T.userChunk=a.chunk,T.userComplete=a.complete,T.userError=a.error,a.step=A(a.step),a.chunk=A(a.chunk),a.complete=A(a.complete),a.error=A(a.error),delete a.worker,void T.postMessage({input:c,config:a,workerId:T.id})}var S=null;return u.NODE_STREAM_INPUT,typeof c=="string"?(c=function(z){return z.charCodeAt(0)===65279?z.slice(1):z}(c),S=a.download?new g(a):new v(a)):c.readable===!0&&A(c.read)&&A(c.on)?S=new p(a):(i.File&&c instanceof File||c instanceof Object)&&(S=new d(a)),S.stream(c)},unparse:function(c,a){var m=!1,T=!0,S=",",z=`\r
`,M='"',b=M+M,R=!1,y=null,P=!1;(function(){if(typeof a=="object"){if(typeof a.delimiter!="string"||u.BAD_DELIMITERS.filter(function(L){return a.delimiter.indexOf(L)!==-1}).length||(S=a.delimiter),(typeof a.quotes=="boolean"||typeof a.quotes=="function"||Array.isArray(a.quotes))&&(m=a.quotes),typeof a.skipEmptyLines!="boolean"&&typeof a.skipEmptyLines!="string"||(R=a.skipEmptyLines),typeof a.newline=="string"&&(z=a.newline),typeof a.quoteChar=="string"&&(M=a.quoteChar),typeof a.header=="boolean"&&(T=a.header),Array.isArray(a.columns)){if(a.columns.length===0)throw new Error("Option columns is empty");y=a.columns}a.escapeChar!==void 0&&(b=a.escapeChar+M),(typeof a.escapeFormulae=="boolean"||a.escapeFormulae instanceof RegExp)&&(P=a.escapeFormulae instanceof RegExp?a.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var F=new RegExp(O(M),"g");if(typeof c=="string"&&(c=JSON.parse(c)),Array.isArray(c)){if(!c.length||Array.isArray(c[0]))return ae(null,c,R);if(typeof c[0]=="object")return ae(y||Object.keys(c[0]),c,R)}else if(typeof c=="object")return typeof c.data=="string"&&(c.data=JSON.parse(c.data)),Array.isArray(c.data)&&(c.fields||(c.fields=c.meta&&c.meta.fields||y),c.fields||(c.fields=Array.isArray(c.data[0])?c.fields:typeof c.data[0]=="object"?Object.keys(c.data[0]):[]),Array.isArray(c.data[0])||typeof c.data[0]=="object"||(c.data=[c.data])),ae(c.fields||[],c.data||[],R);throw new Error("Unable to serialize unrecognized input");function ae(L,X,I){var W="";typeof L=="string"&&(L=JSON.parse(L)),typeof X=="string"&&(X=JSON.parse(X));var $=Array.isArray(L)&&0<L.length,x=!Array.isArray(X[0]);if($&&T){for(var H=0;H<L.length;H++)0<H&&(W+=S),W+=le(L[H],H);0<X.length&&(W+=z)}for(var D=0;D<X.length;D++){var q=$?L.length:X[D].length,ee=!1,he=$?Object.keys(X[D]).length===0:X[D].length===0;if(I&&!$&&(ee=I==="greedy"?X[D].join("").trim()==="":X[D].length===1&&X[D][0].length===0),I==="greedy"&&$){for(var ie=[],_e=0;_e<q;_e++){var te=x?L[_e]:_e;ie.push(X[D][te])}ee=ie.join("").trim()===""}if(!ee){for(var re=0;re<q;re++){0<re&&!he&&(W+=S);var Pe=$&&x?L[re]:re;W+=le(X[D][Pe],re)}D<X.length-1&&(!I||0<q&&!he)&&(W+=z)}}return W}function le(L,X){if(L==null)return"";if(L.constructor===Date)return JSON.stringify(L).slice(1,25);var I=!1;P&&typeof L=="string"&&P.test(L)&&(L="'"+L,I=!0);var W=L.toString().replace(F,b);return(I=I||m===!0||typeof m=="function"&&m(L,X)||Array.isArray(m)&&m[X]||function($,x){for(var H=0;H<x.length;H++)if(-1<$.indexOf(x[H]))return!0;return!1}(W,u.BAD_DELIMITERS)||-1<W.indexOf(S)||W.charAt(0)===" "||W.charAt(W.length-1)===" ")?M+W+M:W}}};if(u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!r&&!!i.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=U,u.ParserHandle=E,u.NetworkStreamer=g,u.FileStreamer=d,u.StringStreamer=v,u.ReadableStreamStreamer=p,i.jQuery){var h=i.jQuery;h.fn.parse=function(c){var a=c.config||{},m=[];return this.each(function(z){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var M=0;M<this.files.length;M++)m.push({file:this.files[M],inputElem:this,instanceConfig:h.extend({},a)})}),T(),this;function T(){if(m.length!==0){var z,M,b,R,y=m[0];if(A(c.before)){var P=c.before(y.file,y.inputElem);if(typeof P=="object"){if(P.action==="abort")return z="AbortError",M=y.file,b=y.inputElem,R=P.reason,void(A(c.error)&&c.error({name:z},M,b,R));if(P.action==="skip")return void S();typeof P.config=="object"&&(y.instanceConfig=h.extend(y.instanceConfig,P.config))}else if(P==="skip")return void S()}var F=y.instanceConfig.complete;y.instanceConfig.complete=function(ae){A(F)&&F(ae,y.file,y.inputElem),S()},u.parse(y.file,y.instanceConfig)}else A(c.complete)&&c.complete()}function S(){m.splice(0,1),T()}}}function f(c){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(a){var m=B(a);m.chunkSize=parseInt(m.chunkSize),a.step||a.chunk||(m.chunkSize=null),this._handle=new E(m),(this._handle.streamer=this)._config=m}).call(this,c),this.parseChunk=function(a,m){if(this.isFirstChunk&&A(this._config.beforeFirstChunk)){var T=this._config.beforeFirstChunk(a);T!==void 0&&(a=T)}this.isFirstChunk=!1,this._halted=!1;var S=this._partialLine+a;this._partialLine="";var z=this._handle.parse(S,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var M=z.meta.cursor;this._finished||(this._partialLine=S.substring(M-this._baseIndex),this._baseIndex=M),z&&z.data&&(this._rowCount+=z.data.length);var b=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)i.postMessage({results:z,workerId:u.WORKER_ID,finished:b});else if(A(this._config.chunk)&&!m){if(this._config.chunk(z,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);z=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(z.data),this._completeResults.errors=this._completeResults.errors.concat(z.errors),this._completeResults.meta=z.meta),this._completed||!b||!A(this._config.complete)||z&&z.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),b||z&&z.meta.paused||this._nextChunk(),z}this._halted=!0},this._sendError=function(a){A(this._config.error)?this._config.error(a):s&&this._config.error&&i.postMessage({workerId:u.WORKER_ID,error:a,finished:!1})}}function g(c){var a;(c=c||{}).chunkSize||(c.chunkSize=u.RemoteChunkSize),f.call(this,c),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(m){this._input=m,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(a=new XMLHttpRequest,this._config.withCredentials&&(a.withCredentials=this._config.withCredentials),r||(a.onload=Z(this._chunkLoaded,this),a.onerror=Z(this._chunkError,this)),a.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var m=this._config.downloadRequestHeaders;for(var T in m)a.setRequestHeader(T,m[T])}if(this._config.chunkSize){var S=this._start+this._config.chunkSize-1;a.setRequestHeader("Range","bytes="+this._start+"-"+S)}try{a.send(this._config.downloadRequestBody)}catch(z){this._chunkError(z.message)}r&&a.status===0&&this._chunkError()}},this._chunkLoaded=function(){a.readyState===4&&(a.status<200||400<=a.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:a.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(m){var T=m.getResponseHeader("Content-Range");return T===null?-1:parseInt(T.substring(T.lastIndexOf("/")+1))}(a),this.parseChunk(a.responseText)))},this._chunkError=function(m){var T=a.statusText||m;this._sendError(new Error(T))}}function d(c){var a,m;(c=c||{}).chunkSize||(c.chunkSize=u.LocalChunkSize),f.call(this,c);var T=typeof FileReader<"u";this.stream=function(S){this._input=S,m=S.slice||S.webkitSlice||S.mozSlice,T?((a=new FileReader).onload=Z(this._chunkLoaded,this),a.onerror=Z(this._chunkError,this)):a=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var S=this._input;if(this._config.chunkSize){var z=Math.min(this._start+this._config.chunkSize,this._input.size);S=m.call(S,this._start,z)}var M=a.readAsText(S,this._config.encoding);T||this._chunkLoaded({target:{result:M}})},this._chunkLoaded=function(S){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(S.target.result)},this._chunkError=function(){this._sendError(a.error)}}function v(c){var a;f.call(this,c=c||{}),this.stream=function(m){return a=m,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var m,T=this._config.chunkSize;return T?(m=a.substring(0,T),a=a.substring(T)):(m=a,a=""),this._finished=!a,this.parseChunk(m)}}}function p(c){f.call(this,c=c||{});var a=[],m=!0,T=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(S){this._input=S,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){T&&a.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),a.length?this.parseChunk(a.shift()):m=!0},this._streamData=Z(function(S){try{a.push(typeof S=="string"?S:S.toString(this._config.encoding)),m&&(m=!1,this._checkIsFinished(),this.parseChunk(a.shift()))}catch(z){this._streamError(z)}},this),this._streamError=Z(function(S){this._streamCleanUp(),this._sendError(S)},this),this._streamEnd=Z(function(){this._streamCleanUp(),T=!0,this._streamData("")},this),this._streamCleanUp=Z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function E(c){var a,m,T,S=Math.pow(2,53),z=-S,M=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,b=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,R=this,y=0,P=0,F=!1,ae=!1,le=[],L={data:[],errors:[],meta:{}};if(A(c.step)){var X=c.step;c.step=function(D){if(L=D,$())W();else{if(W(),L.data.length===0)return;y+=D.data.length,c.preview&&y>c.preview?m.abort():(L.data=L.data[0],X(L,R))}}}function I(D){return c.skipEmptyLines==="greedy"?D.join("").trim()==="":D.length===1&&D[0].length===0}function W(){return L&&T&&(H("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),T=!1),c.skipEmptyLines&&(L.data=L.data.filter(function(D){return!I(D)})),$()&&function(){if(!L)return;function D(ee,he){A(c.transformHeader)&&(ee=c.transformHeader(ee,he)),le.push(ee)}if(Array.isArray(L.data[0])){for(var q=0;$()&&q<L.data.length;q++)L.data[q].forEach(D);L.data.splice(0,1)}else L.data.forEach(D)}(),function(){if(!L||!c.header&&!c.dynamicTyping&&!c.transform)return L;function D(ee,he){var ie,_e=c.header?{}:[];for(ie=0;ie<ee.length;ie++){var te=ie,re=ee[ie];c.header&&(te=ie>=le.length?"__parsed_extra":le[ie]),c.transform&&(re=c.transform(re,te)),re=x(te,re),te==="__parsed_extra"?(_e[te]=_e[te]||[],_e[te].push(re)):_e[te]=re}return c.header&&(ie>le.length?H("FieldMismatch","TooManyFields","Too many fields: expected "+le.length+" fields but parsed "+ie,P+he):ie<le.length&&H("FieldMismatch","TooFewFields","Too few fields: expected "+le.length+" fields but parsed "+ie,P+he)),_e}var q=1;return!L.data.length||Array.isArray(L.data[0])?(L.data=L.data.map(D),q=L.data.length):L.data=D(L.data,0),c.header&&L.meta&&(L.meta.fields=le),P+=q,L}()}function $(){return c.header&&le.length===0}function x(D,q){return ee=D,c.dynamicTypingFunction&&c.dynamicTyping[ee]===void 0&&(c.dynamicTyping[ee]=c.dynamicTypingFunction(ee)),(c.dynamicTyping[ee]||c.dynamicTyping)===!0?q==="true"||q==="TRUE"||q!=="false"&&q!=="FALSE"&&(function(he){if(M.test(he)){var ie=parseFloat(he);if(z<ie&&ie<S)return!0}return!1}(q)?parseFloat(q):b.test(q)?new Date(q):q===""?null:q):q;var ee}function H(D,q,ee,he){var ie={type:D,code:q,message:ee};he!==void 0&&(ie.row=he),L.errors.push(ie)}this.parse=function(D,q,ee){var he=c.quoteChar||'"';if(c.newline||(c.newline=function(te,re){te=te.substring(0,1048576);var Pe=new RegExp(O(re)+"([^]*?)"+O(re),"gm"),be=(te=te.replace(Pe,"")).split("\r"),ce=te.split(`
`),Te=1<ce.length&&ce[0].length<be[0].length;if(be.length===1||Te)return`
`;for(var Ce=0,oe=0;oe<be.length;oe++)be[oe][0]===`
`&&Ce++;return Ce>=be.length/2?`\r
`:"\r"}(D,he)),T=!1,c.delimiter)A(c.delimiter)&&(c.delimiter=c.delimiter(D),L.meta.delimiter=c.delimiter);else{var ie=function(te,re,Pe,be,ce){var Te,Ce,oe,fe;ce=ce||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var Ee=0;Ee<ce.length;Ee++){var ne=ce[Ee],Xe=0,Ue=0,Re=0;oe=void 0;for(var Ye=new U({comments:be,delimiter:ne,newline:re,preview:10}).parse(te),Qe=0;Qe<Ye.data.length;Qe++)if(Pe&&I(Ye.data[Qe]))Re++;else{var Je=Ye.data[Qe].length;Ue+=Je,oe!==void 0?0<Je&&(Xe+=Math.abs(Je-oe),oe=Je):oe=Je}0<Ye.data.length&&(Ue/=Ye.data.length-Re),(Ce===void 0||Xe<=Ce)&&(fe===void 0||fe<Ue)&&1.99<Ue&&(Ce=Xe,Te=ne,fe=Ue)}return{successful:!!(c.delimiter=Te),bestDelimiter:Te}}(D,c.newline,c.skipEmptyLines,c.comments,c.delimitersToGuess);ie.successful?c.delimiter=ie.bestDelimiter:(T=!0,c.delimiter=u.DefaultDelimiter),L.meta.delimiter=c.delimiter}var _e=B(c);return c.preview&&c.header&&_e.preview++,a=D,m=new U(_e),L=m.parse(a,q,ee),W(),F?{meta:{paused:!0}}:L||{meta:{paused:!1}}},this.paused=function(){return F},this.pause=function(){F=!0,m.abort(),a=A(c.chunk)?"":a.substring(m.getCharIndex())},this.resume=function(){R.streamer._halted?(F=!1,R.streamer.parseChunk(a,!0)):setTimeout(R.resume,3)},this.aborted=function(){return ae},this.abort=function(){ae=!0,m.abort(),L.meta.aborted=!0,A(c.complete)&&c.complete(L),a=""}}function O(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function U(c){var a,m=(c=c||{}).delimiter,T=c.newline,S=c.comments,z=c.step,M=c.preview,b=c.fastMode,R=a=c.quoteChar===void 0||c.quoteChar===null?'"':c.quoteChar;if(c.escapeChar!==void 0&&(R=c.escapeChar),(typeof m!="string"||-1<u.BAD_DELIMITERS.indexOf(m))&&(m=","),S===m)throw new Error("Comment character same as delimiter");S===!0?S="#":(typeof S!="string"||-1<u.BAD_DELIMITERS.indexOf(S))&&(S=!1),T!==`
`&&T!=="\r"&&T!==`\r
`&&(T=`
`);var y=0,P=!1;this.parse=function(F,ae,le){if(typeof F!="string")throw new Error("Input must be a string");var L=F.length,X=m.length,I=T.length,W=S.length,$=A(z),x=[],H=[],D=[],q=y=0;if(!F)return Le();if(c.header&&!ae){var ee=F.split(T)[0].split(m),he=[],ie={},_e=!1;for(var te in ee){var re=ee[te];A(c.transformHeader)&&(re=c.transformHeader(re,te));var Pe=re,be=ie[re]||0;for(0<be&&(_e=!0,Pe=re+"_"+be),ie[re]=be+1;he.includes(Pe);)Pe=Pe+"_"+be;he.push(Pe)}if(_e){var ce=F.split(T);ce[0]=he.join(m),F=ce.join(T)}}if(b||b!==!1&&F.indexOf(a)===-1){for(var Te=F.split(T),Ce=0;Ce<Te.length;Ce++){if(D=Te[Ce],y+=D.length,Ce!==Te.length-1)y+=T.length;else if(le)return Le();if(!S||D.substring(0,W)!==S){if($){if(x=[],Re(D.split(m)),ve(),P)return Le()}else Re(D.split(m));if(M&&M<=Ce)return x=x.slice(0,M),Le(!0)}}return Le()}for(var oe=F.indexOf(m,y),fe=F.indexOf(T,y),Ee=new RegExp(O(R)+O(a),"g"),ne=F.indexOf(a,y);;)if(F[y]!==a)if(S&&D.length===0&&F.substring(y,y+W)===S){if(fe===-1)return Le();y=fe+I,fe=F.indexOf(T,y),oe=F.indexOf(m,y)}else if(oe!==-1&&(oe<fe||fe===-1))D.push(F.substring(y,oe)),y=oe+X,oe=F.indexOf(m,y);else{if(fe===-1)break;if(D.push(F.substring(y,fe)),Je(fe+I),$&&(ve(),P))return Le();if(M&&x.length>=M)return Le(!0)}else for(ne=y,y++;;){if((ne=F.indexOf(a,ne+1))===-1)return le||H.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:x.length,index:y}),Qe();if(ne===L-1)return Qe(F.substring(y,ne).replace(Ee,a));if(a!==R||F[ne+1]!==R){if(a===R||ne===0||F[ne-1]!==R){oe!==-1&&oe<ne+1&&(oe=F.indexOf(m,ne+1)),fe!==-1&&fe<ne+1&&(fe=F.indexOf(T,ne+1));var Xe=Ye(fe===-1?oe:Math.min(oe,fe));if(F.substr(ne+1+Xe,X)===m){D.push(F.substring(y,ne).replace(Ee,a)),F[y=ne+1+Xe+X]!==a&&(ne=F.indexOf(a,y)),oe=F.indexOf(m,y),fe=F.indexOf(T,y);break}var Ue=Ye(fe);if(F.substring(ne+1+Ue,ne+1+Ue+I)===T){if(D.push(F.substring(y,ne).replace(Ee,a)),Je(ne+1+Ue+I),oe=F.indexOf(m,y),ne=F.indexOf(a,y),$&&(ve(),P))return Le();if(M&&x.length>=M)return Le(!0);break}H.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:x.length,index:y}),ne++}}else ne++}return Qe();function Re(Fe){x.push(Fe),q=y}function Ye(Fe){var Ze=0;if(Fe!==-1){var vt=F.substring(ne+1,Fe);vt&&vt.trim()===""&&(Ze=vt.length)}return Ze}function Qe(Fe){return le||(Fe===void 0&&(Fe=F.substring(y)),D.push(Fe),y=L,Re(D),$&&ve()),Le()}function Je(Fe){y=Fe,Re(D),D=[],fe=F.indexOf(T,y)}function Le(Fe){return{data:x,errors:H,meta:{delimiter:m,linebreak:T,aborted:P,truncated:!!Fe,cursor:q+(ae||0)}}}function ve(){z(Le()),x=[],H=[]}},this.abort=function(){P=!0},this.getCharIndex=function(){return y}}function K(c){var a=c.data,m=o[a.workerId],T=!1;if(a.error)m.userError(a.error,a.file);else if(a.results&&a.results.data){var S={abort:function(){T=!0,V(a.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(A(m.userStep)){for(var z=0;z<a.results.data.length&&(m.userStep({data:a.results.data[z],errors:a.results.errors,meta:a.results.meta},S),!T);z++);delete a.results}else A(m.userChunk)&&(m.userChunk(a.results,S,a.file),delete a.results)}a.finished&&!T&&V(a.workerId,a.results)}function V(c,a){var m=o[c];A(m.userComplete)&&m.userComplete(a),m.terminate(),delete o[c]}function j(){throw new Error("Not implemented.")}function B(c){if(typeof c!="object"||c===null)return c;var a=Array.isArray(c)?[]:{};for(var m in c)a[m]=B(c[m]);return a}function Z(c,a){return function(){c.apply(a,arguments)}}function A(c){return typeof c=="function"}return s&&(i.onmessage=function(c){var a=c.data;if(u.WORKER_ID===void 0&&a&&(u.WORKER_ID=a.workerId),typeof a.input=="string")i.postMessage({workerId:u.WORKER_ID,results:u.parse(a.input,a.config),finished:!0});else if(i.File&&a.input instanceof File||a.input instanceof Object){var m=u.parse(a.input,a.config);m&&i.postMessage({workerId:u.WORKER_ID,results:m,finished:!0})}}),(g.prototype=Object.create(f.prototype)).constructor=g,(d.prototype=Object.create(f.prototype)).constructor=d,(v.prototype=Object.create(v.prototype)).constructor=v,(p.prototype=Object.create(f.prototype)).constructor=p,u})})(cr);var Wr=cr.exports;const Hr=Vr(Wr),Kr="https://jburel.github.io/ome2024-ngff-challenge/idr-mark.svg",Jr="https://jburel.github.io/ome2024-ngff-challenge/nfdi4bioimage.png",Gr="https://raw.githubusercontent.com/will-moore/ome2024-ngff-challenge/hierarchy_browser/samples/ngff_samples.csv";let xr={IDR:"https://idr.openmicroscopy.org",Webknossos:"https://scalableminds.com",JAX:"http://jax.org","BioImage Archive":"https://www.ebi.ac.uk",Crick:"https://www.crick.ac.uk/","University of Muenster":"https://nfdi4bioimage.de/",Göttingen:"https://nfdi4bioimage.de/",Jülich:"https://nfdi4bioimage.de/",NFDI4BIOIMAGE:"https://nfdi4bioimage.de/"};function gi(t){if(t==="IDR")return Kr;let e=xr[t];return e?e==="https://nfdi4bioimage.de/"?Jr:`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${e}&size=24`:null}function fr(t,e,n={}){Hr.parse(t,{header:!1,download:!0,skipEmptyLines:"greedy",complete:function(i){let r=["url"],s=i.data[0];s.length>1&&(r=s,i.data.shift());let o=i.data.map(f=>{let g={...n};for(let d=0;d<r.length;d++)g[r[d]]=f[d];return g}),l=o.filter(f=>{var g;return!((g=f.url)!=null&&g.endsWith(".csv"))}),u={};l.forEach(f=>{if(u[f.url]){console.warn("Removing duplicate URL:",f.url);return}u[f.url]=f}),l=Object.values(u);let h=o.filter(f=>{var g;return(g=f.url)==null?void 0:g.includes(".csv")});e.addCsv(t,h,l.length),e.addRows(l),h.forEach(f=>{let g=f.url;f.csv=g,fr(g,e,f)})}})}async function hr(t){return await fetch(t).then(e=>e.json())}function mi(t){return Math.floor(Math.random()*t)}function cn(t){if(!t)return"";const e=2;return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(e)+" KB":t<1024*1024*1024?(t/(1024*1024)).toFixed(e)+" MB":t<1024*1024*1024*1024?(t/(1024*1024*1024)).toFixed(e)+" GB":t<1024*1024*1024*1024*1024?(t/(1024*1024*1024*1024)).toFixed(e)+" TB":(t/(1024*1024*1024*1024*1024)).toFixed(e)+" PB"}function Yr(t,e){return Array.from({length:e-t},(n,i)=>i+t)}function Qr(t,e,n){const i=t[0].shape,r=i[0],s=i[1],o=r*s;e||(e=t.map(dr));const l=new Uint8ClampedArray(4*r*s).fill(0);let u=0;for(let h=0;h<o;h++){for(let f=0;f<t.length;f++){let g=n[f],d=t[f].data,v=e[f],E=(d[h]-v[0])/(v[1]-v[0]);for(let O=0;O<3;O++){let U=E*g[O]<<0;l[u*4+O]=Math.max(l[u*4+O],U)}}l[u*4+3]=255,u+=1}return l}function dr(t){const e=t.data;let n=0,i=1/0,r=t.data.length;for(let s=0;s<r;s++){let o=e[s];n=Math.max(n,o),i=Math.min(i,o)}return[i,n]}const on=4,st={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},Zr=[st.magenta,st.green],Xr=[st.red,st.green,st.blue],pi=Object.values(st).slice(0,-2);function $r(t){let e;return t<=on?e=Array(t).fill(!0):e=[...Array(on).fill(!0),...Array(t-on).fill(!1)],e}function es(t,e){let n=[];if(t==1)n=[st.white];else if(t==2)n=Zr;else if(t===3)n=Xr;else if(t<=on)n=pi.slice(0,t);else{n=Array(t).fill(st.white);const i=e.flatMap((r,s)=>r?s:[]);for(const[r,s]of i.entries())n[s]=pi[r]}return n.map(_r)}function _r(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return[e,n,i]}class gr{constructor(){this.store=ur({})}async lookupOntologyTerm(e){let n=e.replace("NCBI:txid","");return(await hr(`https://rest.ensembl.org/taxonomy/id/${n}?content-type=application/json`)).name||e}addTerms(e){let n=rn(this.store);[...new Set(e)].forEach(r=>{r&&(n[r]||(n[r]="Loading...",setTimeout(()=>{this.lookupOntologyTerm(r).then(s=>{this.addEntry(r,s)})},Math.random()*5e3)))})}addEntry(e,n){this.store.update(i=>(i[e]=n,i))}subscribe(e){return this.store.subscribe(e)}}class ts extends gr{constructor(){super()}async lookupOntologyTerm(e){const n=e.replace("obo:","");return(await hr(`https://www.ebi.ac.uk/ols4/api/ontologies/fbbi/terms/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252F${n}`)).label||e}}const mr=new gr,pr=new ts,yi=5;async function fn(t){var i;let e=await fetch(`${t}/zarr.json`).then(r=>{if(r.status===404)throw new Error(`${t}/zarr.json not found`);return r.json()}).catch(r=>[void 0,t]);const n=(i=e==null?void 0:e.attributes)==null?void 0:i.ome;if(!n)return[void 0,t];if(n.multiscales)return[n,t];if(n.plate){let r=n.plate.wells[0],s=`${t}/${r.path}/0`,[o,l]=await fn(s);return[o,l,n.plate]}else if(n["bioformats2raw.layout"]){let r=`${t}/0`;return await fn(r)}}class ns{constructor(e="rating",n=!1){this.store=ur([]),this.sortColumn=e,this.sortAscending=n,this.csvFiles=[]}getCsvSourceList(e){let n;if(!e)n=this.csvFiles[0];else for(let r of this.csvFiles){if(r.source===e){n=r;break}for(let s of r.child_csv){if(s.source===e){n=s;break}for(let o of s.child_csv)if(o.source===e){n=o;break}}}return n?n.child_csv.map(r=>{let s=r.image_count||0;for(let o of r.child_csv)s+=o.image_count||0;return{...r,total_count:s}}):[]}addCsv(e,n,i){n=n.map(s=>({...s,child_csv:[]}));let r;for(let s of this.csvFiles){if(s.url===e){r=s;break}for(let o of s.child_csv){if(o.url===e){r=o;break}for(let l of o.child_csv)if(l.url===e){r=l;break}}}r?(r.image_count=i,r.child_csv=n):(r={url:e,image_count:i,child_csv:n},this.csvFiles.push(r))}addRows(e){e=e.map(r=>{if(r.written&&(r.written=parseFloat(r.written)),r.shape){let s=r.shape.split(",").map(l=>parseInt(l)),o;r.dimension_names?o=r.dimension_names.split(","):s.length==5&&(o=["t","c","z","y","x"]),o&&o.length==s.length&&o.forEach((l,u)=>r["size_"+l]=s[u]),r.dim_count=s.reduce((l,u)=>l+(u>1?1:0),0)}return r.rating=Math.random()*4,r}),e.length>1&&(e[mi(e.length)].rating=10+Math.random()*5,e[mi(e.length)].rating=5+Math.random()*5),console.log("Adding rows",e),this.store.update(r=>(r.push(...e),r.sort((s,o)=>this.compareRows(s,o,!0)),r));let n=e.map(r=>r.organismId);console.log("organismIds",n),mr.addTerms(n);let i=e.map(r=>r.fbbiId);console.log("fbbiIds",i),pr.addTerms(i)}populateRow(e,n){this.store.update(i=>(i=i.map(r=>(r.url===e&&(r={...r,...n}),r)),i))}async loadNgffMetadata(e){var d;const[n,i,r]=await fn(e);let s=[],o=0,l=0,u=!1,h=!0,f={multiscales:n},g=i;if(r&&(o=r.wells.length,l=r.field_count||1),n){const v=(d=n[0])==null?void 0:d.datasets[0],p=v==null?void 0:v.path;if(p){const E=await fetch(`${i}/${p}/zarr.json`).then(O=>O.json()).catch(O=>{console.log(`----> Failed to parse ${i}/${p}/zarr.json`,O)});s=E==null?void 0:E.shape}}else console.log("No multiscales found"),u=!0,s=[0];this.populateRow(e,{image_attrs:f,image_url:g,shape:s,well_count:o,field_count:l,load_failed:u,loaded:h})}async loadRocrateJsonAllRows(){let e=rn(this.store);for(let n=0;n<e.length;n=n+yi){let i=Yr(n,Math.min(n+yi,e.length)).map(r=>this.loadRocrateJson(e[r].url));await Promise.all(i)}}compareRows(e,n,i=!1){let r=e[this.sortColumn],s=n[this.sortColumn];if(i)return r===void 0&&(r=0),s===void 0&&(s=0),r<s?this.sortAscending?-1:1:r>s?this.sortAscending?1:-1:0;r===void 0&&(r=""),s===void 0&&(s="");let o=0;return i?o=r-s:o=r.localeCompare(s),this.sortAscending?o:-o}sortTable(e,n=!0){this.sortColumn=e,this.sortAscending=n;let i=this.isColumnNumeric(e);this.store.update(r=>(r.sort((s,o)=>this.compareRows(s,o,i)),r))}isColumnNumeric(e){let n=rn(this.store);for(let i of n){let r=i[e];if(r!==void 0&&r!=="")return!isNaN(r)}}emptyTable(){this.store.set([])}subscribe(e){return this.store.subscribe(e)}getRows(){return rn(this.store)}}const Ne=new ns;function is(t){let e,n,i,r,s,o,l,u;return{c(){e=C("button"),n=G(t[1]),i=Y(),r=C("span"),r.textContent="^",s=Y(),o=C("span"),o.textContent="^",k(r,"class","acc svelte-x3kqyg"),Ct(r,"strong",t[3]==t[0]&&t[4]),k(o,"class","dec svelte-x3kqyg"),Ct(o,"strong",t[3]==t[0]&&!t[4]),k(e,"class","svelte-x3kqyg")},m(h,f){ke(h,e,f),_(e,n),_(e,i),_(e,r),_(e,s),_(e,o),l||(u=Se(e,"click",t[5]),l=!0)},p(h,[f]){f&2&&Ie(n,h[1]),f&25&&Ct(r,"strong",h[3]==h[0]&&h[4]),f&25&&Ct(o,"strong",h[3]==h[0]&&!h[4])},i:ze,o:ze,d(h){h&&ye(e),l=!1,u()}}}function rs(t,e,n){let{col_name:i}=e,{col_label:r}=e,{handleSort:s}=e,{sortedBy:o}=e,{sortAscending:l}=e;const u=()=>s(i);return t.$$set=h=>{"col_name"in h&&n(0,i=h.col_name),"col_label"in h&&n(1,r=h.col_label),"handleSort"in h&&n(2,s=h.handleSort),"sortedBy"in h&&n(3,o=h.sortedBy),"sortAscending"in h&&n(4,l=h.sortAscending)},[i,r,s,o,l,u]}class St extends lt{constructor(e){super(),ot(this,e,rs,is,nt,{col_name:0,col_label:1,handleSort:2,sortedBy:3,sortAscending:4})}}const nn={AUTO:"auto",START:"start",CENTER:"center",END:"end"},$e={HORIZONTAL:"horizontal",VERTICAL:"vertical"},Ft={OBSERVED:0,REQUESTED:1},ss={[$e.VERTICAL]:"top",[$e.HORIZONTAL]:"left"},bi={[$e.VERTICAL]:"scrollTop",[$e.HORIZONTAL]:"scrollLeft"};class os{constructor({itemSize:e,itemCount:n,estimatedItemSize:i}){this.itemSize=e,this.itemCount=n,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:n,estimatedItemSize:i}){n!=null&&(this.itemCount=n),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:n}=this;return typeof n=="function"?n(e):Array.isArray(n)?n[e]:n}computeTotalSizeAndPositionData(){let e=0;for(let n=0;n<this.itemCount;n++){const i=this.getSize(n),r=e;e+=i,this.itemSizeAndPositionData[n]={offset:r,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const n=this.getSizeAndPositionOfLastMeasuredItem();let i=n.offset+n.size;for(let r=this.lastMeasuredIndex+1;r<=e;r++){const s=this.getSize(r);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${r} of value ${s}`);this.itemSizeAndPositionData[r]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=nn.START,containerSize:n,currentOffset:i,targetIndex:r}){if(n<=0)return 0;const s=this.getSizeAndPositionForIndex(r),o=s.offset,l=o-n+s.size;let u;switch(e){case nn.END:u=l;break;case nn.CENTER:u=o-(n-s.size)/2;break;case nn.START:u=o;break;default:u=Math.max(l,Math.min(o,i))}const h=this.getTotalSize();return Math.max(0,Math.min(h-n,u))}getVisibleRange({containerSize:e=0,offset:n,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=n+e;let o=this.findNearestItem(n);if(o===void 0)throw Error(`Invalid offset ${n} specified`);const l=this.getSizeAndPositionForIndex(o);n=l.offset+l.size;let u=o;for(;n<s&&u<this.itemCount-1;)u++,n+=this.getSizeAndPositionForIndex(u).size;return i&&(o=Math.max(0,o-i),u=Math.min(u+i,this.itemCount-1)),{start:o,stop:u}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const n=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return n.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:n,offset:i}){let r=0,s=0;for(;e<=n;){if(r=e+Math.floor((n-e)/2),s=this.getSizeAndPositionForIndex(r).offset,s===i)return r;s<i?e=r+1:s>i&&(n=r-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:n}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<n;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:n})}}const ls=t=>({}),vi=t=>({});function wi(t,e,n){const i=t.slice();return i[37]=e[n],i}const as=t=>({style:t[0]&4,index:t[0]&4}),ki=t=>({style:t[37].style,index:t[37].index}),us=t=>({}),Ei=t=>({});function Ai(t,e){let n,i;const r=e[21].item,s=Cn(r,e,e[20],ki);return{key:t,first:null,c(){n=lr(),s&&s.c(),this.first=n},m(o,l){ke(o,n,l),s&&s.m(o,l),i=!0},p(o,l){e=o,s&&s.p&&(!i||l[0]&1048580)&&Tn(s,r,e,e[20],i?zn(r,e[20],l,as):Rn(e[20]),ki)},i(o){i||(ue(s,o),i=!0)},o(o){pe(s,o),i=!1},d(o){o&&ye(n),s&&s.d(o)}}}function cs(t){let e,n,i,r=[],s=new Map,o,l;const u=t[21].header,h=Cn(u,t,t[20],Ei);let f=xe(t[2]);const g=p=>p[0]?p[0](p[37].index):p[37].index;for(let p=0;p<f.length;p+=1){let E=wi(t,f,p),O=g(E);s.set(O,r[p]=Ai(O,E))}const d=t[21].footer,v=Cn(d,t,t[20],vi);return{c(){e=C("div"),h&&h.c(),n=Y(),i=C("div");for(let p=0;p<r.length;p+=1)r[p].c();o=Y(),v&&v.c(),k(i,"class","virtual-list-inner svelte-dwpad5"),k(i,"style",t[4]),k(e,"class","virtual-list-wrapper svelte-dwpad5"),k(e,"style",t[3])},m(p,E){ke(p,e,E),h&&h.m(e,null),_(e,n),_(e,i);for(let O=0;O<r.length;O+=1)r[O]&&r[O].m(i,null);_(e,o),v&&v.m(e,null),t[22](e),l=!0},p(p,E){h&&h.p&&(!l||E[0]&1048576)&&Tn(h,u,p,p[20],l?zn(u,p[20],E,us):Rn(p[20]),Ei),E[0]&1048581&&(f=xe(p[2]),Vn(),r=ar(r,E,g,1,p,f,s,i,Ur,Ai,null,wi),Wn()),(!l||E[0]&16)&&k(i,"style",p[4]),v&&v.p&&(!l||E[0]&1048576)&&Tn(v,d,p,p[20],l?zn(d,p[20],E,ls):Rn(p[20]),vi),(!l||E[0]&8)&&k(e,"style",p[3])},i(p){if(!l){ue(h,p);for(let E=0;E<f.length;E+=1)ue(r[E]);ue(v,p),l=!0}},o(p){pe(h,p);for(let E=0;E<r.length;E+=1)pe(r[E]);pe(v,p),l=!1},d(p){p&&ye(e),h&&h.d(p);for(let E=0;E<r.length;E+=1)r[E].d();v&&v.d(p),t[22](null)}}}const fs=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function hs(t,e,n){let{$$slots:i={},$$scope:r}=e,{height:s}=e,{width:o="100%"}=e,{itemCount:l}=e,{itemSize:u}=e,{estimatedItemSize:h=null}=e,{stickyIndices:f=null}=e,{getKey:g=null}=e,{scrollDirection:d=$e.VERTICAL}=e,{scrollOffset:v=null}=e,{scrollToIndex:p=null}=e,{scrollToAlignment:E=null}=e,{scrollToBehaviour:O="instant"}=e,{overscanCount:U=3}=e;const K=Lr(),V=new os({itemCount:l,itemSize:u,estimatedItemSize:le()});let j=!1,B,Z=[],A={offset:v||p!=null&&Z.length&&P(p)||0,scrollChangeReason:Ft.REQUESTED},c=A,a={scrollToIndex:p,scrollToAlignment:E,scrollOffset:v,itemCount:l,itemSize:u,estimatedItemSize:h},m={},T="",S="";b(),qn(()=>{n(18,j=!0),B.addEventListener("scroll",F,fs),v!=null?R(v):p!=null&&R(P(p))}),Or(()=>{j&&B.removeEventListener("scroll",F)});function z(){if(!j)return;const I=a.scrollToIndex!==p||a.scrollToAlignment!==E,W=a.itemCount!==l||a.itemSize!==u||a.estimatedItemSize!==h;W&&(V.updateConfig({itemSize:u,itemCount:l,estimatedItemSize:le()}),y()),a.scrollOffset!==v?n(19,A={offset:v||0,scrollChangeReason:Ft.REQUESTED}):typeof p=="number"&&(I||W)&&n(19,A={offset:P(p,E,l),scrollChangeReason:Ft.REQUESTED}),a={scrollToIndex:p,scrollToAlignment:E,scrollOffset:v,itemCount:l,itemSize:u,estimatedItemSize:h}}function M(){if(!j)return;const{offset:I,scrollChangeReason:W}=A;(c.offset!==I||c.scrollChangeReason!==W)&&b(),c.offset!==I&&W===Ft.REQUESTED&&R(I),c=A}function b(){const{offset:I}=A,{start:W,stop:$}=V.getVisibleRange({containerSize:d===$e.VERTICAL?s:o,offset:I,overscanCount:U});let x=[];const H=V.getTotalSize();d===$e.VERTICAL?(n(3,T=`height:${s}${typeof s=="number"?"px":""};width:${o};`),n(4,S=`flex-direction:column;height:${H}px;`)):(n(3,T=`height:${s};width:${o}${typeof o=="number"?"px":""}`),n(4,S=`min-height:100%;width:${H}px;`));const D=f!=null&&f.length!==0;if(D)for(let q=0;q<f.length;q++){const ee=f[q];x.push({index:ee,style:L(ee,!0)})}if(W!==void 0&&$!==void 0){for(let q=W;q<=$;q++)D&&f.includes(q)||x.push({index:q,style:L(q,!1)});K("itemsUpdated",{start:W,end:$})}n(2,Z=x)}function R(I){"scroll"in B?B.scroll({[ss[d]]:I,behavior:O}):n(1,B[bi[d]]=I,B)}function y(I=0){m={},V.resetItem(I),b()}function P(I,W=E,$=l){return(I<0||I>=$)&&(I=0),V.getUpdatedOffsetForIndex({align:W,containerSize:d===$e.VERTICAL?s:o,currentOffset:A.offset||0,targetIndex:I})}function F(I){const W=ae();W<0||A.offset===W||I.target!==B||(n(19,A={offset:W,scrollChangeReason:Ft.OBSERVED}),K("afterScroll",{offset:W,event:I}))}function ae(){return B[bi[d]]}function le(){return h||typeof u=="number"&&u||50}function L(I,W){if(m[I])return m[I];const{size:$,offset:x}=V.getSizeAndPositionForIndex(I);let H;return d===$e.VERTICAL?(H=`left:0;width:100%;height:${$}px;`,W?H+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${x}px;margin-bottom:${-(x+$)}px;`:H+=`position:absolute;top:${x}px;`):(H=`top:0;width:${$}px;`,W?H+=`position:sticky;z-index:1;left:0;margin-left:${x}px;margin-right:${-(x+$)}px;`:H+=`position:absolute;height:100%;left:${x}px;`),m[I]=H}function X(I){un[I?"unshift":"push"](()=>{B=I,n(1,B)})}return t.$$set=I=>{"height"in I&&n(5,s=I.height),"width"in I&&n(6,o=I.width),"itemCount"in I&&n(7,l=I.itemCount),"itemSize"in I&&n(8,u=I.itemSize),"estimatedItemSize"in I&&n(9,h=I.estimatedItemSize),"stickyIndices"in I&&n(10,f=I.stickyIndices),"getKey"in I&&n(0,g=I.getKey),"scrollDirection"in I&&n(11,d=I.scrollDirection),"scrollOffset"in I&&n(12,v=I.scrollOffset),"scrollToIndex"in I&&n(13,p=I.scrollToIndex),"scrollToAlignment"in I&&n(14,E=I.scrollToAlignment),"scrollToBehaviour"in I&&n(15,O=I.scrollToBehaviour),"overscanCount"in I&&n(16,U=I.overscanCount),"$$scope"in I&&n(20,r=I.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&z(),t.$$.dirty[0]&524288&&M(),t.$$.dirty[0]&263264&&j&&y(0)},[g,B,Z,T,S,s,o,l,u,h,f,d,v,p,E,O,U,y,j,A,r,i,X]}class ds extends lt{constructor(e){super(),ot(this,e,hs,cs,nt,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),De()}get width(){return this.$$.ctx[6]}set width(e){this.$$set({width:e}),De()}get itemCount(){return this.$$.ctx[7]}set itemCount(e){this.$$set({itemCount:e}),De()}get itemSize(){return this.$$.ctx[8]}set itemSize(e){this.$$set({itemSize:e}),De()}get estimatedItemSize(){return this.$$.ctx[9]}set estimatedItemSize(e){this.$$set({estimatedItemSize:e}),De()}get stickyIndices(){return this.$$.ctx[10]}set stickyIndices(e){this.$$set({stickyIndices:e}),De()}get getKey(){return this.$$.ctx[0]}set getKey(e){this.$$set({getKey:e}),De()}get scrollDirection(){return this.$$.ctx[11]}set scrollDirection(e){this.$$set({scrollDirection:e}),De()}get scrollOffset(){return this.$$.ctx[12]}set scrollOffset(e){this.$$set({scrollOffset:e}),De()}get scrollToIndex(){return this.$$.ctx[13]}set scrollToIndex(e){this.$$set({scrollToIndex:e}),De()}get scrollToAlignment(){return this.$$.ctx[14]}set scrollToAlignment(e){this.$$set({scrollToAlignment:e}),De()}get scrollToBehaviour(){return this.$$.ctx[15]}set scrollToBehaviour(e){this.$$set({scrollToBehaviour:e}),De()}get overscanCount(){return this.$$.ctx[16]}set overscanCount(e){this.$$set({overscanCount:e}),De()}get recomputeSizes(){return this.$$.ctx[17]}}class Qt extends Error{constructor(e,n={}){super(`Node not found: ${e}`,n),this.name="NodeNotFoundError"}}class Hn extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const _s="modulepreload",gs=function(t){return"https://jburel.github.io/ome2024-ngff-challenge/"+t},Si={},Mt=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(n.map(l=>{if(l=gs(l),l in Si)return;Si[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":_s,u||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((g,d)=>{f.addEventListener("load",g),f.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${l}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var We;class yr{constructor(e,n,i){Ae(this,We);typeof e=="number"?me(this,We,new Uint8Array(e)):e instanceof ArrayBuffer?me(this,We,new Uint8Array(e,n,i)):me(this,We,new Uint8Array(Array.from(e,r=>r?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return J(this,We).byteOffset}get byteLength(){return J(this,We).byteLength}get buffer(){return J(this,We).buffer}get length(){return J(this,We).length}get(e){let n=J(this,We)[e];return typeof n=="number"?n!==0:n}set(e,n){J(this,We)[e]=n?1:0}fill(e){J(this,We).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}We=new WeakMap;var Tt;class Kn{constructor(e,n,i,r){Q(this,"_data");Q(this,"chars");Ae(this,Tt);if(this.chars=e,me(this,Tt,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*e);else if(n instanceof ArrayBuffer)r&&(r=r*e),this._data=new Uint8Array(n,i,r);else{let s=Array.from(n);this._data=new Uint8Array(s.length*e);for(let o=0;o<s.length;o++)this.set(o,s[o])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(e,n){const i=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);i.fill(0),i.set(J(this,Tt).encode(n))}fill(e){const n=J(this,Tt).encode(e);for(let i=0;i<this.length;i++)this._data.set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}Tt=new WeakMap;var Oe;const Zn=class Zn{constructor(e,n,i,r){Ae(this,Oe);Q(this,"chars");if(this.chars=e,typeof n=="number")me(this,Oe,new Int32Array(n*e));else if(n instanceof ArrayBuffer)r&&(r*=e),me(this,Oe,new Int32Array(n,i,r));else{const s=n,o=new Zn(e,1);me(this,Oe,new Int32Array(function*(){for(let l of s)o.set(0,l),yield*J(o,Oe)}()))}}get BYTES_PER_ELEMENT(){return J(this,Oe).BYTES_PER_ELEMENT*this.chars}get byteLength(){return J(this,Oe).byteLength}get byteOffset(){return J(this,Oe).byteOffset}get buffer(){return J(this,Oe).buffer}get length(){return J(this,Oe).length/this.chars}get(e){const n=this.chars*e;let i="";for(let r=0;r<this.chars;r++)i+=String.fromCodePoint(J(this,Oe)[n+r]);return i.replace(/\u0000/g,"")}set(e,n){const i=this.chars*e,r=J(this,Oe).subarray(i,i+this.chars);r.fill(0);for(let s=0;s<this.chars;s++)r[s]=n.codePointAt(s)??0}fill(e){this.set(0,e);let n=J(this,Oe).subarray(0,this.chars);for(let i=1;i<this.length;i++)J(this,Oe).set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};Oe=new WeakMap;let Ut=Zn;function Zt(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function Ii(t,e){const n=e/2,i=e-1;let r=0;for(let s=0;s<t.length;s+=e)for(let o=0;o<n;o+=1)r=t[s+o],t[s+o]=t[s+i-o],t[s+i-o]=r}const ms={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:yr},ps=/v2:([US])(\d+)/;function br(t){if(t==="v2:object")return globalThis.Array;let e=t.match(ps);if(e){let[,i,r]=e;return(i==="U"?Ut:Kn).bind(null,Number(r))}let n=ms[t];if(!n)throw new Error(`Unknown or unsupported data_type: ${t}`);return n}function bt(t,e){return(e==="C"?ys:bs)(t)}function ys(t){const e=t.length,n=globalThis.Array(e);for(let i=e-1,r=1;i>=0;i--)n[i]=r,r*=t[i];return n}function bs(t){const e=t.length,n=globalThis.Array(e);for(let i=0,r=1;i<e;i++)n[i]=r,r*=t[i];return n}function vs({name:t,configuration:e}){if(t==="default"){const n=(e==null?void 0:e.separator)??"/";return i=>["c",...i].join(n)}if(t==="v2"){const n=(e==null?void 0:e.separator)??".";return i=>i.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function Ln(t){var n;const e=t.find(i=>i.name==="transpose");return((n=e==null?void 0:e.configuration)==null?void 0:n.order)==="F"?"F":"C"}const ws=/^([<|>])(.*)$/;function ks(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(ws);if(!e)throw new Error(`Invalid dtype: ${t}`);let[,n,i]=e,r={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[i]??(i.startsWith("S")||i.startsWith("U")?`v2:${i}`:void 0);if(!r)throw new Error(`Unsupported or unknown dtype: ${t}`);return n==="|"?{data_type:r}:{data_type:r,endian:n==="<"?"little":"big"}}function Es(t,e={}){let n=[],i=ks(t.dtype);t.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in i&&i.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:r,...s}of t.filters??[])n.push({name:r,configuration:s});if(t.compressor){let{id:r,...s}=t.compressor;n.push({name:r,configuration:s})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:i.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:n,fill_value:t.fill_value,attributes:e}}function As(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function Ss(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let n=t==="bool";if(e==="boolean")return n;let i=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return i;let r=t==="int64"||t==="uint64";if(e==="bigint")return r;let s=t==="v2:object";return e==="object"?s:!i&&!r&&!n&&!s}function Is(t){return(t==null?void 0:t.name)==="sharding_indexed"}function vr(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}const Ci=Cs();function Cs(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function zi(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var Bt,rt,jt,qt,Rt;const Xn=class Xn{constructor(e,n){Q(this,"kind","array_to_bytes");Ae(this,Bt);Ae(this,rt);Ae(this,jt);Ae(this,qt);Ae(this,Rt);me(this,Rt,e==null?void 0:e.endian),me(this,rt,br(n.data_type)),me(this,qt,n.shape),me(this,Bt,bt(n.shape,Ln(n.codecs)));const i=new(J(this,rt))(0);me(this,jt,i.BYTES_PER_ELEMENT)}static fromConfig(e,n){return new Xn(e,n)}encode(e){let n=new Uint8Array(e.data.buffer);return Ci&&J(this,Rt)==="big"&&Ii(n,zi(J(this,rt))),n}decode(e){return Ci&&J(this,Rt)==="big"&&Ii(e,zi(J(this,rt))),{data:new(J(this,rt))(e.buffer,e.byteOffset,e.byteLength/J(this,jt)),shape:J(this,qt),stride:J(this,Bt)}}};Bt=new WeakMap,rt=new WeakMap,jt=new WeakMap,qt=new WeakMap,Rt=new WeakMap;let hn=Xn;class Jn{constructor(){Q(this,"kind","bytes_to_bytes")}static fromConfig(){return new Jn}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}function zs(t,e){if(Number.isNaN(e))throw new Error("JsonCodec allow_nan is false but NaN was encountered during encoding.");if(e===Number.POSITIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but Infinity was encountered during encoding.");if(e===Number.NEGATIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but -Infinity was encountered during encoding.");return e}function Ts(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((n,i)=>(n[i]=e[i],n),{}):e}var Vt,Wt;const $n=class $n{constructor(e={}){Q(this,"configuration");Q(this,"kind","array_to_bytes");Ae(this,Vt);Ae(this,Wt);this.configuration=e;const{encoding:n="utf-8",skipkeys:i=!1,ensure_ascii:r=!0,check_circular:s=!0,allow_nan:o=!0,sort_keys:l=!0,indent:u,strict:h=!0}=e;let f=e.separators;f||(u?f=[", ",": "]:f=[",",":"]),me(this,Vt,{encoding:n,skipkeys:i,ensure_ascii:r,check_circular:s,allow_nan:o,indent:u,separators:f,sort_keys:l}),me(this,Wt,{strict:h})}static fromConfig(e){return new $n(e)}encode(e){const{indent:n,encoding:i,ensure_ascii:r,check_circular:s,allow_nan:o,sort_keys:l}=J(this,Vt);if(i!=="utf-8")throw new Error("JsonCodec does not yet support non-utf-8 encoding.");const u=[];if(!s)throw new Error("JsonCodec does not yet support skipping the check for circular references during encoding.");o||u.push(zs),l&&u.push(Ts);const h=Array.from(e.data);h.push("|O"),h.push(e.shape);let f;u.length&&(f=(d,v)=>{let p=v;for(let E of u)p=E(d,p);return p});let g=JSON.stringify(h,f,n);return r&&(g=g.replace(/[\u007F-\uFFFF]/g,d=>{const v=`0000${d.charCodeAt(0).toString(16)}`;return`\\u${v.substring(v.length-4)}`})),new TextEncoder().encode(g)}decode(e){const{strict:n}=J(this,Wt);if(!n)throw new Error("JsonCodec does not yet support non-strict decoding.");const i=Zt(e),r=i.pop();if(i.pop(),!r)throw new Error("0D not implemented for JsonCodec.");const s=bt(r,"C");return{data:i,shape:r,stride:s}}};Vt=new WeakMap,Wt=new WeakMap;let Fn=$n;function Ti(t){return t instanceof yr||t instanceof Kn||t instanceof Ut?new Proxy(t,{get(n,i){return n.get(Number(i))},set(n,i,r){return n.set(Number(i),r),!0}}):t}function Rs(t,e){let n;return t.data instanceof Kn||t.data instanceof Ut?n=new t.constructor(t.data.length,t.data.chars):n=new t.constructor(t.data.length),{data:n,shape:t.shape,stride:bt(t.shape,e)}}function Os(t,e){let n=Rs(t,e),i=t.shape.length,r=t.data.length,s=Array(i).fill(0),o=Ti(t.data),l=Ti(n.data);for(let u=0;u<r;u++){let h=0;for(let f=0;f<i;f++)h+=s[f]*n.stride[f];l[h]=o[u],s[0]+=1;for(let f=0;f<i;f++)if(s[f]===t.shape[f]){if(f+1===i)break;s[f]=0,s[f+1]+=1}}return n}function Ls(t){if(!t.stride)return"C";let e=bt(t.shape,"C");return t.stride.every((n,i)=>n===e[i])?"C":"F"}class Gn{constructor(e){Q(this,"configuration");Q(this,"kind","array_to_array");this.configuration=e}static fromConfig(e){return new Gn(e)}encode(e){var n,i;return Ls(e)===((n=this.configuration)==null?void 0:n.order)?e:Os(e,((i=this.configuration)==null?void 0:i.order)??"C")}decode(e){return e}}var Ht,Kt;const ei=class ei{constructor(e){Q(this,"kind","array_to_bytes");Ae(this,Ht);Ae(this,Kt);me(this,Ht,e),me(this,Kt,bt(e,"C"))}static fromConfig(e,n){return new ei(n.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let n=new TextDecoder,i=new DataView(e.buffer),r=Array(i.getUint32(0,!0)),s=4;for(let o=0;o<r.length;o++){let l=i.getUint32(s,!0);s+=4,r[o]=n.decode(e.buffer.slice(s,s+l)),s+=l}return{data:r,shape:J(this,Ht),stride:J(this,Kt)}}};Ht=new WeakMap,Kt=new WeakMap;let Mn=ei;function Fs(){return new Map().set("blosc",()=>Mt(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1])).then(t=>t.default)).set("gzip",()=>Mt(()=>import("./gzip-CF-9a_hd.js"),__vite__mapDeps([2,3])).then(t=>t.default)).set("lz4",()=>Mt(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([4,1])).then(t=>t.default)).set("zlib",()=>Mt(()=>import("./zlib-CBiqHlio.js"),__vite__mapDeps([5,3])).then(t=>t.default)).set("zstd",()=>Mt(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([6,1])).then(t=>t.default)).set("transpose",()=>Gn).set("bytes",()=>hn).set("crc32c",()=>Jn).set("vlen-utf8",()=>Mn).set("json2",()=>Fn)}const Ms=Fs();function Dn(t){let e;return{async encode(n){e||(e=await Ri(t));for(const r of e.array_to_array)n=await r.encode(n);let i=await e.array_to_bytes.encode(n);for(const r of e.bytes_to_bytes)i=await r.encode(i);return i},async decode(n){e||(e=await Ri(t));for(let r=e.bytes_to_bytes.length-1;r>=0;r--)n=await e.bytes_to_bytes[r].decode(n);let i=await e.array_to_bytes.decode(n);for(let r=e.array_to_array.length-1;r>=0;r--)i=await e.array_to_array[r].decode(i);return i}}}async function Ri(t){let e=t.codecs.map(async s=>{var l;let o=await((l=Ms.get(s.name))==null?void 0:l());if(!o)throw new Error(`Unknown codec: ${s.name}`);return{Codec:o,meta:s}}),n=[],i,r=[];for await(let{Codec:s,meta:o}of e){let l=s.fromConfig(o.configuration,t);switch(l.kind){case"array_to_array":n.push(l);break;case"array_to_bytes":i=l;break;default:r.push(l)}}if(!i){if(!Ds(t))throw new Error(`Cannot encode ${t.data_type} to bytes without a codec`);i=hn.fromConfig({endian:"little"},t)}return{array_to_array:n,array_to_bytes:i,bytes_to_bytes:r}}function Ds(t){return t.data_type!=="v2:object"}const Oi=18446744073709551615n;function Ns(t,e,n,i){if(t.store.getRange===void 0)throw new Error("Store does not support range requests");let r=t.store.getRange.bind(t.store),s=e.map((u,h)=>u/i.chunk_shape[h]),o=Dn({data_type:"uint64",shape:[...s,2],codecs:i.index_codecs}),l={};return async u=>{let h=u.map((K,V)=>Math.floor(K/s[V])),f=t.resolve(n(h)).path,g;if(f in l)g=l[f];else{let K=4,V=16*s.reduce((B,Z)=>B*Z,1),j=await r(f,{suffixLength:V+K});g=l[f]=j?await o.decode(j):null}if(g===null)return;let{data:d,shape:v,stride:p}=g,E=u.map((K,V)=>K%v[V]).reduce((K,V,j)=>K+V*p[j],0),O=d[E],U=d[E+1];if(!(O===Oi&&U===Oi))return r(f,{offset:Number(O),length:Number(U)})}}class Ot{constructor(e,n="/"){Q(this,"store");Q(this,"path");this.store=e,this.path=n}resolve(e){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new Ot(this.store,new URL(e,n).pathname)}}var Jt;class xn extends Ot{constructor(n,i,r){super(n,i);Q(this,"kind","group");Ae(this,Jt);me(this,Jt,r)}get attrs(){return J(this,Jt).attributes}}Jt=new WeakMap;const Dt=Symbol("zarrita.context");function Ps(t){return t[Dt]}function Us(t,e){let{configuration:n}=e.codecs.find(Is)??{},i={encode_chunk_key:vs(e.chunk_key_encoding),TypedArray:br(e.data_type),fill_value:e.fill_value};if(n){let s=Ln(n.codecs);return{...i,kind:"sharded",chunk_shape:n.chunk_shape,codec:Dn({data_type:e.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(o,l){return bt(o,l??s)},get_chunk_bytes:Ns(t,e.chunk_grid.configuration.chunk_shape,i.encode_chunk_key,n)}}let r=Ln(e.codecs);return{...i,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:Dn({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s,o){return bt(s,o??r)},async get_chunk_bytes(s,o){let l=i.encode_chunk_key(s),u=t.resolve(l).path;return t.store.get(u,o)}}}var nr,ir,yt,rr;let dn=(rr=class extends(ir=Ot,nr=Dt,ir){constructor(n,i,r){super(n,i);Q(this,"kind","array");Ae(this,yt);Q(this,nr);me(this,yt,{...r,fill_value:vr(r)}),this[Dt]=Us(this,r)}get attrs(){return J(this,yt).attributes}get shape(){return J(this,yt).shape}get chunks(){return this[Dt].chunk_shape}get dtype(){return J(this,yt).data_type}async getChunk(n,i){let r=this[Dt],s=await r.get_chunk_bytes(n,i);if(!s){let o=r.chunk_shape.reduce((u,h)=>u*h,1),l=new r.TypedArray(o);return l.fill(r.fill_value),{data:l,shape:r.chunk_shape,stride:r.get_strides(r.chunk_shape)}}return r.codec.decode(s)}is(n){return Ss(this.dtype,n)}},yt=new WeakMap,rr),_n=Bs();function Bs(){let t=new WeakMap;function e(n){let i=t.get(n)??{v2:0,v3:0};return t.set(n,i),i}return{increment(n,i){e(n)[i]+=1},version_max(n){let i=e(n);return i.v3>i.v2?"v3":"v2"}}}async function js(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?Zt(e):{}}async function qs(t,e={}){let n="store"in t?t:new Ot(t),i={};return(e.attrs??!0)&&(i=await js(n)),e.kind==="array"?Li(n,i):e.kind==="group"?Fi(n,i):Li(n,i).catch(r=>{if(r instanceof Qt)return Fi(n,i);throw r})}async function Li(t,e){let{path:n}=t.resolve(".zarray"),i=await t.store.get(n);if(!i)throw new Qt("v2 array",{cause:new Hn(n)});return _n.increment(t.store,"v2"),new dn(t.store,t.path,Es(Zt(i),e))}async function Fi(t,e){let{path:n}=t.resolve(".zgroup"),i=await t.store.get(n);if(!i)throw new Qt("v2 group",{cause:new Hn(n)});return _n.increment(t.store,"v2"),new xn(t.store,t.path,As(Zt(i),e))}async function Vs(t){let{store:e,path:n}=t.resolve("zarr.json"),i=await t.store.get(n);if(!i)throw new Qt("v3 array or group",{cause:new Hn(n)});let r=Zt(i);return r.node_type==="array"&&(r.fill_value=vr(r)),r.node_type==="array"?new dn(e,t.path,r):new xn(e,t.path,r)}async function Ws(t,e={}){let n="store"in t?t:new Ot(t),i=await Vs(n);if(_n.increment(n.store,"v3"),e.kind===void 0||e.kind==="array"&&i instanceof dn||e.kind==="group"&&i instanceof xn)return i;let r=i instanceof dn?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${r}.`)}async function pt(t,e={}){let n="store"in t?t.store:t,i=_n.version_max(n),r=i==="v2"?pt.v2:pt.v3,s=i==="v2"?pt.v3:pt.v2;return r(t,e).catch(o=>{if(o instanceof Qt)return s(t,e);throw o})}pt.v2=qs;pt.v3=Ws;function*Hs(t,e,n=1){e===void 0&&(e=t,t=0);for(let i=t;i<e;i+=n)yield i}function*Ks(...t){if(t.length===0)return;const e=t.map(i=>i[Symbol.iterator]()),n=e.map(i=>i.next());if(n.some(i=>i.done))throw new Error("Input contains an empty iterator.");for(let i=0;;){if(n[i].done){if(e[i]=t[i][Symbol.iterator](),n[i]=e[i].next(),++i>=e.length)return}else yield n.map(({value:r})=>r),i=0;n[i]=e[i].next()}}function Js({start:t,stop:e,step:n},i){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const r=n<0,[s,o]=r?[-1,i-1]:[0,i];return t===null?t=r?o:s:t<0?(t+=i,t<s&&(t=s)):t>o&&(t=o),e===null?e=r?s:o:e<0?(e+=i,e<s&&(e=s)):e>o&&(e=o),[t,e,n]}function Nn(t,e,n=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:n}}function Gs(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class Yn extends Error{constructor(e){super(e),this.name="IndexError"}}function xs(t,e){throw new Yn(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function Ys(t){throw new Yn(`index out of bounds for dimension with length ${t}`)}function Qs(){throw new Yn("only slices with step >= 1 are supported")}function Zs(t,e){t.length>e.length&&xs(t,e)}function Xs(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&Ys(e),t}class $s{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){Q(this,"dim_sel");Q(this,"dim_len");Q(this,"dim_chunk_len");Q(this,"nitems");e=Xs(e,n),this.dim_sel=e,this.dim_len=n,this.dim_chunk_len=i,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),n=e*this.dim_chunk_len,i=this.dim_sel-n;yield{dim_chunk_ix:e,dim_chunk_sel:i}}}class Mi{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){Q(this,"start");Q(this,"stop");Q(this,"step");Q(this,"dim_len");Q(this,"dim_chunk_len");Q(this,"nitems");Q(this,"nchunks");const[r,s,o]=Js(e,n);this.start=r,this.stop=s,this.step=o,this.step<1&&Qs(),this.dim_len=n,this.dim_chunk_len=i,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const i of Hs(e,n)){const r=i*this.dim_chunk_len,s=Math.min(this.dim_len,(i+1)*this.dim_chunk_len),o=s-r;let l=0,u=0;if(this.start<r){const v=(r-this.start)%this.step;v&&(u+=this.step-v),l=Math.ceil((r-this.start)/this.step)}else u=this.start-r;const h=this.stop>s?o:this.stop-r,f=[u,h,this.step],g=Math.ceil((h-u)/this.step),d=[l,l+g,1];yield{dim_chunk_ix:i,dim_chunk_sel:f,dim_out_sel:d}}}}function eo(t,e){let n=[];return t===null?n=e.map(i=>Nn(null)):Array.isArray(t)&&(n=t.map(i=>i??Nn(null))),Zs(n,e),n}class to{constructor({selection:e,shape:n,chunk_shape:i}){Q(this,"dim_indexers");Q(this,"shape");this.dim_indexers=eo(e,n).map((r,s)=>new(typeof r=="number"?$s:Mi)({dim_sel:r,dim_len:n[s],dim_chunk_len:i[s]})),this.shape=this.dim_indexers.filter(r=>r instanceof Mi).map(r=>r.nitems)}*[Symbol.iterator](){for(const e of Ks(...this.dim_indexers)){const n=e.map(r=>r.dim_chunk_ix),i=e.map(r=>"dim_out_sel"in r?{from:r.dim_chunk_sel,to:r.dim_out_sel}:{from:r.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:i}}}}function no(t,e){return"get"in t?t.get(e):t[e]}async function io(t,e,n,i){var u;let r=Ps(t),s=new to({selection:e,shape:t.shape,chunk_shape:t.chunks}),o=i.prepare(new r.TypedArray(s.shape.reduce((h,f)=>h*f,1)),s.shape,r.get_strides(s.shape,n.order)),l=((u=n.create_queue)==null?void 0:u.call(n))??Gs();for(const{chunk_coords:h,mapping:f}of s)l.add(async()=>{let{data:g,shape:d,stride:v}=await t.getChunk(h,n.opts),p=i.prepare(g,d,v);i.set_from_chunk(o,p,f)});return await l.onIdle(),s.shape.length===0?no(o.data,0):o}function Qn(t,e=0,n){let i=n??t.length-e;return{length:i,subarray(r,s=i){return Qn(t,e+r,s-r)},set(r,s=0){for(let o=0;o<r.length;o++)t[e+s+o]=r.get(o)},get(r){return t[e+r]}}}function In(t){return globalThis.Array.isArray(t.data)?{data:Qn(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function ro(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function so(t,e){if(globalThis.Array.isArray(t.data))return Qn([e]);let n=ro(t.data),i=new n([e]);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}const oo={prepare(t,e,n){return{data:t,shape:e,stride:n}},set_scalar(t,e,n){let i=In(t);Pn(i,e,so(t,n),i.bytes_per_element)},set_from_chunk(t,e,n){let i=In(t);ln(i,In(e),i.bytes_per_element,n)}};async function lo(t,e=null,n={}){return io(t,e,n,oo)}function wr(t,e,n){return n<0&&e<t?Math.floor((t-e-1)/-n)+1:t<e?Math.floor((e-t-1)/n)+1:0}function Pn(t,e,n,i){if(e.length===0){t.data.set(n,0);return}const[r,...s]=e,[o,...l]=t.stride;if(typeof r=="number"){const d=t.data.subarray(o*r*i);Pn({data:d,stride:l},s,n,i);return}const[u,h,f]=r,g=wr(u,h,f);if(s.length===0){for(let d=0;d<g;d++)t.data.set(n,o*(u+f*d)*i);return}for(let d=0;d<g;d++){const v=t.data.subarray(o*(u+f*d)*i);Pn({data:v,stride:l},s,n,i)}}function ln(t,e,n,i){const[r,...s]=i,[o,...l]=t.stride,[u,...h]=e.stride;if(r.from===null){if(s.length===0){t.data.set(e.data.subarray(0,n),r.to*n);return}ln({data:t.data.subarray(o*r.to*n),stride:l},e,n,s);return}if(r.to===null){if(s.length===0){let U=r.from*n;t.data.set(e.data.subarray(U,U+n),0);return}ln(t,{data:e.data.subarray(u*r.from*n),stride:h},n,s);return}const[f,g,d]=r.to,[v,p,E]=r.from,O=wr(f,g,d);if(s.length===0){if(d===1&&E===1&&o===1&&u===1){let U=v*n,K=O*n;t.data.set(e.data.subarray(U,U+K),f*n);return}for(let U=0;U<O;U++){let K=u*(v+E*U)*n;t.data.set(e.data.subarray(K,K+n),o*(f+d*U)*n)}return}for(let U=0;U<O;U++)ln({data:t.data.subarray(o*(f+U*d)*n),stride:l},{data:e.data.subarray(u*(v+U*E)*n),stride:h},n,s)}function kr(t,e,n,i={}){return e!==void 0&&n!==void 0&&(i={...i,headers:{...i.headers,Range:`bytes=${e}-${e+n-1}`}}),fetch(t,i)}function ao(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function Di(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const i=new URL(e.slice(1),n);return i.search=n.search,i}async function Ni(t){if(!(t.status===404||t.status===403)){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function uo(t,e,n,i){if(i)return fetch(t,{...n,headers:{...n.headers,Range:`bytes=-${e}`}});let r=await fetch(t,{...n,method:"HEAD"});if(!r.ok)return r;let s=r.headers.get("Content-Length"),o=Number(s);return kr(t,o-e,o,n)}var Gt,xt,Yt,Un;class co{constructor(e,n={}){Ae(this,Yt);Q(this,"url");Ae(this,Gt);Ae(this,xt);this.url=e,me(this,Gt,n.overrides??{}),me(this,xt,n.useSuffixRequest??!1)}async get(e,n={}){let i=Di(this.url,e).href,r=await fetch(i,An(this,Yt,Un).call(this,n));return Ni(r)}async getRange(e,n,i={}){let r=Di(this.url,e),s=An(this,Yt,Un).call(this,i),o;return"suffixLength"in n?o=await uo(r,n.suffixLength,s,J(this,xt)):o=await kr(r,n.offset,n.length,s),Ni(o)}}Gt=new WeakMap,xt=new WeakMap,Yt=new WeakSet,Un=function(e){return ao(J(this,Gt),e)};function fo(t){let e,n;return{c(){e=C("div"),n=C("canvas"),we(n,"width",t[1]+"px"),we(n,"background-color","lightgrey"),k(n,"height",t[3]),k(n,"width",t[2]),k(e,"class","canvasWrapper svelte-12wykiu"),we(e,"width",t[1]+"px"),Ct(e,"spinner",t[4])},m(i,r){ke(i,e,r),_(e,n),t[10](n)},p(i,[r]){r&2&&we(n,"width",i[1]+"px"),r&8&&k(n,"height",i[3]),r&4&&k(n,"width",i[2]),r&2&&we(e,"width",i[1]+"px"),r&16&&Ct(e,"spinner",i[4])},i:ze,o:ze,d(i){i&&ye(e),t[10](null)}}}const Pi=120;function ho(t,e,n){let{source:i}=e,{attrs:r}=e,{thumbDatasetIndex:s=void 0}=e,{thumbAspectRatio:o=1}=e,{max_size:l=512}=e,u,h=120,f=120,g=f/o,d=!0;async function v(){var R;let E=r.multiscales[0].datasets.map(y=>y.path),O=r.multiscales[0].axes.map(y=>y.name),U=E.at(-1);s!=null&&s<E.length&&(U=E[s]);const K=new co(i+"/"+U),V=await pt.v3(K,{kind:"array"});let j=O.indexOf("c"),B=V.shape;if(B.at(-1)*B.at(-2)>l*l){console.log("Lowest resolution too large for Thumbnail: ",B,i);return}let Z=B.length,A=B[j]||1,c,a;(R=r==null?void 0:r.omero)!=null&&R.channels?(c=r.omero.channels.map(y=>y.active),a=r.omero.channels.map(y=>_r(y.color))):(c=$r(A),a=es(A,c)),a=a.filter((y,P)=>c[P]);let T=c.reduce((y,P,F)=>(P&&y.push(F),y),[]).map(y=>{let P=B.map((F,ae)=>ae==j?y:ae>=Z-2?Nn(0,F):O[ae]=="z"||O[ae]=="t"?parseInt(F/2+""):0);return lo(V,P)}),S=await Promise.all(T),z=S.map(y=>dr(y)),M=Qr(S,z,a);n(2,f=B.at(-1)),n(3,g=B.at(-2));let b=f/Pi;g>f&&(b=g/Pi),n(1,h=f/b),setTimeout(()=>{const y=u.getContext("2d");n(4,d=!1),y.putImageData(new ImageData(M,f,g),0,0)},100)}qn(()=>{v()});function p(E){un[E?"unshift":"push"](()=>{u=E,n(0,u)})}return t.$$set=E=>{"source"in E&&n(5,i=E.source),"attrs"in E&&n(6,r=E.attrs),"thumbDatasetIndex"in E&&n(7,s=E.thumbDatasetIndex),"thumbAspectRatio"in E&&n(8,o=E.thumbAspectRatio),"max_size"in E&&n(9,l=E.max_size)},[u,h,f,g,d,i,r,s,o,l,p]}class _o extends lt{constructor(e){super(),ot(this,e,ho,fo,nt,{source:5,attrs:6,thumbDatasetIndex:7,thumbAspectRatio:8,max_size:9})}}function Ui(t,e,n){const i=t.slice();return i[8]=e[n],i}function Bi(t){let e,n;return e=new _o({props:{source:t[3],attrs:t[2],max_size:2e3,thumbDatasetIndex:t[4],thumbAspectRatio:t[5]}}),{c(){Ge(e.$$.fragment)},m(i,r){He(e,i,r),n=!0},p(i,r){const s={};r&8&&(s.source=i[3]),r&4&&(s.attrs=i[2]),r&16&&(s.thumbDatasetIndex=i[4]),r&32&&(s.thumbAspectRatio=i[5]),e.$set(s)},i(i){n||(ue(e.$$.fragment,i),n=!0)},o(i){pe(e.$$.fragment,i),n=!1},d(i){Ke(e,i)}}}function ji(t){let e,n,i,r=t[0][`size_${t[8]}`]+"",s;return{c(){e=C("tr"),n=C("td"),n.textContent=`${t[8].toUpperCase()}`,i=C("td"),s=G(r),k(n,"class","svelte-ufwatd"),k(i,"class","svelte-ufwatd")},m(o,l){ke(o,e,l),_(e,n),_(e,i),_(i,s)},p(o,l){l&1&&r!==(r=o[0][`size_${o[8]}`]+"")&&Ie(s,r)},d(o){o&&ye(e)}}}function qi(t){let e,n=t[0][`size_${t[8]}`]!==void 0&&ji(t);return{c(){n&&n.c(),e=lr()},m(i,r){n&&n.m(i,r),ke(i,e,r)},p(i,r){i[0][`size_${i[8]}`]!==void 0?n?n.p(i,r):(n=ji(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){i&&ye(e),n&&n.d(i)}}}function Vi(t){var f;let e,n,i=t[0].source+"",r,s,o,l=((f=t[0].csv)==null?void 0:f.split("/").pop())+"",u,h;return{c(){e=C("div"),n=G("Data from "),r=G(i),s=G(`:
        `),o=C("a"),u=G(l),k(o,"href",h=Hi(t[0])),k(o,"target","_blank")},m(g,d){ke(g,e,d),_(e,n),_(e,r),_(e,s),_(e,o),_(o,u)},p(g,d){var v;d&1&&i!==(i=g[0].source+"")&&Ie(r,i),d&1&&l!==(l=((v=g[0].csv)==null?void 0:v.split("/").pop())+"")&&Ie(u,l),d&1&&h!==(h=Hi(g[0]))&&k(o,"href",h)},d(g){g&&ye(e)}}}function Wi(t){let e,n,i,r,s;return{c(){e=C("div"),n=C("a"),i=G("Original data"),k(n,"title",r="Link to original data: "+t[0].origin),k(n,"href",s=t[0].origin),k(n,"target","_blank")},m(o,l){ke(o,e,l),_(e,n),_(n,i)},p(o,l){l&1&&r!==(r="Link to original data: "+o[0].origin)&&k(n,"title",r),l&1&&s!==(s=o[0].origin)&&k(n,"href",s)},d(o){o&&ye(e)}}}function go(t){let e,n,i,r,s,o,l,u,h=cn(t[0].written)+"",f,g,d,v,p=(t[0].name?t[0].name.replaceAll(t[1],`<mark>${t[1]}</mark>`):"")+"",E,O,U=t[6].replaceAll(t[1],`<mark>${t[1]}</mark>`)+"",K,V,j,B,Z,A,c,a,m=t[2]&&Bi(t),T=xe(["t","c","z","y","x"]),S=[];for(let b=0;b<5;b+=1)S[b]=qi(Ui(t,T,b));let z=t[0].source&&Vi(t),M=t[0].origin&&Wi(t);return{c(){e=C("div"),n=C("div"),m&&m.c(),i=Y(),r=C("table");for(let b=0;b<5;b+=1)S[b].c();s=Y(),o=C("tr"),l=C("td"),l.textContent="Size",u=C("td"),f=G(h),g=Y(),d=C("div"),v=C("div"),E=Y(),O=C("div"),K=Y(),z&&z.c(),V=Y(),M&&M.c(),j=Y(),B=C("a"),Z=G("OME-Validator"),k(n,"class","thumbWrapper svelte-ufwatd"),k(l,"class","svelte-ufwatd"),we(u,"white-space","nowrap"),k(u,"class","svelte-ufwatd"),k(r,"class","svelte-ufwatd"),k(B,"title",A="Open in Validator: "+t[0].url),k(B,"href",c="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+t[0].url),k(B,"target","_blank"),k(e,"class","zarr-list-item svelte-ufwatd")},m(b,R){ke(b,e,R),_(e,n),m&&m.m(n,null),_(e,i),_(e,r);for(let y=0;y<5;y+=1)S[y]&&S[y].m(r,null);_(r,s),_(r,o),_(o,l),_(o,u),_(u,f),_(e,g),_(e,d),_(d,v),v.innerHTML=p,_(d,E),_(d,O),O.innerHTML=U,_(d,K),z&&z.m(d,null),_(d,V),M&&M.m(d,null),_(d,j),_(d,B),_(B,Z),a=!0},p(b,[R]){if(b[2]?m?(m.p(b,R),R&4&&ue(m,1)):(m=Bi(b),m.c(),ue(m,1),m.m(n,null)):m&&(Vn(),pe(m,1,1,()=>{m=null}),Wn()),R&1){T=xe(["t","c","z","y","x"]);let y;for(y=0;y<5;y+=1){const P=Ui(b,T,y);S[y]?S[y].p(P,R):(S[y]=qi(P),S[y].c(),S[y].m(r,s))}for(;y<5;y+=1)S[y].d(1)}(!a||R&1)&&h!==(h=cn(b[0].written)+"")&&Ie(f,h),(!a||R&3)&&p!==(p=(b[0].name?b[0].name.replaceAll(b[1],`<mark>${b[1]}</mark>`):"")+"")&&(v.innerHTML=p),(!a||R&66)&&U!==(U=b[6].replaceAll(b[1],`<mark>${b[1]}</mark>`)+"")&&(O.innerHTML=U),b[0].source?z?z.p(b,R):(z=Vi(b),z.c(),z.m(d,V)):z&&(z.d(1),z=null),b[0].origin?M?M.p(b,R):(M=Wi(b),M.c(),M.m(d,j)):M&&(M.d(1),M=null),(!a||R&1&&A!==(A="Open in Validator: "+b[0].url))&&k(B,"title",A),(!a||R&1&&c!==(c="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+b[0].url))&&k(B,"href",c)},i(b){a||(ue(m),a=!0)},o(b){pe(m),a=!1},d(b){b&&ye(e),m&&m.d(),an(S,b),z&&z.d(),M&&M.d()}}}function Hi(t){return window.location.origin+window.location.pathname+"?csv="+t.csv}function mo(t,e,n){let i,{rowData:r}=e,{textFilter:s}=e,o,l,u,h=1;if(r.size_x&&r.size_y){let f=Math.max(r.size_x,r.size_y);for(u=0;f>256;)u+=1,f=f/2;h=r.size_x/r.size_y}return qn(async()=>{let f=r.url;r.series0!==void 0&&(f+="/"+r.series0);let g=await fn(f);n(2,o=g[0]),n(3,l=g[1]),g[2]}),t.$$set=f=>{"rowData"in f&&n(0,r=f.rowData),"textFilter"in f&&n(1,s=f.textFilter)},t.$$.update=()=>{var f;t.$$.dirty&3&&n(6,i=s!=""&&((f=r.description)!=null&&f.includes(s))?r.description:"")},[r,s,o,l,u,h,i]}class po extends lt{constructor(e){super(),ot(this,e,mo,go,nt,{rowData:0,textFilter:1})}}function yo(t){let e,n,i,r;return n=new po({props:{rowData:t[0][t[10]],textFilter:t[1]}}),{c(){e=C("div"),Ge(n.$$.fragment),k(e,"slot","item"),k(e,"style",i=t[9]),k(e,"class","row svelte-joy4w7")},m(s,o){ke(s,e,o),He(n,e,null),r=!0},p(s,o){const l={};o&1025&&(l.rowData=s[0][s[10]]),o&2&&(l.textFilter=s[1]),n.$set(l),(!r||o&512&&i!==(i=s[9]))&&k(e,"style",i)},i(s){r||(ue(n.$$.fragment,s),r=!0)},o(s){pe(n.$$.fragment,s),r=!1},d(s){s&&ye(e),Ke(n)}}}function bo(t){let e=!1,n=()=>{e=!1},i,r,s,o=`${t[3]}px`,l,u,h;return et(t[6]),et(t[7]),s=new ds({props:{width:"100%",height:t[3],itemCount:t[0].length,itemSize:160,getKey:t[4],$$slots:{item:[yo,({style:f,index:g})=>({9:f,10:g}),({style:f,index:g})=>(f?512:0)|(g?1024:0)]},$$scope:{ctx:t}}}),s.$on("afterScroll",t[5]),{c(){r=C("div"),Ge(s.$$.fragment),k(r,"class","imageListContainer svelte-joy4w7"),we(r,"height",o)},m(f,g){ke(f,r,g),He(s,r,null),l=!0,u||(h=[Se(window,"resize",t[6]),Se(window,"scroll",()=>{e=!0,clearTimeout(i),i=setTimeout(n,100),t[7]()})],u=!0)},p(f,[g]){g&4&&!e&&(e=!0,clearTimeout(i),scrollTo(window.pageXOffset,f[2]),i=setTimeout(n,100));const d={};g&8&&(d.height=f[3]),g&1&&(d.itemCount=f[0].length),g&3587&&(d.$$scope={dirty:g,ctx:f}),s.$set(d),g&8&&o!==(o=`${f[3]}px`)&&we(r,"height",o)},i(f){l||(ue(s.$$.fragment,f),l=!0)},o(f){pe(s.$$.fragment,f),l=!1},d(f){f&&ye(r),Ke(s),u=!1,tt(h)}}}function vo(t,e,n){let i,{tableRows:r}=e,{textFilter:s}=e;function o(d){return r[d].url}let l=0,u=0;function h(d){let v=d.detail.offset-u;l<300&&v>0||v<0&&l>0&&n(2,l+=v),u=d.detail.offset}function f(){n(3,i=window.innerHeight)}function g(){n(2,l=window.pageYOffset)}return t.$$set=d=>{"tableRows"in d&&n(0,r=d.tableRows),"textFilter"in d&&n(1,s=d.textFilter)},n(3,i=0),[r,s,l,i,o,h,f,g]}class wo extends lt{constructor(e){super(),ot(this,e,vo,bo,nt,{tableRows:0,textFilter:1})}}const ko="https://jburel.github.io/ome2024-ngff-challenge/selectCaret.svg",Eo="https://jburel.github.io/ome2024-ngff-challenge/ome-main-nav.svg";function Ao(t){let e;return{c(){e=C("nav"),e.innerHTML=`<img style="height: 30px" alt="OME Logo" src="${Eo}"/> <h2 class="svelte-jcf7ka">2024 NGFF Challenge</h2> <ul class="svelte-jcf7ka"><li class="svelte-jcf7ka"><a href="https://github.com/ome/ome2024-ngff-challenge/" target="_blank" class="svelte-jcf7ka">About</a></li></ul>`,k(e,"class","svelte-jcf7ka")},m(n,i){ke(n,e,i)},p:ze,i:ze,o:ze,d(n){n&&ye(e)}}}class So extends lt{constructor(e){super(),ot(this,e,null,Ao,nt,{})}}function Io(t){let e,n,i,r,s,o,l,u=t[0].source+"",h,f,g,d,v,p,E=t[0].total_count+"",O,U,K,V,j,B,Z;return{c(){e=C("div"),n=C("label"),i=C("img"),o=Y(),l=C("div"),h=G(u),f=Y(),g=C("br"),d=Y(),v=C("span"),p=G("("),O=G(E),U=G(" images)"),V=C("input"),k(i,"title",r=t[0].url),k(i,"class","sourceLogo svelte-1mddads"),k(i,"alt","Source logo"),di(i.src,s=gi(t[0].source))||k(i,"src",s),k(v,"title",K=t[0].child_csv.length+" collections"),k(V,"type","radio"),k(V,"name","source"),V.value=j=t[0].source,k(V,"class","svelte-1mddads"),k(n,"class","svelte-1mddads"),k(e,"class","source svelte-1mddads")},m(A,c){ke(A,e,c),_(e,n),_(n,i),_(n,o),_(n,l),_(l,h),_(l,f),_(l,g),_(l,d),_(l,v),_(v,p),_(v,O),_(v,U),_(l,V),B||(Z=Se(V,"change",function(){Bn(t[1])&&t[1].apply(this,arguments)}),B=!0)},p(A,[c]){t=A,c&1&&r!==(r=t[0].url)&&k(i,"title",r),c&1&&!di(i.src,s=gi(t[0].source))&&k(i,"src",s),c&1&&u!==(u=t[0].source+"")&&Ie(h,u),c&1&&E!==(E=t[0].total_count+"")&&Ie(O,E),c&1&&K!==(K=t[0].child_csv.length+" collections")&&k(v,"title",K),c&1&&j!==(j=t[0].source)&&(V.value=j)},i:ze,o:ze,d(A){A&&ye(e),B=!1,Z()}}}function Co(t,e,n){let{source:i}=e,{handleFilter:r}=e;return t.$$set=s=>{"source"in s&&n(0,i=s.source),"handleFilter"in s&&n(1,r=s.handleFilter)},[i,r]}class zo extends lt{constructor(e){super(),ot(this,e,Co,Io,nt,{source:0,handleFilter:1})}}function Ki(t,e,n){const i=t.slice();return i[29]=e[n],i}function Ji(t,e,n){const i=t.slice();return i[29]=e[n],i}function Gi(t,e,n){const i=t.slice();return i[34]=e[n],i}function xi(t,e,n){const i=t.slice();return i[37]=e[n],i}function Yi(t){let e,n;return e=new zo({props:{source:t[37],handleFilter:t[15]}}),{c(){Ge(e.$$.fragment)},m(i,r){He(e,i,r),n=!0},p(i,r){const s={};r[0]&2&&(s.source=i[37]),e.$set(s)},i(i){n||(ue(e.$$.fragment,i),n=!0)},o(i){pe(e.$$.fragment,i),n=!1},d(i){Ke(e,i)}}}function Qi(t){let e,n,i,r,s,o;return{c(){e=C("div"),n=C("label"),i=C("input"),r=G(`
              ❌ Clear Source Filter`),k(i,"type","radio"),k(i,"name","source"),i.value="",k(i,"class","svelte-11qe1zw"),k(n,"class","svelte-11qe1zw"),k(e,"class","source clear svelte-11qe1zw")},m(l,u){ke(l,e,u),_(e,n),_(n,i),_(n,r),s||(o=Se(i,"change",t[15]),s=!0)},p:ze,d(l){l&&ye(e),s=!1,o()}}}function Zi(t){let e,n,i,r,s,o,l,u,h,f=xe(Ne.getCsvSourceList(t[13])),g=[];for(let d=0;d<f.length;d+=1)g[d]=Xi(Gi(t,f,d));return{c(){e=C("div"),n=C("select"),i=C("option"),i.textContent="Collection";for(let d=0;d<g.length;d+=1)g[d].c();r=Y(),s=C("div"),o=C("button"),l=G("×"),i.__value="",Ve(i,i.__value),k(n,"name","collection"),k(n,"class","svelte-11qe1zw"),t[11]===void 0&&et(()=>t[21].call(n)),k(o,"title","Clear Filter"),we(o,"visibility",t[11]!==""?"visible":"hidden"),k(o,"class","svelte-11qe1zw"),k(s,"class","svelte-11qe1zw"),k(e,"class","selectWrapper svelte-11qe1zw")},m(d,v){ke(d,e,v),_(e,n),_(n,i);for(let p=0;p<g.length;p+=1)g[p]&&g[p].m(n,null);it(n,t[11],!0),_(e,r),_(e,s),_(s,o),_(o,l),u||(h=[Se(n,"change",t[21]),Se(n,"change",t[17]),Se(o,"click",t[17])],u=!0)},p(d,v){if(v[0]&8192){f=xe(Ne.getCsvSourceList(d[13]));let p;for(p=0;p<f.length;p+=1){const E=Gi(d,f,p);g[p]?g[p].p(E,v):(g[p]=Xi(E),g[p].c(),g[p].m(n,null))}for(;p<g.length;p+=1)g[p].d(1);g.length=f.length}v[0]&10240&&it(n,d[11]),v[0]&2048&&we(o,"visibility",d[11]!==""?"visible":"hidden")},d(d){d&&ye(e),an(g,d),u=!1,tt(h)}}}function Xi(t){let e,n=(t[34].source==t[13]?tr(t[34].url):t[34].source)+"",i,r,s=t[34].image_count+"",o,l,u;return{c(){e=C("option"),i=G(n),r=G(" ("),o=G(s),l=G(`)
                  `),e.__value=u=t[34].url,Ve(e,e.__value)},m(h,f){ke(h,e,f),_(e,i),_(e,r),_(e,o),_(e,l)},p(h,f){f[0]&8192&&n!==(n=(h[34].source==h[13]?tr(h[34].url):h[34].source)+"")&&Ie(i,n),f[0]&8192&&s!==(s=h[34].image_count+"")&&Ie(o,s),f[0]&8192&&u!==(u=h[34].url)&&(e.__value=u,Ve(e,e.__value))},d(h){h&&ye(e)}}}function $i(t){let e,n=t[29]+"",i,r;return{c(){e=C("option"),i=G(n),e.__value=r=t[4][t[29]],Ve(e,e.__value)},m(s,o){ke(s,e,o),_(e,i)},p(s,o){o[0]&16&&n!==(n=s[29]+"")&&Ie(i,n),o[0]&16&&r!==(r=s[4][s[29]])&&(e.__value=r,Ve(e,e.__value))},d(s){s&&ye(e)}}}function er(t,e){let n,i=e[29]+"",r,s;return{key:t,first:null,c(){n=C("option"),r=G(i),n.__value=s=e[5][e[29]],Ve(n,n.__value),this.first=n},m(o,l){ke(o,n,l),_(n,r)},p(o,l){e=o,l[0]&32&&i!==(i=e[29]+"")&&Ie(r,i),l[0]&32&&s!==(s=e[5][e[29]])&&(n.__value=s,Ve(n,n.__value))},d(o){o&&ye(n)}}}function To(t){let e,n,i,r,s,o,l,u,h=cn(t[3])+"",f,g,d=t[1].length+"",v,p,E,O,U,K,V,j,B,Z,A,c,a,m=t[13]!==""&&Ne.getCsvSourceList(t[13]).length>0,T,S,z,M,b=t[12]!==""?"All Dimensions":"Dimension Count",R,y,P,F,ae,le,L,X,I,W,$,x,H,D,q=t[10]==""?"Organism":"All Organisms",ee,he,ie,_e,te,re,Pe,be,ce,Te,Ce=t[9]==""?"Imaging Modality":"All Modalities",oe,fe,Ee=[],ne=new Map,Xe,Ue,Re,Ye,Qe,Je,Le,ve,Fe,Ze,vt,at,ti,ut,ni,ct,ii,ft,ri,ht,si,wt,dt,oi,Xt=t[0].length+"",gn,li,ai,_t,Be,mn,ui;n=new So({});let gt=xe(t[1]),de=[];for(let w=0;w<gt.length;w+=1)de[w]=Yi(xi(t,gt,w));const Er=w=>pe(de[w],1,1,()=>{de[w]=null});let je=t[13]!==""&&Qi(t),qe=m&&Zi(t),kt=xe(Object.keys(t[4]).sort()),Me=[];for(let w=0;w<kt.length;w+=1)Me[w]=$i(Ji(t,kt,w));let $t=xe(Object.keys(t[5]).sort());const ci=w=>w[29];for(let w=0;w<$t.length;w+=1){let N=Ki(t,$t,w),ge=ci(N);ne.set(ge,Ee[w]=er(ge,N))}return Ze=new St({props:{col_label:"X",col_name:"size_x",handleSort:t[14],sortedBy:t[6],sortAscending:t[7]}}),at=new St({props:{col_label:"Y",col_name:"size_y",handleSort:t[14],sortedBy:t[6],sortAscending:t[7]}}),ut=new St({props:{col_label:"Z",col_name:"size_z",handleSort:t[14],sortedBy:t[6],sortAscending:t[7]}}),ct=new St({props:{col_label:"C",col_name:"size_c",handleSort:t[14],sortedBy:t[6],sortAscending:t[7]}}),ft=new St({props:{col_label:"T",col_name:"size_t",handleSort:t[14],sortedBy:t[6],sortAscending:t[7]}}),ht=new St({props:{col_label:"Data size",col_name:"written",handleSort:t[14],sortedBy:t[6],sortAscending:t[7]}}),_t=new wo({props:{tableRows:t[0],textFilter:t[8]}}),{c(){e=C("div"),Ge(n.$$.fragment),i=Y(),r=C("main"),s=C("div"),o=C("h2"),l=G(t[2]),u=G(` Zarr Images,
        `),f=G(h),g=G(", from "),v=G(d),p=G(" sources:"),E=Y(),O=C("div");for(let w=0;w<de.length;w+=1)de[w].c();U=Y(),je&&je.c(),K=Y(),V=C("div"),j=C("div"),B=C("input"),Z=Y(),A=C("div"),c=C("div"),c.textContent="Filter by:",a=Y(),qe&&qe.c(),T=Y(),S=C("div"),z=C("select"),M=C("option"),R=G(b),y=C("hr"),P=C("option"),P.textContent="2D",F=C("option"),F.textContent="3D",ae=C("option"),ae.textContent="4D",le=C("option"),le.textContent="5D",L=Y(),X=C("div"),I=C("button"),W=G("×"),$=Y(),x=C("div"),H=C("select"),D=C("option"),ee=G(q),he=C("hr");for(let w=0;w<Me.length;w+=1)Me[w].c();ie=Y(),_e=C("div"),te=C("button"),re=G("×"),Pe=Y(),be=C("div"),ce=C("select"),Te=C("option"),oe=G(Ce),fe=C("hr");for(let w=0;w<Ee.length;w+=1)Ee[w].c();Xe=Y(),Ue=C("div"),Re=C("button"),Ye=G("×"),Qe=Y(),Je=C("div"),Le=Y(),ve=C("div"),Fe=G(`Sort:
          
          `),Ge(Ze.$$.fragment),vt=Y(),Ge(at.$$.fragment),ti=Y(),Ge(ut.$$.fragment),ni=Y(),Ge(ct.$$.fragment),ii=Y(),Ge(ft.$$.fragment),ri=Y(),Ge(ht.$$.fragment),si=Y(),wt=C("div"),dt=C("h3"),oi=G("Showing "),gn=G(Xt),li=G(" images"),ai=Y(),Ge(_t.$$.fragment),k(o,"class","svelte-11qe1zw"),k(O,"class","sources svelte-11qe1zw"),k(s,"class","summary svelte-11qe1zw"),k(B,"placeholder","Filter by Name or Description"),k(B,"name","textFilter"),k(B,"class","svelte-11qe1zw"),we(c,"white-space","nowrap"),M.__value="",Ve(M,M.__value),P.__value="2",Ve(P,P.__value),F.__value="3",Ve(F,F.__value),ae.__value="4",Ve(ae,ae.__value),le.__value="5",Ve(le,le.__value),k(z,"class","svelte-11qe1zw"),t[12]===void 0&&et(()=>t[22].call(z)),k(I,"title","Clear Filter"),we(I,"visibility",t[12]!==""?"visible":"hidden"),k(I,"class","svelte-11qe1zw"),k(X,"class","svelte-11qe1zw"),k(S,"class","selectWrapper svelte-11qe1zw"),D.__value="",Ve(D,D.__value),k(H,"class","svelte-11qe1zw"),t[10]===void 0&&et(()=>t[23].call(H)),k(te,"title","Clear Filter"),we(te,"visibility",t[10]!==""?"visible":"hidden"),k(te,"class","svelte-11qe1zw"),k(_e,"class","svelte-11qe1zw"),k(x,"class","selectWrapper svelte-11qe1zw"),Te.__value="",Ve(Te,Te.__value),k(ce,"class","svelte-11qe1zw"),t[9]===void 0&&et(()=>t[24].call(ce)),k(Re,"title","Clear Filter"),we(Re,"visibility",t[9]!==""?"visible":"hidden"),k(Re,"class","svelte-11qe1zw"),k(Ue,"class","svelte-11qe1zw"),k(be,"class","selectWrapper svelte-11qe1zw"),k(Je,"class","clear svelte-11qe1zw"),k(A,"class","filters svelte-11qe1zw"),k(j,"class","sidebar svelte-11qe1zw"),we(dt,"margin-left","15px"),k(dt,"class","svelte-11qe1zw"),k(wt,"class","results svelte-11qe1zw"),k(V,"class","sidebarContainer svelte-11qe1zw"),k(r,"class","svelte-11qe1zw"),k(e,"class","app svelte-11qe1zw"),we(e,"--form-select-bg-img","url('"+ko+"')")},m(w,N){ke(w,e,N),He(n,e,null),_(e,i),_(e,r),_(r,s),_(s,o),_(o,l),_(o,u),_(o,f),_(o,g),_(o,v),_(o,p),_(s,E),_(s,O);for(let ge=0;ge<de.length;ge+=1)de[ge]&&de[ge].m(O,null);_(O,U),je&&je.m(O,null),_(r,K),_(r,V),_(V,j),_(j,B),_(j,Z),_(j,A),_(A,c),_(A,a),qe&&qe.m(A,null),_(A,T),_(A,S),_(S,z),_(z,M),_(M,R),_(z,y),_(z,P),_(z,F),_(z,ae),_(z,le),it(z,t[12],!0),_(S,L),_(S,X),_(X,I),_(I,W),_(A,$),_(A,x),_(x,H),_(H,D),_(D,ee),_(H,he);for(let ge=0;ge<Me.length;ge+=1)Me[ge]&&Me[ge].m(H,null);it(H,t[10],!0),_(x,ie),_(x,_e),_(_e,te),_(te,re),_(A,Pe),_(A,be),_(be,ce),_(ce,Te),_(Te,oe),_(ce,fe);for(let ge=0;ge<Ee.length;ge+=1)Ee[ge]&&Ee[ge].m(ce,null);it(ce,t[9],!0),_(be,Xe),_(be,Ue),_(Ue,Re),_(Re,Ye),_(A,Qe),_(A,Je),_(j,Le),_(j,ve),_(ve,Fe),He(Ze,ve,null),_(ve,vt),He(at,ve,null),_(ve,ti),He(ut,ve,null),_(ve,ni),He(ct,ve,null),_(ve,ii),He(ft,ve,null),_(ve,ri),He(ht,ve,null),_(V,si),_(V,wt),_(wt,dt),_(dt,oi),_(dt,gn),_(dt,li),_(wt,ai),He(_t,wt,null),Be=!0,mn||(ui=[Se(B,"input",t[20]),Se(z,"change",t[22]),Se(z,"change",t[16]),Se(I,"click",t[16]),Se(H,"change",t[23]),Se(H,"change",t[18]),Se(te,"click",t[18]),Se(ce,"change",t[24]),Se(ce,"change",t[19]),Se(Re,"click",t[19])],mn=!0)},p(w,N){if((!Be||N[0]&4)&&Ie(l,w[2]),(!Be||N[0]&8)&&h!==(h=cn(w[3])+"")&&Ie(f,h),(!Be||N[0]&2)&&d!==(d=w[1].length+"")&&Ie(v,d),N[0]&32770){gt=xe(w[1]);let se;for(se=0;se<gt.length;se+=1){const Lt=xi(w,gt,se);de[se]?(de[se].p(Lt,N),ue(de[se],1)):(de[se]=Yi(Lt),de[se].c(),ue(de[se],1),de[se].m(O,U))}for(Vn(),se=gt.length;se<de.length;se+=1)Er(se);Wn()}if(w[13]!==""?je?je.p(w,N):(je=Qi(w),je.c(),je.m(O,null)):je&&(je.d(1),je=null),N[0]&8192&&(m=w[13]!==""&&Ne.getCsvSourceList(w[13]).length>0),m?qe?qe.p(w,N):(qe=Zi(w),qe.c(),qe.m(A,T)):qe&&(qe.d(1),qe=null),(!Be||N[0]&4096)&&b!==(b=w[12]!==""?"All Dimensions":"Dimension Count")&&Ie(R,b),N[0]&4096&&it(z,w[12]),(!Be||N[0]&4096)&&we(I,"visibility",w[12]!==""?"visible":"hidden"),(!Be||N[0]&1024)&&q!==(q=w[10]==""?"Organism":"All Organisms")&&Ie(ee,q),N[0]&16){kt=xe(Object.keys(w[4]).sort());let se;for(se=0;se<kt.length;se+=1){const Lt=Ji(w,kt,se);Me[se]?Me[se].p(Lt,N):(Me[se]=$i(Lt),Me[se].c(),Me[se].m(H,null))}for(;se<Me.length;se+=1)Me[se].d(1);Me.length=kt.length}N[0]&1040&&it(H,w[10]),(!Be||N[0]&1024)&&we(te,"visibility",w[10]!==""?"visible":"hidden"),(!Be||N[0]&512)&&Ce!==(Ce=w[9]==""?"Imaging Modality":"All Modalities")&&Ie(oe,Ce),N[0]&32&&($t=xe(Object.keys(w[5]).sort()),Ee=ar(Ee,N,ci,1,w,$t,ne,ce,Pr,er,null,Ki)),N[0]&544&&it(ce,w[9]),(!Be||N[0]&512)&&we(Re,"visibility",w[9]!==""?"visible":"hidden");const ge={};N[0]&64&&(ge.sortedBy=w[6]),N[0]&128&&(ge.sortAscending=w[7]),Ze.$set(ge);const pn={};N[0]&64&&(pn.sortedBy=w[6]),N[0]&128&&(pn.sortAscending=w[7]),at.$set(pn);const yn={};N[0]&64&&(yn.sortedBy=w[6]),N[0]&128&&(yn.sortAscending=w[7]),ut.$set(yn);const bn={};N[0]&64&&(bn.sortedBy=w[6]),N[0]&128&&(bn.sortAscending=w[7]),ct.$set(bn);const vn={};N[0]&64&&(vn.sortedBy=w[6]),N[0]&128&&(vn.sortAscending=w[7]),ft.$set(vn);const wn={};N[0]&64&&(wn.sortedBy=w[6]),N[0]&128&&(wn.sortAscending=w[7]),ht.$set(wn),(!Be||N[0]&1)&&Xt!==(Xt=w[0].length+"")&&Ie(gn,Xt);const kn={};N[0]&1&&(kn.tableRows=w[0]),N[0]&256&&(kn.textFilter=w[8]),_t.$set(kn)},i(w){if(!Be){ue(n.$$.fragment,w);for(let N=0;N<gt.length;N+=1)ue(de[N]);ue(Ze.$$.fragment,w),ue(at.$$.fragment,w),ue(ut.$$.fragment,w),ue(ct.$$.fragment,w),ue(ft.$$.fragment,w),ue(ht.$$.fragment,w),ue(_t.$$.fragment,w),Be=!0}},o(w){pe(n.$$.fragment,w),de=de.filter(Boolean);for(let N=0;N<de.length;N+=1)pe(de[N]);pe(Ze.$$.fragment,w),pe(at.$$.fragment,w),pe(ut.$$.fragment,w),pe(ct.$$.fragment,w),pe(ft.$$.fragment,w),pe(ht.$$.fragment,w),pe(_t.$$.fragment,w),Be=!1},d(w){w&&ye(e),Ke(n),an(de,w),je&&je.d(),qe&&qe.d(),an(Me,w);for(let N=0;N<Ee.length;N+=1)Ee[N].d();Ke(Ze),Ke(at),Ke(ut),Ke(ct),Ke(ft),Ke(ht),Ke(_t),mn=!1,tt(ui)}}}function tr(t){return t.split("/").pop().replace(".csv","").replace("_samples","")}function Ro(t,e,n){let i,r,s,o,l,u,f=new URLSearchParams(window.location.search).get("csv");try{new URL(f)}catch{f=Gr}let g=[],d=[],v=0,p=0,E={},O={};Ne.subscribe(b=>{n(0,g=j(b)),n(1,d=Ne.getCsvSourceList()),n(2,v=b.length),n(3,p=b.reduce((R,y)=>R+parseInt(y.written)||0,0))}),mr.subscribe(b=>{let R={};for(const[y,P]of Object.entries(b))R[P]=y;n(4,E=R)}),pr.subscribe(b=>{let R={};for(const[y,P]of Object.entries(b))R[P]=y;n(5,O=R)}),f&&fr(f,Ne);let U="",K=!0;function V(b){U===b?n(7,K=!K):n(7,K=!1),n(6,U=b),Ne.sortTable(b,K)}function j(b){if(i!==""&&(b=b.filter(R=>R.dim_count==i)),s!=="")b=b.filter(R=>R.csv==s);else if(r!==""){let R=Ne.getCsvSourceList(r),y=[r,...R.map(P=>P.source)];b=b.filter(P=>y.includes(P.source))}return o!==""&&(b=b.filter(R=>R.organismId==o)),l!=""&&(b=b.filter(R=>R.fbbiId==l)),u!=""&&(b=b.filter(R=>{var y,P;return((y=R.description)==null?void 0:y.includes(u))||((P=R.name)==null?void 0:P.includes(u))})),b}function B(b){n(13,r=b.target.value||""),n(11,s=""),console.log("filterSource",r,s),n(0,g=j(Ne.getRows()))}function Z(b){n(12,i=b.target.value||""),n(0,g=j(Ne.getRows()))}function A(b){n(11,s=b.target.value||""),n(0,g=j(Ne.getRows()))}function c(b){n(10,o=b.target.value||""),n(0,g=j(Ne.getRows()))}function a(b){n(9,l=b.target.value||""),n(0,g=j(Ne.getRows()))}function m(b){n(8,u=b.target.value),n(0,g=j(Ne.getRows()))}function T(){s=tn(this),n(11,s),n(13,r)}function S(){i=tn(this),n(12,i)}function z(){o=tn(this),n(10,o),n(4,E)}function M(){l=tn(this),n(9,l),n(5,O)}return t.$$.update=()=>{t.$$.dirty[0]&1&&g.some(b=>b.source)},n(12,i=""),n(13,r=""),n(11,s=""),n(10,o=""),n(9,l=""),n(8,u=""),[g,d,v,p,E,O,U,K,u,l,o,s,i,r,V,B,Z,A,c,a,m,T,S,z,M]}class Oo extends lt{constructor(e){super(),ot(this,e,Ro,To,nt,{},null,[-1,-1])}}new Oo({target:document.getElementById("app")});
