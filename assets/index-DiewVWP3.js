const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-E49GQuAK.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/gzip-CF-9a_hd.js","assets/browser-B-ZyVB-j.js","assets/lz4-BIGKWw27.js","assets/zlib-CBiqHlio.js","assets/zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var ri=Object.defineProperty;var Wn=t=>{throw TypeError(t)};var ii=(t,e,n)=>e in t?ri(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>ii(t,typeof e!="symbol"?e+"":e,n),cn=(t,e,n)=>e.has(t)||Wn("Cannot "+n);var q=(t,e,n)=>(cn(t,e,"read from private field"),n?n.call(t):e.get(t)),ve=(t,e,n)=>e.has(t)?Wn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ge=(t,e,n,r)=>(cn(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),fn=(t,e,n)=>(cn(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ee(){}function si(t,e){for(const n in e)t[n]=e[n];return t}function Pr(t){return t()}function qn(){return Object.create(null)}function nt(t){t.forEach(Pr)}function In(t){return typeof t=="function"}function $e(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ht;function Kn(t,e){return t===e?!0:(Ht||(Ht=document.createElement("a")),Ht.href=e,t===Ht.href)}function oi(t){return Object.keys(t).length===0}function li(t,...e){if(t==null){for(const r of e)r(void 0);return Ee}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function qt(t){let e;return li(t,n=>e=n)(),e}function _n(t,e,n,r){if(t){const i=Ur(t,e,n,r);return t[0](i)}}function Ur(t,e,n,r){return t[1]&&r?si(n.ctx.slice(),t[1](r(e))):n.ctx}function gn(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(e.dirty.length,i.length);for(let l=0;l<o;l+=1)s[l]=e.dirty[l]|i[l];return s}return e.dirty|i}return e.dirty}function mn(t,e,n,r,i,s){if(i){const o=Ur(e,n,r,s);t.p(o,i)}}function pn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function m(t,e){t.appendChild(e)}function be(t,e,n){t.insertBefore(e,n||null)}function ye(t){t.parentNode&&t.parentNode.removeChild(t)}function Yt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function L(t){return document.createElement(t)}function J(t){return document.createTextNode(t)}function X(){return J(" ")}function Br(){return J("")}function Ze(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function C(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ai(t){return Array.from(t.childNodes)}function we(t,e){e=""+e,t.data!==e&&(t.data=e)}function Pe(t,e){t.value=e??""}function Qe(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function mt(t,e,n){t.classList.toggle(e,!!n)}function ui(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}let It;function St(t){It=t}function Cn(){if(!It)throw new Error("Function called outside component initialization");return It}function Tn(t){Cn().$$.on_mount.push(t)}function ci(t){Cn().$$.on_destroy.push(t)}function fi(){const t=Cn();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=ui(e,n,{cancelable:r});return i.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const gt=[],Qt=[];let pt=[];const Jn=[],hi=Promise.resolve();let yn=!1;function di(){yn||(yn=!0,hi.then(Le))}function Ct(t){pt.push(t)}const hn=new Set;let ht=0;function Le(){if(ht!==0)return;const t=It;do{try{for(;ht<gt.length;){const e=gt[ht];ht++,St(e),_i(e.$$)}}catch(e){throw gt.length=0,ht=0,e}for(St(null),gt.length=0,ht=0;Qt.length;)Qt.pop()();for(let e=0;e<pt.length;e+=1){const n=pt[e];hn.has(n)||(hn.add(n),n())}pt.length=0}while(gt.length);for(;Jn.length;)Jn.pop()();yn=!1,hn.clear(),St(t)}function _i(t){if(t.fragment!==null){t.update(),nt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ct)}}function gi(t){const e=[],n=[];pt.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),pt=e}const Kt=new Set;let lt;function Rn(){lt={r:0,c:[],p:lt}}function zn(){lt.r||nt(lt.c),lt=lt.p}function ce(t,e){t&&t.i&&(Kt.delete(t),t.i(e))}function me(t,e,n,r){if(t&&t.o){if(Kt.has(t))return;Kt.add(t),lt.c.push(()=>{Kt.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Je(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function mi(t,e){t.d(1),e.delete(t.key)}function pi(t,e){me(t,1,1,()=>{e.delete(t.key)})}function xr(t,e,n,r,i,s,o,l,c,f,h,p){let g=t.length,w=s.length,v=g;const E={};for(;v--;)E[t[v].key]=v;const z=[],D=new Map,W=new Map,x=[];for(v=w;v--;){const A=p(i,s,v),u=n(A);let a=o.get(u);a?x.push(()=>a.p(A,e)):(a=f(u,A),a.c()),D.set(u,z[v]=a),u in E&&W.set(u,Math.abs(v-E[u]))}const U=new Set,j=new Set;function $(A){ce(A,1),A.m(l,h),o.set(A.key,A),h=A.first,w--}for(;g&&w;){const A=z[w-1],u=t[g-1],a=A.key,d=u.key;A===u?(h=A.first,g--,w--):D.has(d)?!o.has(a)||U.has(a)?$(A):j.has(d)?g--:W.get(a)>W.get(d)?(j.add(a),$(A)):(U.add(d),g--):(c(u,o),g--)}for(;g--;){const A=t[g];D.has(A.key)||c(A,o)}for(;w;)$(z[w-1]);return nt(x),z}function Ke(t){t&&t.c()}function He(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),Ct(()=>{const s=t.$$.on_mount.map(Pr).filter(In);t.$$.on_destroy?t.$$.on_destroy.push(...s):nt(s),t.$$.on_mount=[]}),i.forEach(Ct)}function We(t,e){const n=t.$$;n.fragment!==null&&(gi(n.after_update),nt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yi(t,e){t.$$.dirty[0]===-1&&(gt.push(t),di(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function rt(t,e,n,r,i,s,o=null,l=[-1]){const c=It;St(t);const f=t.$$={fragment:null,ctx:[],props:s,update:Ee,not_equal:i,bound:qn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:qn(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};o&&o(f.root);let h=!1;if(f.ctx=n?n(t,e.props||{},(p,g,...w)=>{const v=w.length?w[0]:g;return f.ctx&&i(f.ctx[p],f.ctx[p]=v)&&(!f.skip_bound&&f.bound[p]&&f.bound[p](v),h&&yi(t,p)),g}):[],f.update(),h=!0,nt(f.before_update),f.fragment=r?r(f.ctx):!1,e.target){if(e.hydrate){const p=ai(e.target);f.fragment&&f.fragment.l(p),p.forEach(ye)}else f.fragment&&f.fragment.c();e.intro&&ce(t.$$.fragment),He(t,e.target,e.anchor),Le()}St(c)}class it{constructor(){Z(this,"$$");Z(this,"$$set")}$destroy(){We(this,1),this.$destroy=Ee}$on(e,n){if(!In(n))return Ee;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!oi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const bi="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bi);const dt=[];function Vr(t,e=Ee){let n;const r=new Set;function i(l){if($e(t,l)&&(t=l,n)){const c=!dt.length;for(const f of r)f[1](),dt.push(f,t);if(c){for(let f=0;f<dt.length;f+=2)dt[f][0](dt[f+1]);dt.length=0}}}function s(l){i(l(t))}function o(l,c=Ee){const f=[l,c];return r.add(f),r.size===1&&(n=e(i,s)||Ee),l(t),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}var vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hr={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,r){t.exports=r()})(vi,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,o={},l=0,c={parse:function(u,a){var d=(a=a||{}).dynamicTyping||!1;if(A(d)&&(a.dynamicTypingFunction=d,d={}),a.dynamicTyping=d,a.transform=!!A(a.transform)&&a.transform,a.worker&&c.WORKERS_SUPPORTED){var _=function(){if(!c.WORKERS_SUPPORTED)return!1;var S=(R=r.URL||r.webkitURL||null,N=n.toString(),c.BLOB_URL||(c.BLOB_URL=R.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",N,")();"],{type:"text/javascript"})))),T=new r.Worker(S),R,N;return T.onmessage=W,T.id=l++,o[T.id]=T}();return _.userStep=a.step,_.userChunk=a.chunk,_.userComplete=a.complete,_.userError=a.error,a.step=A(a.step),a.chunk=A(a.chunk),a.complete=A(a.complete),a.error=A(a.error),delete a.worker,void _.postMessage({input:u,config:a,workerId:_.id})}var y=null;return c.NODE_STREAM_INPUT,typeof u=="string"?(u=function(S){return S.charCodeAt(0)===65279?S.slice(1):S}(u),y=a.download?new p(a):new w(a)):u.readable===!0&&A(u.read)&&A(u.on)?y=new v(a):(r.File&&u instanceof File||u instanceof Object)&&(y=new g(a)),y.stream(u)},unparse:function(u,a){var d=!1,_=!0,y=",",S=`\r
`,T='"',R=T+T,N=!1,b=null,H=!1;(function(){if(typeof a=="object"){if(typeof a.delimiter!="string"||c.BAD_DELIMITERS.filter(function(O){return a.delimiter.indexOf(O)!==-1}).length||(y=a.delimiter),(typeof a.quotes=="boolean"||typeof a.quotes=="function"||Array.isArray(a.quotes))&&(d=a.quotes),typeof a.skipEmptyLines!="boolean"&&typeof a.skipEmptyLines!="string"||(N=a.skipEmptyLines),typeof a.newline=="string"&&(S=a.newline),typeof a.quoteChar=="string"&&(T=a.quoteChar),typeof a.header=="boolean"&&(_=a.header),Array.isArray(a.columns)){if(a.columns.length===0)throw new Error("Option columns is empty");b=a.columns}a.escapeChar!==void 0&&(R=a.escapeChar+T),(typeof a.escapeFormulae=="boolean"||a.escapeFormulae instanceof RegExp)&&(H=a.escapeFormulae instanceof RegExp?a.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var F=new RegExp(z(T),"g");if(typeof u=="string"&&(u=JSON.parse(u)),Array.isArray(u)){if(!u.length||Array.isArray(u[0]))return le(null,u,N);if(typeof u[0]=="object")return le(b||Object.keys(u[0]),u,N)}else if(typeof u=="object")return typeof u.data=="string"&&(u.data=JSON.parse(u.data)),Array.isArray(u.data)&&(u.fields||(u.fields=u.meta&&u.meta.fields||b),u.fields||(u.fields=Array.isArray(u.data[0])?u.fields:typeof u.data[0]=="object"?Object.keys(u.data[0]):[]),Array.isArray(u.data[0])||typeof u.data[0]=="object"||(u.data=[u.data])),le(u.fields||[],u.data||[],N);throw new Error("Unable to serialize unrecognized input");function le(O,ne,I){var P="";typeof O=="string"&&(O=JSON.parse(O)),typeof ne=="string"&&(ne=JSON.parse(ne));var K=Array.isArray(O)&&0<O.length,G=!Array.isArray(ne[0]);if(K&&_){for(var Y=0;Y<O.length;Y++)0<Y&&(P+=y),P+=ae(O[Y],Y);0<ne.length&&(P+=S)}for(var M=0;M<ne.length;M++){var V=K?O.length:ne[M].length,ie=!1,fe=K?Object.keys(ne[M]).length===0:ne[M].length===0;if(I&&!K&&(ie=I==="greedy"?ne[M].join("").trim()==="":ne[M].length===1&&ne[M][0].length===0),I==="greedy"&&K){for(var se=[],ee=0;ee<V;ee++){var ue=G?O[ee]:ee;se.push(ne[M][ue])}ie=se.join("").trim()===""}if(!ie){for(var Q=0;Q<V;Q++){0<Q&&!fe&&(P+=y);var Me=K&&G?O[Q]:Q;P+=ae(ne[M][Me],Q)}M<ne.length-1&&(!I||0<V&&!fe)&&(P+=S)}}return P}function ae(O,ne){if(O==null)return"";if(O.constructor===Date)return JSON.stringify(O).slice(1,25);var I=!1;H&&typeof O=="string"&&H.test(O)&&(O="'"+O,I=!0);var P=O.toString().replace(F,R);return(I=I||d===!0||typeof d=="function"&&d(O,ne)||Array.isArray(d)&&d[ne]||function(K,G){for(var Y=0;Y<G.length;Y++)if(-1<K.indexOf(G[Y]))return!0;return!1}(P,c.BAD_DELIMITERS)||-1<P.indexOf(y)||P.charAt(0)===" "||P.charAt(P.length-1)===" ")?T+P+T:P}}};if(c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!r.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=D,c.ParserHandle=E,c.NetworkStreamer=p,c.FileStreamer=g,c.StringStreamer=w,c.ReadableStreamStreamer=v,r.jQuery){var f=r.jQuery;f.fn.parse=function(u){var a=u.config||{},d=[];return this.each(function(S){if(!(f(this).prop("tagName").toUpperCase()==="INPUT"&&f(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var T=0;T<this.files.length;T++)d.push({file:this.files[T],inputElem:this,instanceConfig:f.extend({},a)})}),_(),this;function _(){if(d.length!==0){var S,T,R,N,b=d[0];if(A(u.before)){var H=u.before(b.file,b.inputElem);if(typeof H=="object"){if(H.action==="abort")return S="AbortError",T=b.file,R=b.inputElem,N=H.reason,void(A(u.error)&&u.error({name:S},T,R,N));if(H.action==="skip")return void y();typeof H.config=="object"&&(b.instanceConfig=f.extend(b.instanceConfig,H.config))}else if(H==="skip")return void y()}var F=b.instanceConfig.complete;b.instanceConfig.complete=function(le){A(F)&&F(le,b.file,b.inputElem),y()},c.parse(b.file,b.instanceConfig)}else A(u.complete)&&u.complete()}function y(){d.splice(0,1),_()}}}function h(u){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(a){var d=j(a);d.chunkSize=parseInt(d.chunkSize),a.step||a.chunk||(d.chunkSize=null),this._handle=new E(d),(this._handle.streamer=this)._config=d}).call(this,u),this.parseChunk=function(a,d){if(this.isFirstChunk&&A(this._config.beforeFirstChunk)){var _=this._config.beforeFirstChunk(a);_!==void 0&&(a=_)}this.isFirstChunk=!1,this._halted=!1;var y=this._partialLine+a;this._partialLine="";var S=this._handle.parse(y,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var T=S.meta.cursor;this._finished||(this._partialLine=y.substring(T-this._baseIndex),this._baseIndex=T),S&&S.data&&(this._rowCount+=S.data.length);var R=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)r.postMessage({results:S,workerId:c.WORKER_ID,finished:R});else if(A(this._config.chunk)&&!d){if(this._config.chunk(S,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);S=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(S.data),this._completeResults.errors=this._completeResults.errors.concat(S.errors),this._completeResults.meta=S.meta),this._completed||!R||!A(this._config.complete)||S&&S.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||S&&S.meta.paused||this._nextChunk(),S}this._halted=!0},this._sendError=function(a){A(this._config.error)?this._config.error(a):s&&this._config.error&&r.postMessage({workerId:c.WORKER_ID,error:a,finished:!1})}}function p(u){var a;(u=u||{}).chunkSize||(u.chunkSize=c.RemoteChunkSize),h.call(this,u),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(d){this._input=d,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(a=new XMLHttpRequest,this._config.withCredentials&&(a.withCredentials=this._config.withCredentials),i||(a.onload=$(this._chunkLoaded,this),a.onerror=$(this._chunkError,this)),a.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var d=this._config.downloadRequestHeaders;for(var _ in d)a.setRequestHeader(_,d[_])}if(this._config.chunkSize){var y=this._start+this._config.chunkSize-1;a.setRequestHeader("Range","bytes="+this._start+"-"+y)}try{a.send(this._config.downloadRequestBody)}catch(S){this._chunkError(S.message)}i&&a.status===0&&this._chunkError()}},this._chunkLoaded=function(){a.readyState===4&&(a.status<200||400<=a.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:a.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(d){var _=d.getResponseHeader("Content-Range");return _===null?-1:parseInt(_.substring(_.lastIndexOf("/")+1))}(a),this.parseChunk(a.responseText)))},this._chunkError=function(d){var _=a.statusText||d;this._sendError(new Error(_))}}function g(u){var a,d;(u=u||{}).chunkSize||(u.chunkSize=c.LocalChunkSize),h.call(this,u);var _=typeof FileReader<"u";this.stream=function(y){this._input=y,d=y.slice||y.webkitSlice||y.mozSlice,_?((a=new FileReader).onload=$(this._chunkLoaded,this),a.onerror=$(this._chunkError,this)):a=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var y=this._input;if(this._config.chunkSize){var S=Math.min(this._start+this._config.chunkSize,this._input.size);y=d.call(y,this._start,S)}var T=a.readAsText(y,this._config.encoding);_||this._chunkLoaded({target:{result:T}})},this._chunkLoaded=function(y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(y.target.result)},this._chunkError=function(){this._sendError(a.error)}}function w(u){var a;h.call(this,u=u||{}),this.stream=function(d){return a=d,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var d,_=this._config.chunkSize;return _?(d=a.substring(0,_),a=a.substring(_)):(d=a,a=""),this._finished=!a,this.parseChunk(d)}}}function v(u){h.call(this,u=u||{});var a=[],d=!0,_=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(y){this._input=y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){_&&a.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),a.length?this.parseChunk(a.shift()):d=!0},this._streamData=$(function(y){try{a.push(typeof y=="string"?y:y.toString(this._config.encoding)),d&&(d=!1,this._checkIsFinished(),this.parseChunk(a.shift()))}catch(S){this._streamError(S)}},this),this._streamError=$(function(y){this._streamCleanUp(),this._sendError(y)},this),this._streamEnd=$(function(){this._streamCleanUp(),_=!0,this._streamData("")},this),this._streamCleanUp=$(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function E(u){var a,d,_,y=Math.pow(2,53),S=-y,T=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,R=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,N=this,b=0,H=0,F=!1,le=!1,ae=[],O={data:[],errors:[],meta:{}};if(A(u.step)){var ne=u.step;u.step=function(M){if(O=M,K())P();else{if(P(),O.data.length===0)return;b+=M.data.length,u.preview&&b>u.preview?d.abort():(O.data=O.data[0],ne(O,N))}}}function I(M){return u.skipEmptyLines==="greedy"?M.join("").trim()==="":M.length===1&&M[0].length===0}function P(){return O&&_&&(Y("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),_=!1),u.skipEmptyLines&&(O.data=O.data.filter(function(M){return!I(M)})),K()&&function(){if(!O)return;function M(ie,fe){A(u.transformHeader)&&(ie=u.transformHeader(ie,fe)),ae.push(ie)}if(Array.isArray(O.data[0])){for(var V=0;K()&&V<O.data.length;V++)O.data[V].forEach(M);O.data.splice(0,1)}else O.data.forEach(M)}(),function(){if(!O||!u.header&&!u.dynamicTyping&&!u.transform)return O;function M(ie,fe){var se,ee=u.header?{}:[];for(se=0;se<ie.length;se++){var ue=se,Q=ie[se];u.header&&(ue=se>=ae.length?"__parsed_extra":ae[se]),u.transform&&(Q=u.transform(Q,ue)),Q=G(ue,Q),ue==="__parsed_extra"?(ee[ue]=ee[ue]||[],ee[ue].push(Q)):ee[ue]=Q}return u.header&&(se>ae.length?Y("FieldMismatch","TooManyFields","Too many fields: expected "+ae.length+" fields but parsed "+se,H+fe):se<ae.length&&Y("FieldMismatch","TooFewFields","Too few fields: expected "+ae.length+" fields but parsed "+se,H+fe)),ee}var V=1;return!O.data.length||Array.isArray(O.data[0])?(O.data=O.data.map(M),V=O.data.length):O.data=M(O.data,0),u.header&&O.meta&&(O.meta.fields=ae),H+=V,O}()}function K(){return u.header&&ae.length===0}function G(M,V){return ie=M,u.dynamicTypingFunction&&u.dynamicTyping[ie]===void 0&&(u.dynamicTyping[ie]=u.dynamicTypingFunction(ie)),(u.dynamicTyping[ie]||u.dynamicTyping)===!0?V==="true"||V==="TRUE"||V!=="false"&&V!=="FALSE"&&(function(fe){if(T.test(fe)){var se=parseFloat(fe);if(S<se&&se<y)return!0}return!1}(V)?parseFloat(V):R.test(V)?new Date(V):V===""?null:V):V;var ie}function Y(M,V,ie,fe){var se={type:M,code:V,message:ie};fe!==void 0&&(se.row=fe),O.errors.push(se)}this.parse=function(M,V,ie){var fe=u.quoteChar||'"';if(u.newline||(u.newline=function(ue,Q){ue=ue.substring(0,1048576);var Me=new RegExp(z(Q)+"([^]*?)"+z(Q),"gm"),pe=(ue=ue.replace(Me,"")).split("\r"),Ue=ue.split(`
`),ke=1<Ue.length&&Ue[0].length<pe[0].length;if(pe.length===1||ke)return`
`;for(var Ce=0,te=0;te<pe.length;te++)pe[te][0]===`
`&&Ce++;return Ce>=pe.length/2?`\r
`:"\r"}(M,fe)),_=!1,u.delimiter)A(u.delimiter)&&(u.delimiter=u.delimiter(M),O.meta.delimiter=u.delimiter);else{var se=function(ue,Q,Me,pe,Ue){var ke,Ce,te,he;Ue=Ue||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Te=0;Te<Ue.length;Te++){var re=Ue[Te],Fe=0,qe=0,De=0;te=void 0;for(var Ae=new D({comments:pe,delimiter:re,newline:Q,preview:10}).parse(ue),Ge=0;Ge<Ae.data.length;Ge++)if(Me&&I(Ae.data[Ge]))De++;else{var Be=Ae.data[Ge].length;qe+=Be,te!==void 0?0<Be&&(Fe+=Math.abs(Be-te),te=Be):te=Be}0<Ae.data.length&&(qe/=Ae.data.length-De),(Ce===void 0||Fe<=Ce)&&(he===void 0||he<qe)&&1.99<qe&&(Ce=Fe,ke=re,he=qe)}return{successful:!!(u.delimiter=ke),bestDelimiter:ke}}(M,u.newline,u.skipEmptyLines,u.comments,u.delimitersToGuess);se.successful?u.delimiter=se.bestDelimiter:(_=!0,u.delimiter=c.DefaultDelimiter),O.meta.delimiter=u.delimiter}var ee=j(u);return u.preview&&u.header&&ee.preview++,a=M,d=new D(ee),O=d.parse(a,V,ie),P(),F?{meta:{paused:!0}}:O||{meta:{paused:!1}}},this.paused=function(){return F},this.pause=function(){F=!0,d.abort(),a=A(u.chunk)?"":a.substring(d.getCharIndex())},this.resume=function(){N.streamer._halted?(F=!1,N.streamer.parseChunk(a,!0)):setTimeout(N.resume,3)},this.aborted=function(){return le},this.abort=function(){le=!0,d.abort(),O.meta.aborted=!0,A(u.complete)&&u.complete(O),a=""}}function z(u){return u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function D(u){var a,d=(u=u||{}).delimiter,_=u.newline,y=u.comments,S=u.step,T=u.preview,R=u.fastMode,N=a=u.quoteChar===void 0||u.quoteChar===null?'"':u.quoteChar;if(u.escapeChar!==void 0&&(N=u.escapeChar),(typeof d!="string"||-1<c.BAD_DELIMITERS.indexOf(d))&&(d=","),y===d)throw new Error("Comment character same as delimiter");y===!0?y="#":(typeof y!="string"||-1<c.BAD_DELIMITERS.indexOf(y))&&(y=!1),_!==`
`&&_!=="\r"&&_!==`\r
`&&(_=`
`);var b=0,H=!1;this.parse=function(F,le,ae){if(typeof F!="string")throw new Error("Input must be a string");var O=F.length,ne=d.length,I=_.length,P=y.length,K=A(S),G=[],Y=[],M=[],V=b=0;if(!F)return Se();if(u.header&&!le){var ie=F.split(_)[0].split(d),fe=[],se={},ee=!1;for(var ue in ie){var Q=ie[ue];A(u.transformHeader)&&(Q=u.transformHeader(Q,ue));var Me=Q,pe=se[Q]||0;for(0<pe&&(ee=!0,Me=Q+"_"+pe),se[Q]=pe+1;fe.includes(Me);)Me=Me+"_"+pe;fe.push(Me)}if(ee){var Ue=F.split(_);Ue[0]=fe.join(d),F=Ue.join(_)}}if(R||R!==!1&&F.indexOf(a)===-1){for(var ke=F.split(_),Ce=0;Ce<ke.length;Ce++){if(M=ke[Ce],b+=M.length,Ce!==ke.length-1)b+=_.length;else if(ae)return Se();if(!y||M.substring(0,P)!==y){if(K){if(G=[],De(M.split(d)),st(),H)return Se()}else De(M.split(d));if(T&&T<=Ce)return G=G.slice(0,T),Se(!0)}}return Se()}for(var te=F.indexOf(d,b),he=F.indexOf(_,b),Te=new RegExp(z(N)+z(a),"g"),re=F.indexOf(a,b);;)if(F[b]!==a)if(y&&M.length===0&&F.substring(b,b+P)===y){if(he===-1)return Se();b=he+I,he=F.indexOf(_,b),te=F.indexOf(d,b)}else if(te!==-1&&(te<he||he===-1))M.push(F.substring(b,te)),b=te+ne,te=F.indexOf(d,b);else{if(he===-1)break;if(M.push(F.substring(b,he)),Be(he+I),K&&(st(),H))return Se();if(T&&G.length>=T)return Se(!0)}else for(re=b,b++;;){if((re=F.indexOf(a,re+1))===-1)return ae||Y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:G.length,index:b}),Ge();if(re===O-1)return Ge(F.substring(b,re).replace(Te,a));if(a!==N||F[re+1]!==N){if(a===N||re===0||F[re-1]!==N){te!==-1&&te<re+1&&(te=F.indexOf(d,re+1)),he!==-1&&he<re+1&&(he=F.indexOf(_,re+1));var Fe=Ae(he===-1?te:Math.min(te,he));if(F.substr(re+1+Fe,ne)===d){M.push(F.substring(b,re).replace(Te,a)),F[b=re+1+Fe+ne]!==a&&(re=F.indexOf(a,b)),te=F.indexOf(d,b),he=F.indexOf(_,b);break}var qe=Ae(he);if(F.substring(re+1+qe,re+1+qe+I)===_){if(M.push(F.substring(b,re).replace(Te,a)),Be(re+1+qe+I),te=F.indexOf(d,b),re=F.indexOf(a,b),K&&(st(),H))return Se();if(T&&G.length>=T)return Se(!0);break}Y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:G.length,index:b}),re++}}else re++}return Ge();function De(Re){G.push(Re),V=b}function Ae(Re){var Ye=0;if(Re!==-1){var ze=F.substring(re+1,Re);ze&&ze.trim()===""&&(Ye=ze.length)}return Ye}function Ge(Re){return ae||(Re===void 0&&(Re=F.substring(b)),M.push(Re),b=O,De(M),K&&st()),Se()}function Be(Re){b=Re,De(M),M=[],he=F.indexOf(_,b)}function Se(Re){return{data:G,errors:Y,meta:{delimiter:d,linebreak:_,aborted:H,truncated:!!Re,cursor:V+(le||0)}}}function st(){S(Se()),G=[],Y=[]}},this.abort=function(){H=!0},this.getCharIndex=function(){return b}}function W(u){var a=u.data,d=o[a.workerId],_=!1;if(a.error)d.userError(a.error,a.file);else if(a.results&&a.results.data){var y={abort:function(){_=!0,x(a.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:U,resume:U};if(A(d.userStep)){for(var S=0;S<a.results.data.length&&(d.userStep({data:a.results.data[S],errors:a.results.errors,meta:a.results.meta},y),!_);S++);delete a.results}else A(d.userChunk)&&(d.userChunk(a.results,y,a.file),delete a.results)}a.finished&&!_&&x(a.workerId,a.results)}function x(u,a){var d=o[u];A(d.userComplete)&&d.userComplete(a),d.terminate(),delete o[u]}function U(){throw new Error("Not implemented.")}function j(u){if(typeof u!="object"||u===null)return u;var a=Array.isArray(u)?[]:{};for(var d in u)a[d]=j(u[d]);return a}function $(u,a){return function(){u.apply(a,arguments)}}function A(u){return typeof u=="function"}return s&&(r.onmessage=function(u){var a=u.data;if(c.WORKER_ID===void 0&&a&&(c.WORKER_ID=a.workerId),typeof a.input=="string")r.postMessage({workerId:c.WORKER_ID,results:c.parse(a.input,a.config),finished:!0});else if(r.File&&a.input instanceof File||a.input instanceof Object){var d=c.parse(a.input,a.config);d&&r.postMessage({workerId:c.WORKER_ID,results:d,finished:!0})}}),(p.prototype=Object.create(h.prototype)).constructor=p,(g.prototype=Object.create(h.prototype)).constructor=g,(w.prototype=Object.create(w.prototype)).constructor=w,(v.prototype=Object.create(h.prototype)).constructor=v,c})})(Hr);var ki=Hr.exports;const Ei=wi(ki),Ai="https://jburel.github.io/ome2024-ngff-challenge/idr-mark.svg",Si="https://jburel.github.io/ome2024-ngff-challenge/nfdi4bioimage.png",Ii="https://raw.githubusercontent.com/will-moore/ome2024-ngff-challenge/hierarchy_browser/samples/ngff_samples.csv";let Ci={IDR:"https://idr.openmicroscopy.org",Webknossos:"https://scalableminds.com",JAX:"http://jax.org","BioImage Archive":"https://www.ebi.ac.uk",Crick:"https://www.crick.ac.uk/","University of Muenster":"https://nfdi4bioimage.de/",Göttingen:"https://nfdi4bioimage.de/",Jülich:"https://nfdi4bioimage.de/",NFDI4BIOIMAGE:"https://nfdi4bioimage.de/"};function Gn(t){if(t==="IDR")return Ai;let e=Ci[t];return e?e==="https://nfdi4bioimage.de/"?Si:`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${e}&size=24`:null}function Wr(t,e,n={}){Ei.parse(t,{header:!1,download:!0,skipEmptyLines:"greedy",complete:function(r){let i=["url"],s=r.data[0];s.length>1&&(i=s,r.data.shift());let o=r.data.map(h=>{let p={...n};for(let g=0;g<i.length;g++)p[i[g]]=h[g];return p}),l=o.filter(h=>{var p;return!((p=h.url)!=null&&p.endsWith(".csv"))}),c={};l.forEach(h=>{if(c[h.url]){console.warn("Removing duplicate URL:",h.url);return}c[h.url]=h}),l=Object.values(c);let f=o.filter(h=>{var p;return(p=h.url)==null?void 0:p.includes(".csv")});e.addCsv(t,f,l.length),e.addRows(l),f.forEach(h=>{let p=h.url;h.csv=p,Wr(p,e,h)})}})}async function qr(t){return await fetch(t).then(e=>e.json())}function Yn(t){return Math.floor(Math.random()*t)}function Zt(t){if(!t)return"";const e=2;return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(e)+" KB":t<1024*1024*1024?(t/(1024*1024)).toFixed(e)+" MB":t<1024*1024*1024*1024?(t/(1024*1024*1024)).toFixed(e)+" GB":t<1024*1024*1024*1024*1024?(t/(1024*1024*1024*1024)).toFixed(e)+" TB":(t/(1024*1024*1024*1024*1024)).toFixed(e)+" PB"}function Ti(t,e){return Array.from({length:e-t},(n,r)=>r+t)}function Ri(t,e,n){const r=t[0].shape,i=r[0],s=r[1],o=i*s;e||(e=t.map(Kr));const l=new Uint8ClampedArray(4*i*s).fill(0);let c=0;for(let f=0;f<o;f++){for(let h=0;h<t.length;h++){let p=n[h],g=t[h].data,w=e[h],E=(g[f]-w[0])/(w[1]-w[0]);for(let z=0;z<3;z++){let D=E*p[z]<<0;l[c*4+z]=Math.max(l[c*4+z],D)}}l[c*4+3]=255,c+=1}return l}function Kr(t){const e=t.data;let n=0,r=1/0,i=t.data.length;for(let s=0;s<i;s++){let o=e[s];n=Math.max(n,o),r=Math.min(r,o)}return[r,n]}const Jt=4,tt={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},zi=[tt.magenta,tt.green],Oi=[tt.red,tt.green,tt.blue],Qn=Object.values(tt).slice(0,-2);function Li(t){let e;return t<=Jt?e=Array(t).fill(!0):e=[...Array(Jt).fill(!0),...Array(t-Jt).fill(!1)],e}function Mi(t,e){let n=[];if(t==1)n=[tt.white];else if(t==2)n=zi;else if(t===3)n=Oi;else if(t<=Jt)n=Qn.slice(0,t);else{n=Array(t).fill(tt.white);const r=e.flatMap((i,s)=>i?s:[]);for(const[i,s]of r.entries())n[s]=Qn[i]}return n.map(Jr)}function Jr(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),r=parseInt(t.slice(4,6),16);return[e,n,r]}class Gr{constructor(){this.store=Vr({})}async lookupOntologyTerm(e){let n=e.replace("NCBI:txid","");return(await qr(`https://rest.ensembl.org/taxonomy/id/${n}?content-type=application/json`)).name||e}addTerms(e){let n=qt(this.store);[...new Set(e)].forEach(i=>{i&&(n[i]||(n[i]="Loading...",setTimeout(()=>{this.lookupOntologyTerm(i).then(s=>{this.addEntry(i,s)})},Math.random()*5e3)))})}addEntry(e,n){this.store.update(r=>(r[e]=n,r))}subscribe(e){return this.store.subscribe(e)}}class Fi extends Gr{constructor(){super()}async lookupOntologyTerm(e){const n=e.replace("obo:","");return(await qr(`https://www.ebi.ac.uk/ols4/api/ontologies/fbbi/terms/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252F${n}`)).label||e}}const Yr=new Gr,Qr=new Fi,Zn=5;async function Xt(t){var r;let e=await fetch(`${t}/zarr.json`).then(i=>{if(i.status===404)throw new Error(`${t}/zarr.json not found`);return i.json()}).catch(i=>[void 0,t]);const n=(r=e==null?void 0:e.attributes)==null?void 0:r.ome;if(!n)return[void 0,t];if(n.multiscales)return[n,t];if(n.plate){let i=n.plate.wells[0],s=`${t}/${i.path}/0`,[o,l]=await Xt(s);return[o,l,n.plate]}else if(n["bioformats2raw.layout"]){let i=`${t}/0`;return await Xt(i)}}class Di{constructor(e="rating",n=!1){this.store=Vr([]),this.sortColumn=e,this.sortAscending=n,this.csvFiles=[]}getCsvSourceList(e){let n;if(!e)n=this.csvFiles[0];else for(let i of this.csvFiles){if(i.source===e){n=i;break}for(let s of i.child_csv){if(s.source===e){n=s;break}for(let o of s.child_csv)if(o.source===e){n=o;break}}}return n?n.child_csv.map(i=>{let s=i.image_count||0;for(let o of i.child_csv)s+=o.image_count||0;return{...i,total_count:s}}):[]}addCsv(e,n,r){n=n.map(s=>({...s,child_csv:[]}));let i;for(let s of this.csvFiles){if(s.url===e){i=s;break}for(let o of s.child_csv){if(o.url===e){i=o;break}for(let l of o.child_csv)if(l.url===e){i=l;break}}}i?(i.image_count=r,i.child_csv=n):(i={url:e,image_count:r,child_csv:n},this.csvFiles.push(i))}addRows(e){e=e.map(i=>{if(i.written&&(i.written=parseFloat(i.written)),i.shape){let s=i.shape.split(",").map(l=>parseInt(l)),o;i.dimension_names?o=i.dimension_names.split(","):s.length==5&&(o=["t","c","z","y","x"]),o&&o.length==s.length&&o.forEach((l,c)=>i["size_"+l]=s[c]),i.dim_count=s.reduce((l,c)=>l+(c>1?1:0),0)}return i.rating=Math.random()*4,i}),e.length>1&&(e[Yn(e.length)].rating=10+Math.random()*5,e[Yn(e.length)].rating=5+Math.random()*5),console.log("Adding rows",e),this.store.update(i=>(i.push(...e),i.sort((s,o)=>this.compareRows(s,o,!0)),i));let n=e.map(i=>i.organismId);console.log("organismIds",n),Yr.addTerms(n);let r=e.map(i=>i.fbbiId);console.log("fbbiIds",r),Qr.addTerms(r)}populateRow(e,n){this.store.update(r=>(r=r.map(i=>(i.url===e&&(i={...i,...n}),i)),r))}async loadNgffMetadata(e){var g;const[n,r,i]=await Xt(e);let s=[],o=0,l=0,c=!1,f=!0,h={multiscales:n},p=r;if(i&&(o=i.wells.length,l=i.field_count||1),n){const w=(g=n[0])==null?void 0:g.datasets[0],v=w==null?void 0:w.path;if(v){const E=await fetch(`${r}/${v}/zarr.json`).then(z=>z.json()).catch(z=>{console.log(`----> Failed to parse ${r}/${v}/zarr.json`,z)});s=E==null?void 0:E.shape}}else console.log("No multiscales found"),c=!0,s=[0];this.populateRow(e,{image_attrs:h,image_url:p,shape:s,well_count:o,field_count:l,load_failed:c,loaded:f})}async loadRocrateJsonAllRows(){let e=qt(this.store);for(let n=0;n<e.length;n=n+Zn){let r=Ti(n,Math.min(n+Zn,e.length)).map(i=>this.loadRocrateJson(e[i].url));await Promise.all(r)}}compareRows(e,n,r=!1){let i=e[this.sortColumn],s=n[this.sortColumn];if(r)return i===void 0&&(i=0),s===void 0&&(s=0),i<s?this.sortAscending?-1:1:i>s?this.sortAscending?1:-1:0;i===void 0&&(i=""),s===void 0&&(s="");let o=0;return r?o=i-s:o=i.localeCompare(s),this.sortAscending?o:-o}sortTable(e,n=!0){this.sortColumn=e,this.sortAscending=n;let r=this.isColumnNumeric(e);this.store.update(i=>(i.sort((s,o)=>this.compareRows(s,o,r)),i))}isColumnNumeric(e){let n=qt(this.store);for(let r of n){let i=r[e];if(i!==void 0&&i!=="")return!isNaN(i)}}emptyTable(){this.store.set([])}subscribe(e){return this.store.subscribe(e)}getRows(){return qt(this.store)}}const xe=new Di;function ji(t){let e,n,r,i,s,o,l,c;return{c(){e=L("button"),n=J(t[1]),r=X(),i=L("span"),i.textContent="^",s=X(),o=L("span"),o.textContent="^",C(i,"class","acc svelte-x3kqyg"),mt(i,"strong",t[3]==t[0]&&t[4]),C(o,"class","dec svelte-x3kqyg"),mt(o,"strong",t[3]==t[0]&&!t[4]),C(e,"class","svelte-x3kqyg")},m(f,h){be(f,e,h),m(e,n),m(e,r),m(e,i),m(e,s),m(e,o),l||(c=Ze(e,"click",t[5]),l=!0)},p(f,[h]){h&2&&we(n,f[1]),h&25&&mt(i,"strong",f[3]==f[0]&&f[4]),h&25&&mt(o,"strong",f[3]==f[0]&&!f[4])},i:Ee,o:Ee,d(f){f&&ye(e),l=!1,c()}}}function Ni(t,e,n){let{col_name:r}=e,{col_label:i}=e,{handleSort:s}=e,{sortedBy:o}=e,{sortAscending:l}=e;const c=()=>s(r);return t.$$set=f=>{"col_name"in f&&n(0,r=f.col_name),"col_label"in f&&n(1,i=f.col_label),"handleSort"in f&&n(2,s=f.handleSort),"sortedBy"in f&&n(3,o=f.sortedBy),"sortAscending"in f&&n(4,l=f.sortAscending)},[r,i,s,o,l,c]}class _t extends it{constructor(e){super(),rt(this,e,Ni,ji,$e,{col_name:0,col_label:1,handleSort:2,sortedBy:3,sortAscending:4})}}const Wt={AUTO:"auto",START:"start",CENTER:"center",END:"end"},Xe={HORIZONTAL:"horizontal",VERTICAL:"vertical"},kt={OBSERVED:0,REQUESTED:1},Pi={[Xe.VERTICAL]:"top",[Xe.HORIZONTAL]:"left"},Xn={[Xe.VERTICAL]:"scrollTop",[Xe.HORIZONTAL]:"scrollLeft"};class Ui{constructor({itemSize:e,itemCount:n,estimatedItemSize:r}){this.itemSize=e,this.itemCount=n,this.estimatedItemSize=r,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:n,estimatedItemSize:r}){n!=null&&(this.itemCount=n),r!=null&&(this.estimatedItemSize=r),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:n}=this;return typeof n=="function"?n(e):Array.isArray(n)?n[e]:n}computeTotalSizeAndPositionData(){let e=0;for(let n=0;n<this.itemCount;n++){const r=this.getSize(n),i=e;e+=r,this.itemSizeAndPositionData[n]={offset:i,size:r}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const n=this.getSizeAndPositionOfLastMeasuredItem();let r=n.offset+n.size;for(let i=this.lastMeasuredIndex+1;i<=e;i++){const s=this.getSize(i);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${i} of value ${s}`);this.itemSizeAndPositionData[i]={offset:r,size:s},r+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=Wt.START,containerSize:n,currentOffset:r,targetIndex:i}){if(n<=0)return 0;const s=this.getSizeAndPositionForIndex(i),o=s.offset,l=o-n+s.size;let c;switch(e){case Wt.END:c=l;break;case Wt.CENTER:c=o-(n-s.size)/2;break;case Wt.START:c=o;break;default:c=Math.max(l,Math.min(o,r))}const f=this.getTotalSize();return Math.max(0,Math.min(f-n,c))}getVisibleRange({containerSize:e=0,offset:n,overscanCount:r}){if(this.getTotalSize()===0)return{};const s=n+e;let o=this.findNearestItem(n);if(o===void 0)throw Error(`Invalid offset ${n} specified`);const l=this.getSizeAndPositionForIndex(o);n=l.offset+l.size;let c=o;for(;n<s&&c<this.itemCount-1;)c++,n+=this.getSizeAndPositionForIndex(c).size;return r&&(o=Math.max(0,o-r),c=Math.min(c+r,this.itemCount-1)),{start:o,stop:c}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const n=this.getSizeAndPositionOfLastMeasuredItem(),r=Math.max(0,this.lastMeasuredIndex);return n.offset>=e?this.binarySearch({high:r,low:0,offset:e}):this.exponentialSearch({index:r,offset:e})}binarySearch({low:e,high:n,offset:r}){let i=0,s=0;for(;e<=n;){if(i=e+Math.floor((n-e)/2),s=this.getSizeAndPositionForIndex(i).offset,s===r)return i;s<r?e=i+1:s>r&&(n=i-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:n}){let r=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<n;)e+=r,r*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:n})}}const Bi=t=>({}),$n=t=>({});function er(t,e,n){const r=t.slice();return r[37]=e[n],r}const xi=t=>({style:t[0]&4,index:t[0]&4}),tr=t=>({style:t[37].style,index:t[37].index}),Vi=t=>({}),nr=t=>({});function rr(t,e){let n,r;const i=e[21].item,s=_n(i,e,e[20],tr);return{key:t,first:null,c(){n=Br(),s&&s.c(),this.first=n},m(o,l){be(o,n,l),s&&s.m(o,l),r=!0},p(o,l){e=o,s&&s.p&&(!r||l[0]&1048580)&&mn(s,i,e,e[20],r?gn(i,e[20],l,xi):pn(e[20]),tr)},i(o){r||(ce(s,o),r=!0)},o(o){me(s,o),r=!1},d(o){o&&ye(n),s&&s.d(o)}}}function Hi(t){let e,n,r,i=[],s=new Map,o,l;const c=t[21].header,f=_n(c,t,t[20],nr);let h=Je(t[2]);const p=v=>v[0]?v[0](v[37].index):v[37].index;for(let v=0;v<h.length;v+=1){let E=er(t,h,v),z=p(E);s.set(z,i[v]=rr(z,E))}const g=t[21].footer,w=_n(g,t,t[20],$n);return{c(){e=L("div"),f&&f.c(),n=X(),r=L("div");for(let v=0;v<i.length;v+=1)i[v].c();o=X(),w&&w.c(),C(r,"class","virtual-list-inner svelte-dwpad5"),C(r,"style",t[4]),C(e,"class","virtual-list-wrapper svelte-dwpad5"),C(e,"style",t[3])},m(v,E){be(v,e,E),f&&f.m(e,null),m(e,n),m(e,r);for(let z=0;z<i.length;z+=1)i[z]&&i[z].m(r,null);m(e,o),w&&w.m(e,null),t[22](e),l=!0},p(v,E){f&&f.p&&(!l||E[0]&1048576)&&mn(f,c,v,v[20],l?gn(c,v[20],E,Vi):pn(v[20]),nr),E[0]&1048581&&(h=Je(v[2]),Rn(),i=xr(i,E,p,1,v,h,s,r,pi,rr,null,er),zn()),(!l||E[0]&16)&&C(r,"style",v[4]),w&&w.p&&(!l||E[0]&1048576)&&mn(w,g,v,v[20],l?gn(g,v[20],E,Bi):pn(v[20]),$n),(!l||E[0]&8)&&C(e,"style",v[3])},i(v){if(!l){ce(f,v);for(let E=0;E<h.length;E+=1)ce(i[E]);ce(w,v),l=!0}},o(v){me(f,v);for(let E=0;E<i.length;E+=1)me(i[E]);me(w,v),l=!1},d(v){v&&ye(e),f&&f.d(v);for(let E=0;E<i.length;E+=1)i[E].d();w&&w.d(v),t[22](null)}}}const Wi=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function qi(t,e,n){let{$$slots:r={},$$scope:i}=e,{height:s}=e,{width:o="100%"}=e,{itemCount:l}=e,{itemSize:c}=e,{estimatedItemSize:f=null}=e,{stickyIndices:h=null}=e,{getKey:p=null}=e,{scrollDirection:g=Xe.VERTICAL}=e,{scrollOffset:w=null}=e,{scrollToIndex:v=null}=e,{scrollToAlignment:E=null}=e,{scrollToBehaviour:z="instant"}=e,{overscanCount:D=3}=e;const W=fi(),x=new Ui({itemCount:l,itemSize:c,estimatedItemSize:ae()});let U=!1,j,$=[],A={offset:w||v!=null&&$.length&&H(v)||0,scrollChangeReason:kt.REQUESTED},u=A,a={scrollToIndex:v,scrollToAlignment:E,scrollOffset:w,itemCount:l,itemSize:c,estimatedItemSize:f},d={},_="",y="";R(),Tn(()=>{n(18,U=!0),j.addEventListener("scroll",F,Wi),w!=null?N(w):v!=null&&N(H(v))}),ci(()=>{U&&j.removeEventListener("scroll",F)});function S(){if(!U)return;const I=a.scrollToIndex!==v||a.scrollToAlignment!==E,P=a.itemCount!==l||a.itemSize!==c||a.estimatedItemSize!==f;P&&(x.updateConfig({itemSize:c,itemCount:l,estimatedItemSize:ae()}),b()),a.scrollOffset!==w?n(19,A={offset:w||0,scrollChangeReason:kt.REQUESTED}):typeof v=="number"&&(I||P)&&n(19,A={offset:H(v,E,l),scrollChangeReason:kt.REQUESTED}),a={scrollToIndex:v,scrollToAlignment:E,scrollOffset:w,itemCount:l,itemSize:c,estimatedItemSize:f}}function T(){if(!U)return;const{offset:I,scrollChangeReason:P}=A;(u.offset!==I||u.scrollChangeReason!==P)&&R(),u.offset!==I&&P===kt.REQUESTED&&N(I),u=A}function R(){const{offset:I}=A,{start:P,stop:K}=x.getVisibleRange({containerSize:g===Xe.VERTICAL?s:o,offset:I,overscanCount:D});let G=[];const Y=x.getTotalSize();g===Xe.VERTICAL?(n(3,_=`height:${s}${typeof s=="number"?"px":""};width:${o};`),n(4,y=`flex-direction:column;height:${Y}px;`)):(n(3,_=`height:${s};width:${o}${typeof o=="number"?"px":""}`),n(4,y=`min-height:100%;width:${Y}px;`));const M=h!=null&&h.length!==0;if(M)for(let V=0;V<h.length;V++){const ie=h[V];G.push({index:ie,style:O(ie,!0)})}if(P!==void 0&&K!==void 0){for(let V=P;V<=K;V++)M&&h.includes(V)||G.push({index:V,style:O(V,!1)});W("itemsUpdated",{start:P,end:K})}n(2,$=G)}function N(I){"scroll"in j?j.scroll({[Pi[g]]:I,behavior:z}):n(1,j[Xn[g]]=I,j)}function b(I=0){d={},x.resetItem(I),R()}function H(I,P=E,K=l){return(I<0||I>=K)&&(I=0),x.getUpdatedOffsetForIndex({align:P,containerSize:g===Xe.VERTICAL?s:o,currentOffset:A.offset||0,targetIndex:I})}function F(I){const P=le();P<0||A.offset===P||I.target!==j||(n(19,A={offset:P,scrollChangeReason:kt.OBSERVED}),W("afterScroll",{offset:P,event:I}))}function le(){return j[Xn[g]]}function ae(){return f||typeof c=="number"&&c||50}function O(I,P){if(d[I])return d[I];const{size:K,offset:G}=x.getSizeAndPositionForIndex(I);let Y;return g===Xe.VERTICAL?(Y=`left:0;width:100%;height:${K}px;`,P?Y+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${G}px;margin-bottom:${-(G+K)}px;`:Y+=`position:absolute;top:${G}px;`):(Y=`top:0;width:${K}px;`,P?Y+=`position:sticky;z-index:1;left:0;margin-left:${G}px;margin-right:${-(G+K)}px;`:Y+=`position:absolute;height:100%;left:${G}px;`),d[I]=Y}function ne(I){Qt[I?"unshift":"push"](()=>{j=I,n(1,j)})}return t.$$set=I=>{"height"in I&&n(5,s=I.height),"width"in I&&n(6,o=I.width),"itemCount"in I&&n(7,l=I.itemCount),"itemSize"in I&&n(8,c=I.itemSize),"estimatedItemSize"in I&&n(9,f=I.estimatedItemSize),"stickyIndices"in I&&n(10,h=I.stickyIndices),"getKey"in I&&n(0,p=I.getKey),"scrollDirection"in I&&n(11,g=I.scrollDirection),"scrollOffset"in I&&n(12,w=I.scrollOffset),"scrollToIndex"in I&&n(13,v=I.scrollToIndex),"scrollToAlignment"in I&&n(14,E=I.scrollToAlignment),"scrollToBehaviour"in I&&n(15,z=I.scrollToBehaviour),"overscanCount"in I&&n(16,D=I.overscanCount),"$$scope"in I&&n(20,i=I.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&S(),t.$$.dirty[0]&524288&&T(),t.$$.dirty[0]&263264&&U&&b(0)},[p,j,$,_,y,s,o,l,c,f,h,g,w,v,E,z,D,b,U,A,i,r,ne]}class Ki extends it{constructor(e){super(),rt(this,e,qi,Hi,$e,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),Le()}get width(){return this.$$.ctx[6]}set width(e){this.$$set({width:e}),Le()}get itemCount(){return this.$$.ctx[7]}set itemCount(e){this.$$set({itemCount:e}),Le()}get itemSize(){return this.$$.ctx[8]}set itemSize(e){this.$$set({itemSize:e}),Le()}get estimatedItemSize(){return this.$$.ctx[9]}set estimatedItemSize(e){this.$$set({estimatedItemSize:e}),Le()}get stickyIndices(){return this.$$.ctx[10]}set stickyIndices(e){this.$$set({stickyIndices:e}),Le()}get getKey(){return this.$$.ctx[0]}set getKey(e){this.$$set({getKey:e}),Le()}get scrollDirection(){return this.$$.ctx[11]}set scrollDirection(e){this.$$set({scrollDirection:e}),Le()}get scrollOffset(){return this.$$.ctx[12]}set scrollOffset(e){this.$$set({scrollOffset:e}),Le()}get scrollToIndex(){return this.$$.ctx[13]}set scrollToIndex(e){this.$$set({scrollToIndex:e}),Le()}get scrollToAlignment(){return this.$$.ctx[14]}set scrollToAlignment(e){this.$$set({scrollToAlignment:e}),Le()}get scrollToBehaviour(){return this.$$.ctx[15]}set scrollToBehaviour(e){this.$$set({scrollToBehaviour:e}),Le()}get overscanCount(){return this.$$.ctx[16]}set overscanCount(e){this.$$set({overscanCount:e}),Le()}get recomputeSizes(){return this.$$.ctx[17]}}class Bt extends Error{constructor(e,n={}){super(`Node not found: ${e}`,n),this.name="NodeNotFoundError"}}class On extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const Ji="modulepreload",Gi=function(t){return"https://jburel.github.io/ome2024-ngff-challenge/"+t},ir={},Et=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.all(n.map(l=>{if(l=Gi(l),l in ir)return;ir[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Ji,c||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),c)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var Ve;class Zr{constructor(e,n,r){ve(this,Ve);typeof e=="number"?ge(this,Ve,new Uint8Array(e)):e instanceof ArrayBuffer?ge(this,Ve,new Uint8Array(e,n,r)):ge(this,Ve,new Uint8Array(Array.from(e,i=>i?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return q(this,Ve).byteOffset}get byteLength(){return q(this,Ve).byteLength}get buffer(){return q(this,Ve).buffer}get length(){return q(this,Ve).length}get(e){let n=q(this,Ve)[e];return typeof n=="number"?n!==0:n}set(e,n){q(this,Ve)[e]=n?1:0}fill(e){q(this,Ve).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}Ve=new WeakMap;var yt;class Ln{constructor(e,n,r,i){Z(this,"_data");Z(this,"chars");ve(this,yt);if(this.chars=e,ge(this,yt,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*e);else if(n instanceof ArrayBuffer)i&&(i=i*e),this._data=new Uint8Array(n,r,i);else{let s=Array.from(n);this._data=new Uint8Array(s.length*e);for(let o=0;o<s.length;o++)this.set(o,s[o])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(e,n){const r=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);r.fill(0),r.set(q(this,yt).encode(n))}fill(e){const n=q(this,yt).encode(e);for(let r=0;r<this.length;r++)this._data.set(n,r*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}yt=new WeakMap;var Ie;const Pn=class Pn{constructor(e,n,r,i){ve(this,Ie);Z(this,"chars");if(this.chars=e,typeof n=="number")ge(this,Ie,new Int32Array(n*e));else if(n instanceof ArrayBuffer)i&&(i*=e),ge(this,Ie,new Int32Array(n,r,i));else{const s=n,o=new Pn(e,1);ge(this,Ie,new Int32Array(function*(){for(let l of s)o.set(0,l),yield*q(o,Ie)}()))}}get BYTES_PER_ELEMENT(){return q(this,Ie).BYTES_PER_ELEMENT*this.chars}get byteLength(){return q(this,Ie).byteLength}get byteOffset(){return q(this,Ie).byteOffset}get buffer(){return q(this,Ie).buffer}get length(){return q(this,Ie).length/this.chars}get(e){const n=this.chars*e;let r="";for(let i=0;i<this.chars;i++)r+=String.fromCodePoint(q(this,Ie)[n+i]);return r.replace(/\u0000/g,"")}set(e,n){const r=this.chars*e,i=q(this,Ie).subarray(r,r+this.chars);i.fill(0);for(let s=0;s<this.chars;s++)i[s]=n.codePointAt(s)??0}fill(e){this.set(0,e);let n=q(this,Ie).subarray(0,this.chars);for(let r=1;r<this.length;r++)q(this,Ie).set(n,r*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};Ie=new WeakMap;let Tt=Pn;function xt(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function sr(t,e){const n=e/2,r=e-1;let i=0;for(let s=0;s<t.length;s+=e)for(let o=0;o<n;o+=1)i=t[s+o],t[s+o]=t[s+r-o],t[s+r-o]=i}const Yi={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:Zr},Qi=/v2:([US])(\d+)/;function Xr(t){if(t==="v2:object")return globalThis.Array;let e=t.match(Qi);if(e){let[,r,i]=e;return(r==="U"?Tt:Ln).bind(null,Number(i))}let n=Yi[t];if(!n)throw new Error(`Unknown or unsupported data_type: ${t}`);return n}function ct(t,e){return(e==="C"?Zi:Xi)(t)}function Zi(t){const e=t.length,n=globalThis.Array(e);for(let r=e-1,i=1;r>=0;r--)n[r]=i,i*=t[r];return n}function Xi(t){const e=t.length,n=globalThis.Array(e);for(let r=0,i=1;r<e;r++)n[r]=i,i*=t[r];return n}function $i({name:t,configuration:e}){if(t==="default"){const n=(e==null?void 0:e.separator)??"/";return r=>["c",...r].join(n)}if(t==="v2"){const n=(e==null?void 0:e.separator)??".";return r=>r.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function bn(t){var n;const e=t.find(r=>r.name==="transpose");return((n=e==null?void 0:e.configuration)==null?void 0:n.order)==="F"?"F":"C"}const es=/^([<|>])(.*)$/;function ts(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(es);if(!e)throw new Error(`Invalid dtype: ${t}`);let[,n,r]=e,i={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[r]??(r.startsWith("S")||r.startsWith("U")?`v2:${r}`:void 0);if(!i)throw new Error(`Unsupported or unknown dtype: ${t}`);return n==="|"?{data_type:i}:{data_type:i,endian:n==="<"?"little":"big"}}function ns(t,e={}){let n=[],r=ts(t.dtype);t.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in r&&r.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:i,...s}of t.filters??[])n.push({name:i,configuration:s});if(t.compressor){let{id:i,...s}=t.compressor;n.push({name:i,configuration:s})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:r.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:n,fill_value:t.fill_value,attributes:e}}function rs(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function is(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let n=t==="bool";if(e==="boolean")return n;let r=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return r;let i=t==="int64"||t==="uint64";if(e==="bigint")return i;let s=t==="v2:object";return e==="object"?s:!r&&!i&&!n&&!s}function ss(t){return(t==null?void 0:t.name)==="sharding_indexed"}function $r(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}const or=os();function os(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function lr(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var Rt,et,zt,Ot,bt;const Un=class Un{constructor(e,n){Z(this,"kind","array_to_bytes");ve(this,Rt);ve(this,et);ve(this,zt);ve(this,Ot);ve(this,bt);ge(this,bt,e==null?void 0:e.endian),ge(this,et,Xr(n.data_type)),ge(this,Ot,n.shape),ge(this,Rt,ct(n.shape,bn(n.codecs)));const r=new(q(this,et))(0);ge(this,zt,r.BYTES_PER_ELEMENT)}static fromConfig(e,n){return new Un(e,n)}encode(e){let n=new Uint8Array(e.data.buffer);return or&&q(this,bt)==="big"&&sr(n,lr(q(this,et))),n}decode(e){return or&&q(this,bt)==="big"&&sr(e,lr(q(this,et))),{data:new(q(this,et))(e.buffer,e.byteOffset,e.byteLength/q(this,zt)),shape:q(this,Ot),stride:q(this,Rt)}}};Rt=new WeakMap,et=new WeakMap,zt=new WeakMap,Ot=new WeakMap,bt=new WeakMap;let $t=Un;class Mn{constructor(){Z(this,"kind","bytes_to_bytes")}static fromConfig(){return new Mn}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}function ls(t,e){if(Number.isNaN(e))throw new Error("JsonCodec allow_nan is false but NaN was encountered during encoding.");if(e===Number.POSITIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but Infinity was encountered during encoding.");if(e===Number.NEGATIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but -Infinity was encountered during encoding.");return e}function as(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((n,r)=>(n[r]=e[r],n),{}):e}var Lt,Mt;const Bn=class Bn{constructor(e={}){Z(this,"configuration");Z(this,"kind","array_to_bytes");ve(this,Lt);ve(this,Mt);this.configuration=e;const{encoding:n="utf-8",skipkeys:r=!1,ensure_ascii:i=!0,check_circular:s=!0,allow_nan:o=!0,sort_keys:l=!0,indent:c,strict:f=!0}=e;let h=e.separators;h||(c?h=[", ",": "]:h=[",",":"]),ge(this,Lt,{encoding:n,skipkeys:r,ensure_ascii:i,check_circular:s,allow_nan:o,indent:c,separators:h,sort_keys:l}),ge(this,Mt,{strict:f})}static fromConfig(e){return new Bn(e)}encode(e){const{indent:n,encoding:r,ensure_ascii:i,check_circular:s,allow_nan:o,sort_keys:l}=q(this,Lt);if(r!=="utf-8")throw new Error("JsonCodec does not yet support non-utf-8 encoding.");const c=[];if(!s)throw new Error("JsonCodec does not yet support skipping the check for circular references during encoding.");o||c.push(ls),l&&c.push(as);const f=Array.from(e.data);f.push("|O"),f.push(e.shape);let h;c.length&&(h=(g,w)=>{let v=w;for(let E of c)v=E(g,v);return v});let p=JSON.stringify(f,h,n);return i&&(p=p.replace(/[\u007F-\uFFFF]/g,g=>{const w=`0000${g.charCodeAt(0).toString(16)}`;return`\\u${w.substring(w.length-4)}`})),new TextEncoder().encode(p)}decode(e){const{strict:n}=q(this,Mt);if(!n)throw new Error("JsonCodec does not yet support non-strict decoding.");const r=xt(e),i=r.pop();if(r.pop(),!i)throw new Error("0D not implemented for JsonCodec.");const s=ct(i,"C");return{data:r,shape:i,stride:s}}};Lt=new WeakMap,Mt=new WeakMap;let vn=Bn;function ar(t){return t instanceof Zr||t instanceof Ln||t instanceof Tt?new Proxy(t,{get(n,r){return n.get(Number(r))},set(n,r,i){return n.set(Number(r),i),!0}}):t}function us(t,e){let n;return t.data instanceof Ln||t.data instanceof Tt?n=new t.constructor(t.data.length,t.data.chars):n=new t.constructor(t.data.length),{data:n,shape:t.shape,stride:ct(t.shape,e)}}function cs(t,e){let n=us(t,e),r=t.shape.length,i=t.data.length,s=Array(r).fill(0),o=ar(t.data),l=ar(n.data);for(let c=0;c<i;c++){let f=0;for(let h=0;h<r;h++)f+=s[h]*n.stride[h];l[f]=o[c],s[0]+=1;for(let h=0;h<r;h++)if(s[h]===t.shape[h]){if(h+1===r)break;s[h]=0,s[h+1]+=1}}return n}function fs(t){if(!t.stride)return"C";let e=ct(t.shape,"C");return t.stride.every((n,r)=>n===e[r])?"C":"F"}class Fn{constructor(e){Z(this,"configuration");Z(this,"kind","array_to_array");this.configuration=e}static fromConfig(e){return new Fn(e)}encode(e){var n,r;return fs(e)===((n=this.configuration)==null?void 0:n.order)?e:cs(e,((r=this.configuration)==null?void 0:r.order)??"C")}decode(e){return e}}var Ft,Dt;const xn=class xn{constructor(e){Z(this,"kind","array_to_bytes");ve(this,Ft);ve(this,Dt);ge(this,Ft,e),ge(this,Dt,ct(e,"C"))}static fromConfig(e,n){return new xn(n.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let n=new TextDecoder,r=new DataView(e.buffer),i=Array(r.getUint32(0,!0)),s=4;for(let o=0;o<i.length;o++){let l=r.getUint32(s,!0);s+=4,i[o]=n.decode(e.buffer.slice(s,s+l)),s+=l}return{data:i,shape:q(this,Ft),stride:q(this,Dt)}}};Ft=new WeakMap,Dt=new WeakMap;let wn=xn;function hs(){return new Map().set("blosc",()=>Et(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1])).then(t=>t.default)).set("gzip",()=>Et(()=>import("./gzip-CF-9a_hd.js"),__vite__mapDeps([2,3])).then(t=>t.default)).set("lz4",()=>Et(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([4,1])).then(t=>t.default)).set("zlib",()=>Et(()=>import("./zlib-CBiqHlio.js"),__vite__mapDeps([5,3])).then(t=>t.default)).set("zstd",()=>Et(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([6,1])).then(t=>t.default)).set("transpose",()=>Fn).set("bytes",()=>$t).set("crc32c",()=>Mn).set("vlen-utf8",()=>wn).set("json2",()=>vn)}const ds=hs();function kn(t){let e;return{async encode(n){e||(e=await ur(t));for(const i of e.array_to_array)n=await i.encode(n);let r=await e.array_to_bytes.encode(n);for(const i of e.bytes_to_bytes)r=await i.encode(r);return r},async decode(n){e||(e=await ur(t));for(let i=e.bytes_to_bytes.length-1;i>=0;i--)n=await e.bytes_to_bytes[i].decode(n);let r=await e.array_to_bytes.decode(n);for(let i=e.array_to_array.length-1;i>=0;i--)r=await e.array_to_array[i].decode(r);return r}}}async function ur(t){let e=t.codecs.map(async s=>{var l;let o=await((l=ds.get(s.name))==null?void 0:l());if(!o)throw new Error(`Unknown codec: ${s.name}`);return{Codec:o,meta:s}}),n=[],r,i=[];for await(let{Codec:s,meta:o}of e){let l=s.fromConfig(o.configuration,t);switch(l.kind){case"array_to_array":n.push(l);break;case"array_to_bytes":r=l;break;default:i.push(l)}}if(!r){if(!_s(t))throw new Error(`Cannot encode ${t.data_type} to bytes without a codec`);r=$t.fromConfig({endian:"little"},t)}return{array_to_array:n,array_to_bytes:r,bytes_to_bytes:i}}function _s(t){return t.data_type!=="v2:object"}const cr=18446744073709551615n;function gs(t,e,n,r){if(t.store.getRange===void 0)throw new Error("Store does not support range requests");let i=t.store.getRange.bind(t.store),s=e.map((c,f)=>c/r.chunk_shape[f]),o=kn({data_type:"uint64",shape:[...s,2],codecs:r.index_codecs}),l={};return async c=>{let f=c.map((W,x)=>Math.floor(W/s[x])),h=t.resolve(n(f)).path,p;if(h in l)p=l[h];else{let W=4,x=16*s.reduce((j,$)=>j*$,1),U=await i(h,{suffixLength:x+W});p=l[h]=U?await o.decode(U):null}if(p===null)return;let{data:g,shape:w,stride:v}=p,E=c.map((W,x)=>W%w[x]).reduce((W,x,U)=>W+x*v[U],0),z=g[E],D=g[E+1];if(!(z===cr&&D===cr))return i(h,{offset:Number(z),length:Number(D)})}}class vt{constructor(e,n="/"){Z(this,"store");Z(this,"path");this.store=e,this.path=n}resolve(e){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new vt(this.store,new URL(e,n).pathname)}}var jt;class Dn extends vt{constructor(n,r,i){super(n,r);Z(this,"kind","group");ve(this,jt);ge(this,jt,i)}get attrs(){return q(this,jt).attributes}}jt=new WeakMap;const At=Symbol("zarrita.context");function ms(t){return t[At]}function ps(t,e){let{configuration:n}=e.codecs.find(ss)??{},r={encode_chunk_key:$i(e.chunk_key_encoding),TypedArray:Xr(e.data_type),fill_value:e.fill_value};if(n){let s=bn(n.codecs);return{...r,kind:"sharded",chunk_shape:n.chunk_shape,codec:kn({data_type:e.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(o,l){return ct(o,l??s)},get_chunk_bytes:gs(t,e.chunk_grid.configuration.chunk_shape,r.encode_chunk_key,n)}}let i=bn(e.codecs);return{...r,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:kn({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s,o){return ct(s,o??i)},async get_chunk_bytes(s,o){let l=r.encode_chunk_key(s),c=t.resolve(l).path;return t.store.get(c,o)}}}var Dr,jr,ut,Nr;let en=(Nr=class extends(jr=vt,Dr=At,jr){constructor(n,r,i){super(n,r);Z(this,"kind","array");ve(this,ut);Z(this,Dr);ge(this,ut,{...i,fill_value:$r(i)}),this[At]=ps(this,i)}get attrs(){return q(this,ut).attributes}get shape(){return q(this,ut).shape}get chunks(){return this[At].chunk_shape}get dtype(){return q(this,ut).data_type}async getChunk(n,r){let i=this[At],s=await i.get_chunk_bytes(n,r);if(!s){let o=i.chunk_shape.reduce((c,f)=>c*f,1),l=new i.TypedArray(o);return l.fill(i.fill_value),{data:l,shape:i.chunk_shape,stride:i.get_strides(i.chunk_shape)}}return i.codec.decode(s)}is(n){return is(this.dtype,n)}},ut=new WeakMap,Nr),tn=ys();function ys(){let t=new WeakMap;function e(n){let r=t.get(n)??{v2:0,v3:0};return t.set(n,r),r}return{increment(n,r){e(n)[r]+=1},version_max(n){let r=e(n);return r.v3>r.v2?"v3":"v2"}}}async function bs(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?xt(e):{}}async function vs(t,e={}){let n="store"in t?t:new vt(t),r={};return(e.attrs??!0)&&(r=await bs(n)),e.kind==="array"?fr(n,r):e.kind==="group"?hr(n,r):fr(n,r).catch(i=>{if(i instanceof Bt)return hr(n,r);throw i})}async function fr(t,e){let{path:n}=t.resolve(".zarray"),r=await t.store.get(n);if(!r)throw new Bt("v2 array",{cause:new On(n)});return tn.increment(t.store,"v2"),new en(t.store,t.path,ns(xt(r),e))}async function hr(t,e){let{path:n}=t.resolve(".zgroup"),r=await t.store.get(n);if(!r)throw new Bt("v2 group",{cause:new On(n)});return tn.increment(t.store,"v2"),new Dn(t.store,t.path,rs(xt(r),e))}async function ws(t){let{store:e,path:n}=t.resolve("zarr.json"),r=await t.store.get(n);if(!r)throw new Bt("v3 array or group",{cause:new On(n)});let i=xt(r);return i.node_type==="array"&&(i.fill_value=$r(i)),i.node_type==="array"?new en(e,t.path,i):new Dn(e,t.path,i)}async function ks(t,e={}){let n="store"in t?t:new vt(t),r=await ws(n);if(tn.increment(n.store,"v3"),e.kind===void 0||e.kind==="array"&&r instanceof en||e.kind==="group"&&r instanceof Dn)return r;let i=r instanceof en?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${i}.`)}async function at(t,e={}){let n="store"in t?t.store:t,r=tn.version_max(n),i=r==="v2"?at.v2:at.v3,s=r==="v2"?at.v3:at.v2;return i(t,e).catch(o=>{if(o instanceof Bt)return s(t,e);throw o})}at.v2=vs;at.v3=ks;function*Es(t,e,n=1){e===void 0&&(e=t,t=0);for(let r=t;r<e;r+=n)yield r}function*As(...t){if(t.length===0)return;const e=t.map(r=>r[Symbol.iterator]()),n=e.map(r=>r.next());if(n.some(r=>r.done))throw new Error("Input contains an empty iterator.");for(let r=0;;){if(n[r].done){if(e[r]=t[r][Symbol.iterator](),n[r]=e[r].next(),++r>=e.length)return}else yield n.map(({value:i})=>i),r=0;n[r]=e[r].next()}}function Ss({start:t,stop:e,step:n},r){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const i=n<0,[s,o]=i?[-1,r-1]:[0,r];return t===null?t=i?o:s:t<0?(t+=r,t<s&&(t=s)):t>o&&(t=o),e===null?e=i?s:o:e<0?(e+=r,e<s&&(e=s)):e>o&&(e=o),[t,e,n]}function En(t,e,n=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:n}}function Is(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class jn extends Error{constructor(e){super(e),this.name="IndexError"}}function Cs(t,e){throw new jn(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function Ts(t){throw new jn(`index out of bounds for dimension with length ${t}`)}function Rs(){throw new jn("only slices with step >= 1 are supported")}function zs(t,e){t.length>e.length&&Cs(t,e)}function Os(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&Ts(e),t}class Ls{constructor({dim_sel:e,dim_len:n,dim_chunk_len:r}){Z(this,"dim_sel");Z(this,"dim_len");Z(this,"dim_chunk_len");Z(this,"nitems");e=Os(e,n),this.dim_sel=e,this.dim_len=n,this.dim_chunk_len=r,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),n=e*this.dim_chunk_len,r=this.dim_sel-n;yield{dim_chunk_ix:e,dim_chunk_sel:r}}}class dr{constructor({dim_sel:e,dim_len:n,dim_chunk_len:r}){Z(this,"start");Z(this,"stop");Z(this,"step");Z(this,"dim_len");Z(this,"dim_chunk_len");Z(this,"nitems");Z(this,"nchunks");const[i,s,o]=Ss(e,n);this.start=i,this.stop=s,this.step=o,this.step<1&&Rs(),this.dim_len=n,this.dim_chunk_len=r,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const r of Es(e,n)){const i=r*this.dim_chunk_len,s=Math.min(this.dim_len,(r+1)*this.dim_chunk_len),o=s-i;let l=0,c=0;if(this.start<i){const w=(i-this.start)%this.step;w&&(c+=this.step-w),l=Math.ceil((i-this.start)/this.step)}else c=this.start-i;const f=this.stop>s?o:this.stop-i,h=[c,f,this.step],p=Math.ceil((f-c)/this.step),g=[l,l+p,1];yield{dim_chunk_ix:r,dim_chunk_sel:h,dim_out_sel:g}}}}function Ms(t,e){let n=[];return t===null?n=e.map(r=>En(null)):Array.isArray(t)&&(n=t.map(r=>r??En(null))),zs(n,e),n}class Fs{constructor({selection:e,shape:n,chunk_shape:r}){Z(this,"dim_indexers");Z(this,"shape");this.dim_indexers=Ms(e,n).map((i,s)=>new(typeof i=="number"?Ls:dr)({dim_sel:i,dim_len:n[s],dim_chunk_len:r[s]})),this.shape=this.dim_indexers.filter(i=>i instanceof dr).map(i=>i.nitems)}*[Symbol.iterator](){for(const e of As(...this.dim_indexers)){const n=e.map(i=>i.dim_chunk_ix),r=e.map(i=>"dim_out_sel"in i?{from:i.dim_chunk_sel,to:i.dim_out_sel}:{from:i.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:r}}}}function Ds(t,e){return"get"in t?t.get(e):t[e]}async function js(t,e,n,r){var c;let i=ms(t),s=new Fs({selection:e,shape:t.shape,chunk_shape:t.chunks}),o=r.prepare(new i.TypedArray(s.shape.reduce((f,h)=>f*h,1)),s.shape,i.get_strides(s.shape,n.order)),l=((c=n.create_queue)==null?void 0:c.call(n))??Is();for(const{chunk_coords:f,mapping:h}of s)l.add(async()=>{let{data:p,shape:g,stride:w}=await t.getChunk(f,n.opts),v=r.prepare(p,g,w);r.set_from_chunk(o,v,h)});return await l.onIdle(),s.shape.length===0?Ds(o.data,0):o}function Nn(t,e=0,n){let r=n??t.length-e;return{length:r,subarray(i,s=r){return Nn(t,e+i,s-i)},set(i,s=0){for(let o=0;o<i.length;o++)t[e+s+o]=i.get(o)},get(i){return t[e+i]}}}function dn(t){return globalThis.Array.isArray(t.data)?{data:Nn(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function Ns(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function Ps(t,e){if(globalThis.Array.isArray(t.data))return Nn([e]);let n=Ns(t.data),r=new n([e]);return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}const Us={prepare(t,e,n){return{data:t,shape:e,stride:n}},set_scalar(t,e,n){let r=dn(t);An(r,e,Ps(t,n),r.bytes_per_element)},set_from_chunk(t,e,n){let r=dn(t);Gt(r,dn(e),r.bytes_per_element,n)}};async function Bs(t,e=null,n={}){return js(t,e,n,Us)}function ei(t,e,n){return n<0&&e<t?Math.floor((t-e-1)/-n)+1:t<e?Math.floor((e-t-1)/n)+1:0}function An(t,e,n,r){if(e.length===0){t.data.set(n,0);return}const[i,...s]=e,[o,...l]=t.stride;if(typeof i=="number"){const g=t.data.subarray(o*i*r);An({data:g,stride:l},s,n,r);return}const[c,f,h]=i,p=ei(c,f,h);if(s.length===0){for(let g=0;g<p;g++)t.data.set(n,o*(c+h*g)*r);return}for(let g=0;g<p;g++){const w=t.data.subarray(o*(c+h*g)*r);An({data:w,stride:l},s,n,r)}}function Gt(t,e,n,r){const[i,...s]=r,[o,...l]=t.stride,[c,...f]=e.stride;if(i.from===null){if(s.length===0){t.data.set(e.data.subarray(0,n),i.to*n);return}Gt({data:t.data.subarray(o*i.to*n),stride:l},e,n,s);return}if(i.to===null){if(s.length===0){let D=i.from*n;t.data.set(e.data.subarray(D,D+n),0);return}Gt(t,{data:e.data.subarray(c*i.from*n),stride:f},n,s);return}const[h,p,g]=i.to,[w,v,E]=i.from,z=ei(h,p,g);if(s.length===0){if(g===1&&E===1&&o===1&&c===1){let D=w*n,W=z*n;t.data.set(e.data.subarray(D,D+W),h*n);return}for(let D=0;D<z;D++){let W=c*(w+E*D)*n;t.data.set(e.data.subarray(W,W+n),o*(h+g*D)*n)}return}for(let D=0;D<z;D++)Gt({data:t.data.subarray(o*(h+D*g)*n),stride:l},{data:e.data.subarray(c*(w+D*E)*n),stride:f},n,s)}function ti(t,e,n,r={}){return e!==void 0&&n!==void 0&&(r={...r,headers:{...r.headers,Range:`bytes=${e}-${e+n-1}`}}),fetch(t,r)}function xs(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function _r(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const r=new URL(e.slice(1),n);return r.search=n.search,r}async function gr(t){if(!(t.status===404||t.status===403)){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function Vs(t,e,n,r){if(r)return fetch(t,{...n,headers:{...n.headers,Range:`bytes=-${e}`}});let i=await fetch(t,{...n,method:"HEAD"});if(!i.ok)return i;let s=i.headers.get("Content-Length"),o=Number(s);return ti(t,o-e,o,n)}var Nt,Pt,Ut,Sn;class Hs{constructor(e,n={}){ve(this,Ut);Z(this,"url");ve(this,Nt);ve(this,Pt);this.url=e,ge(this,Nt,n.overrides??{}),ge(this,Pt,n.useSuffixRequest??!1)}async get(e,n={}){let r=_r(this.url,e).href,i=await fetch(r,fn(this,Ut,Sn).call(this,n));return gr(i)}async getRange(e,n,r={}){let i=_r(this.url,e),s=fn(this,Ut,Sn).call(this,r),o;return"suffixLength"in n?o=await Vs(i,n.suffixLength,s,q(this,Pt)):o=await ti(i,n.offset,n.length,s),gr(o)}}Nt=new WeakMap,Pt=new WeakMap,Ut=new WeakSet,Sn=function(e){return xs(q(this,Nt),e)};function Ws(t){let e,n;return{c(){e=L("div"),n=L("canvas"),Qe(n,"width",t[1]+"px"),Qe(n,"background-color","lightgrey"),C(n,"height",t[3]),C(n,"width",t[2]),C(e,"class","canvasWrapper svelte-12wykiu"),Qe(e,"width",t[1]+"px"),mt(e,"spinner",t[4])},m(r,i){be(r,e,i),m(e,n),t[10](n)},p(r,[i]){i&2&&Qe(n,"width",r[1]+"px"),i&8&&C(n,"height",r[3]),i&4&&C(n,"width",r[2]),i&2&&Qe(e,"width",r[1]+"px"),i&16&&mt(e,"spinner",r[4])},i:Ee,o:Ee,d(r){r&&ye(e),t[10](null)}}}const mr=120;function qs(t,e,n){let{source:r}=e,{attrs:i}=e,{thumbDatasetIndex:s=void 0}=e,{thumbAspectRatio:o=1}=e,{max_size:l=512}=e,c,f=120,h=120,p=h/o,g=!0;async function w(){var N;let E=i.multiscales[0].datasets.map(b=>b.path),z=i.multiscales[0].axes.map(b=>b.name),D=E.at(-1);s!=null&&s<E.length&&(D=E[s]);const W=new Hs(r+"/"+D),x=await at.v3(W,{kind:"array"});let U=z.indexOf("c"),j=x.shape;if(j.at(-1)*j.at(-2)>l*l){console.log("Lowest resolution too large for Thumbnail: ",j,r);return}let $=j.length,A=j[U]||1,u,a;(N=i==null?void 0:i.omero)!=null&&N.channels?(u=i.omero.channels.map(b=>b.active),a=i.omero.channels.map(b=>Jr(b.color))):(u=Li(A),a=Mi(A,u)),a=a.filter((b,H)=>u[H]);let _=u.reduce((b,H,F)=>(H&&b.push(F),b),[]).map(b=>{let H=j.map((F,le)=>le==U?b:le>=$-2?En(0,F):z[le]=="z"||z[le]=="t"?parseInt(F/2+""):0);return Bs(x,H)}),y=await Promise.all(_),S=y.map(b=>Kr(b)),T=Ri(y,S,a);n(2,h=j.at(-1)),n(3,p=j.at(-2));let R=h/mr;p>h&&(R=p/mr),n(1,f=h/R),setTimeout(()=>{const b=c.getContext("2d");n(4,g=!1),b.putImageData(new ImageData(T,h,p),0,0)},100)}Tn(()=>{w()});function v(E){Qt[E?"unshift":"push"](()=>{c=E,n(0,c)})}return t.$$set=E=>{"source"in E&&n(5,r=E.source),"attrs"in E&&n(6,i=E.attrs),"thumbDatasetIndex"in E&&n(7,s=E.thumbDatasetIndex),"thumbAspectRatio"in E&&n(8,o=E.thumbAspectRatio),"max_size"in E&&n(9,l=E.max_size)},[c,f,h,p,g,r,i,s,o,l,v]}class Ks extends it{constructor(e){super(),rt(this,e,qs,Ws,$e,{source:5,attrs:6,thumbDatasetIndex:7,thumbAspectRatio:8,max_size:9})}}function pr(t,e,n){const r=t.slice();return r[8]=e[n],r}function yr(t){let e,n;return e=new Ks({props:{source:t[3],attrs:t[2],max_size:2e3,thumbDatasetIndex:t[4],thumbAspectRatio:t[5]}}),{c(){Ke(e.$$.fragment)},m(r,i){He(e,r,i),n=!0},p(r,i){const s={};i&8&&(s.source=r[3]),i&4&&(s.attrs=r[2]),i&16&&(s.thumbDatasetIndex=r[4]),i&32&&(s.thumbAspectRatio=r[5]),e.$set(s)},i(r){n||(ce(e.$$.fragment,r),n=!0)},o(r){me(e.$$.fragment,r),n=!1},d(r){We(e,r)}}}function br(t){let e,n,r,i=t[0][`size_${t[8]}`]+"",s;return{c(){e=L("tr"),n=L("td"),n.textContent=`${t[8].toUpperCase()}`,r=L("td"),s=J(i),C(n,"class","svelte-ufwatd"),C(r,"class","svelte-ufwatd")},m(o,l){be(o,e,l),m(e,n),m(e,r),m(r,s)},p(o,l){l&1&&i!==(i=o[0][`size_${o[8]}`]+"")&&we(s,i)},d(o){o&&ye(e)}}}function vr(t){let e,n=t[0][`size_${t[8]}`]!==void 0&&br(t);return{c(){n&&n.c(),e=Br()},m(r,i){n&&n.m(r,i),be(r,e,i)},p(r,i){r[0][`size_${r[8]}`]!==void 0?n?n.p(r,i):(n=br(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&ye(e),n&&n.d(r)}}}function wr(t){var h;let e,n,r=t[0].source+"",i,s,o,l=((h=t[0].csv)==null?void 0:h.split("/").pop())+"",c,f;return{c(){e=L("div"),n=J("Data from "),i=J(r),s=J(`:
        `),o=L("a"),c=J(l),C(o,"href",f=Er(t[0])),C(o,"target","_blank")},m(p,g){be(p,e,g),m(e,n),m(e,i),m(e,s),m(e,o),m(o,c)},p(p,g){var w;g&1&&r!==(r=p[0].source+"")&&we(i,r),g&1&&l!==(l=((w=p[0].csv)==null?void 0:w.split("/").pop())+"")&&we(c,l),g&1&&f!==(f=Er(p[0]))&&C(o,"href",f)},d(p){p&&ye(e)}}}function kr(t){let e,n,r,i,s;return{c(){e=L("div"),n=L("a"),r=J("Original data"),C(n,"title",i="Link to original data: "+t[0].origin),C(n,"href",s=t[0].origin),C(n,"target","_blank")},m(o,l){be(o,e,l),m(e,n),m(n,r)},p(o,l){l&1&&i!==(i="Link to original data: "+o[0].origin)&&C(n,"title",i),l&1&&s!==(s=o[0].origin)&&C(n,"href",s)},d(o){o&&ye(e)}}}function Js(t){let e,n,r,i,s,o,l,c,f=Zt(t[0].written)+"",h,p,g,w,v=(t[0].name?t[0].name.replaceAll(t[1],`<mark>${t[1]}</mark>`):"")+"",E,z,D=t[6].replaceAll(t[1],`<mark>${t[1]}</mark>`)+"",W,x,U,j,$,A,u,a,d=t[2]&&yr(t),_=Je(["t","c","z","y","x"]),y=[];for(let R=0;R<5;R+=1)y[R]=vr(pr(t,_,R));let S=t[0].source&&wr(t),T=t[0].origin&&kr(t);return{c(){e=L("div"),n=L("div"),d&&d.c(),r=X(),i=L("table");for(let R=0;R<5;R+=1)y[R].c();s=X(),o=L("tr"),l=L("td"),l.textContent="Size",c=L("td"),h=J(f),p=X(),g=L("div"),w=L("div"),E=X(),z=L("div"),W=X(),S&&S.c(),x=X(),T&&T.c(),U=X(),j=L("a"),$=J("OME-Validator"),C(n,"class","thumbWrapper svelte-ufwatd"),C(l,"class","svelte-ufwatd"),Qe(c,"white-space","nowrap"),C(c,"class","svelte-ufwatd"),C(i,"class","svelte-ufwatd"),C(j,"title",A="Open in Validator: "+t[0].url),C(j,"href",u="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+t[0].url),C(j,"target","_blank"),C(e,"class","zarr-list-item svelte-ufwatd")},m(R,N){be(R,e,N),m(e,n),d&&d.m(n,null),m(e,r),m(e,i);for(let b=0;b<5;b+=1)y[b]&&y[b].m(i,null);m(i,s),m(i,o),m(o,l),m(o,c),m(c,h),m(e,p),m(e,g),m(g,w),w.innerHTML=v,m(g,E),m(g,z),z.innerHTML=D,m(g,W),S&&S.m(g,null),m(g,x),T&&T.m(g,null),m(g,U),m(g,j),m(j,$),a=!0},p(R,[N]){if(R[2]?d?(d.p(R,N),N&4&&ce(d,1)):(d=yr(R),d.c(),ce(d,1),d.m(n,null)):d&&(Rn(),me(d,1,1,()=>{d=null}),zn()),N&1){_=Je(["t","c","z","y","x"]);let b;for(b=0;b<5;b+=1){const H=pr(R,_,b);y[b]?y[b].p(H,N):(y[b]=vr(H),y[b].c(),y[b].m(i,s))}for(;b<5;b+=1)y[b].d(1)}(!a||N&1)&&f!==(f=Zt(R[0].written)+"")&&we(h,f),(!a||N&3)&&v!==(v=(R[0].name?R[0].name.replaceAll(R[1],`<mark>${R[1]}</mark>`):"")+"")&&(w.innerHTML=v),(!a||N&66)&&D!==(D=R[6].replaceAll(R[1],`<mark>${R[1]}</mark>`)+"")&&(z.innerHTML=D),R[0].source?S?S.p(R,N):(S=wr(R),S.c(),S.m(g,x)):S&&(S.d(1),S=null),R[0].origin?T?T.p(R,N):(T=kr(R),T.c(),T.m(g,U)):T&&(T.d(1),T=null),(!a||N&1&&A!==(A="Open in Validator: "+R[0].url))&&C(j,"title",A),(!a||N&1&&u!==(u="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+R[0].url))&&C(j,"href",u)},i(R){a||(ce(d),a=!0)},o(R){me(d),a=!1},d(R){R&&ye(e),d&&d.d(),Yt(y,R),S&&S.d(),T&&T.d()}}}function Er(t){return window.location.origin+window.location.pathname+"?csv="+t.csv}function Gs(t,e,n){let r,{rowData:i}=e,{textFilter:s}=e,o,l,c,f=1;if(i.size_x&&i.size_y){let h=Math.max(i.size_x,i.size_y);for(c=0;h>256;)c+=1,h=h/2;f=i.size_x/i.size_y}return Tn(async()=>{let h=i.url;i.series0!==void 0&&(h+="/"+i.series0);let p=await Xt(h);n(2,o=p[0]),n(3,l=p[1]),p[2]}),t.$$set=h=>{"rowData"in h&&n(0,i=h.rowData),"textFilter"in h&&n(1,s=h.textFilter)},t.$$.update=()=>{var h;t.$$.dirty&3&&n(6,r=s!=""&&((h=i.description)!=null&&h.includes(s))?i.description:"")},[i,s,o,l,c,f,r]}class Ys extends it{constructor(e){super(),rt(this,e,Gs,Js,$e,{rowData:0,textFilter:1})}}function Qs(t){let e,n,r,i;return n=new Ys({props:{rowData:t[0][t[10]],textFilter:t[1]}}),{c(){e=L("div"),Ke(n.$$.fragment),C(e,"slot","item"),C(e,"style",r=t[9]),C(e,"class","row svelte-joy4w7")},m(s,o){be(s,e,o),He(n,e,null),i=!0},p(s,o){const l={};o&1025&&(l.rowData=s[0][s[10]]),o&2&&(l.textFilter=s[1]),n.$set(l),(!i||o&512&&r!==(r=s[9]))&&C(e,"style",r)},i(s){i||(ce(n.$$.fragment,s),i=!0)},o(s){me(n.$$.fragment,s),i=!1},d(s){s&&ye(e),We(n)}}}function Zs(t){let e=!1,n=()=>{e=!1},r,i,s,o=`${t[3]}px`,l,c,f;return Ct(t[6]),Ct(t[7]),s=new Ki({props:{width:"100%",height:t[3],itemCount:t[0].length,itemSize:160,getKey:t[4],$$slots:{item:[Qs,({style:h,index:p})=>({9:h,10:p}),({style:h,index:p})=>(h?512:0)|(p?1024:0)]},$$scope:{ctx:t}}}),s.$on("afterScroll",t[5]),{c(){i=L("div"),Ke(s.$$.fragment),C(i,"class","imageListContainer svelte-joy4w7"),Qe(i,"height",o)},m(h,p){be(h,i,p),He(s,i,null),l=!0,c||(f=[Ze(window,"resize",t[6]),Ze(window,"scroll",()=>{e=!0,clearTimeout(r),r=setTimeout(n,100),t[7]()})],c=!0)},p(h,[p]){p&4&&!e&&(e=!0,clearTimeout(r),scrollTo(window.pageXOffset,h[2]),r=setTimeout(n,100));const g={};p&8&&(g.height=h[3]),p&1&&(g.itemCount=h[0].length),p&3587&&(g.$$scope={dirty:p,ctx:h}),s.$set(g),p&8&&o!==(o=`${h[3]}px`)&&Qe(i,"height",o)},i(h){l||(ce(s.$$.fragment,h),l=!0)},o(h){me(s.$$.fragment,h),l=!1},d(h){h&&ye(i),We(s),c=!1,nt(f)}}}function Xs(t,e,n){let r,{tableRows:i}=e,{textFilter:s}=e;function o(g){return i[g].url}let l=0,c=0;function f(g){let w=g.detail.offset-c;l<300&&w>0||w<0&&l>0&&n(2,l+=w),c=g.detail.offset}function h(){n(3,r=window.innerHeight)}function p(){n(2,l=window.pageYOffset)}return t.$$set=g=>{"tableRows"in g&&n(0,i=g.tableRows),"textFilter"in g&&n(1,s=g.textFilter)},n(3,r=0),[i,s,l,r,o,f,h,p]}class $s extends it{constructor(e){super(),rt(this,e,Xs,Zs,$e,{tableRows:0,textFilter:1})}}const eo="https://jburel.github.io/ome2024-ngff-challenge/ome-main-nav.svg";function to(t){let e;return{c(){e=L("nav"),e.innerHTML=`<img style="height: 30px" alt="OME Logo" src="${eo}"/> <h2 class="svelte-jcf7ka">2024 NGFF Challenge</h2> <ul class="svelte-jcf7ka"><li class="svelte-jcf7ka"><a href="https://github.com/ome/ome2024-ngff-challenge/" target="_blank" class="svelte-jcf7ka">About</a></li></ul>`,C(e,"class","svelte-jcf7ka")},m(n,r){be(n,e,r)},p:Ee,i:Ee,o:Ee,d(n){n&&ye(e)}}}class no extends it{constructor(e){super(),rt(this,e,null,to,$e,{})}}function ro(t){let e,n,r,i,s,o,l,c=t[0].source+"",f,h,p,g,w,v,E=t[0].total_count+"",z,D,W,x,U,j,$;return{c(){e=L("div"),n=L("label"),r=L("img"),o=X(),l=L("div"),f=J(c),h=X(),p=L("br"),g=X(),w=L("span"),v=J("("),z=J(E),D=J(" images)"),x=L("input"),C(r,"title",i=t[0].url),C(r,"class","sourceLogo svelte-1mddads"),C(r,"alt","Source logo"),Kn(r.src,s=Gn(t[0].source))||C(r,"src",s),C(w,"title",W=t[0].child_csv.length+" collections"),C(x,"type","radio"),C(x,"name","source"),x.value=U=t[0].source,C(x,"class","svelte-1mddads"),C(n,"class","svelte-1mddads"),C(e,"class","source svelte-1mddads")},m(A,u){be(A,e,u),m(e,n),m(n,r),m(n,o),m(n,l),m(l,f),m(l,h),m(l,p),m(l,g),m(l,w),m(w,v),m(w,z),m(w,D),m(l,x),j||($=Ze(x,"change",function(){In(t[1])&&t[1].apply(this,arguments)}),j=!0)},p(A,[u]){t=A,u&1&&i!==(i=t[0].url)&&C(r,"title",i),u&1&&!Kn(r.src,s=Gn(t[0].source))&&C(r,"src",s),u&1&&c!==(c=t[0].source+"")&&we(f,c),u&1&&E!==(E=t[0].total_count+"")&&we(z,E),u&1&&W!==(W=t[0].child_csv.length+" collections")&&C(w,"title",W),u&1&&U!==(U=t[0].source)&&(x.value=U)},i:Ee,o:Ee,d(A){A&&ye(e),j=!1,$()}}}function io(t,e,n){let{source:r}=e,{handleFilter:i}=e;return t.$$set=s=>{"source"in s&&n(0,r=s.source),"handleFilter"in s&&n(1,i=s.handleFilter)},[r,i]}class so extends it{constructor(e){super(),rt(this,e,io,ro,$e,{source:0,handleFilter:1})}}function Ar(t,e,n){const r=t.slice();return r[25]=e[n],r}function Sr(t,e,n){const r=t.slice();return r[25]=e[n],r}function Ir(t,e,n){const r=t.slice();return r[30]=e[n],r}function Cr(t,e,n){const r=t.slice();return r[33]=e[n],r}function Tr(t){let e,n;return e=new so({props:{source:t[33],handleFilter:t[13]}}),{c(){Ke(e.$$.fragment)},m(r,i){He(e,r,i),n=!0},p(r,i){const s={};i[0]&2&&(s.source=r[33]),e.$set(s)},i(r){n||(ce(e.$$.fragment,r),n=!0)},o(r){me(e.$$.fragment,r),n=!1},d(r){We(e,r)}}}function Rr(t){let e,n,r,i,s,o;return{c(){e=L("div"),n=L("label"),r=L("input"),i=J(`
              ❌ Clear Source Filter`),C(r,"type","radio"),C(r,"name","source"),r.value="",C(r,"class","svelte-7rjbjc"),C(n,"class","svelte-7rjbjc"),C(e,"class","source clear svelte-7rjbjc")},m(l,c){be(l,e,c),m(e,n),m(n,r),m(n,i),s||(o=Ze(r,"change",t[13]),s=!0)},p:Ee,d(l){l&&ye(e),s=!1,o()}}}function zr(t){let e,n,r,i,s=Je(xe.getCsvSourceList(t[7])),o=[];for(let l=0;l<s.length;l+=1)o[l]=Or(Ir(t,s,l));return{c(){e=L("select"),n=L("option"),n.textContent="Collection";for(let l=0;l<o.length;l+=1)o[l].c();n.__value="",Pe(n,n.__value),C(e,"name","collection"),C(e,"class","svelte-7rjbjc")},m(l,c){be(l,e,c),m(e,n);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);r||(i=Ze(e,"change",t[15]),r=!0)},p(l,c){if(c[0]&128){s=Je(xe.getCsvSourceList(l[7]));let f;for(f=0;f<s.length;f+=1){const h=Ir(l,s,f);o[f]?o[f].p(h,c):(o[f]=Or(h),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=s.length}},d(l){l&&ye(e),Yt(o,l),r=!1,i()}}}function Or(t){let e,n=(t[30].source==t[7]?Fr(t[30].url):t[30].source)+"",r,i,s=t[30].image_count+"",o,l,c;return{c(){e=L("option"),r=J(n),i=J(" ("),o=J(s),l=J(`)
                `),e.__value=c=t[30].url,Pe(e,e.__value)},m(f,h){be(f,e,h),m(e,r),m(e,i),m(e,o),m(e,l)},p(f,h){h[0]&128&&n!==(n=(f[30].source==f[7]?Fr(f[30].url):f[30].source)+"")&&we(r,n),h[0]&128&&s!==(s=f[30].image_count+"")&&we(o,s),h[0]&128&&c!==(c=f[30].url)&&(e.__value=c,Pe(e,e.__value))},d(f){f&&ye(e)}}}function Lr(t){let e,n=t[25]+"",r,i;return{c(){e=L("option"),r=J(n),e.__value=i=t[4][t[25]],Pe(e,e.__value)},m(s,o){be(s,e,o),m(e,r)},p(s,o){o[0]&16&&n!==(n=s[25]+"")&&we(r,n),o[0]&16&&i!==(i=s[4][s[25]])&&(e.__value=i,Pe(e,e.__value))},d(s){s&&ye(e)}}}function Mr(t,e){let n,r=e[25]+"",i,s;return{key:t,first:null,c(){n=L("option"),i=J(r),n.__value=s=e[5][e[25]],Pe(n,n.__value),this.first=n},m(o,l){be(o,n,l),m(n,i)},p(o,l){e=o,l[0]&32&&r!==(r=e[25]+"")&&we(i,r),l[0]&32&&s!==(s=e[5][e[25]])&&(n.__value=s,Pe(n,n.__value))},d(o){o&&ye(n)}}}function oo(t){let e,n,r,i,s,o,l,c,f=Zt(t[3])+"",h,p,g=t[1].length+"",w,v,E,z,D,W,x,U,j,$,A,u,a,d,_,y,S=t[6]!=="0"?"All Dimensions":"Dimension Count",T,R,N,b,H,F,le,ae,O=t[8]==""?"Organism":"All Organisms",ne,I,P,K,G=t[8]==""?"Imaging Modality":"All Modalities",Y,M=[],V=new Map,ie,fe,se,ee,ue,Q,Me,pe,Ue,ke,Ce,te,he,Te,re,Fe,qe,De,Ae,Ge,Be=t[0].length+"",Se,st,Re,Ye,ze,nn,Vn;n=new no({});let ot=Je(t[1]),de=[];for(let k=0;k<ot.length;k+=1)de[k]=Tr(Cr(t,ot,k));const ni=k=>me(de[k],1,1,()=>{de[k]=null});let je=t[7]!==""&&Rr(t),Ne=t[7]!==""&&zr(t),ft=Je(Object.keys(t[4]).sort()),Oe=[];for(let k=0;k<ft.length;k+=1)Oe[k]=Lr(Sr(t,ft,k));let Vt=Je(Object.keys(t[5]).sort());const Hn=k=>k[25];for(let k=0;k<Vt.length;k+=1){let B=Ar(t,Vt,k),_e=Hn(B);V.set(_e,M[k]=Mr(_e,B))}return Q=new _t({props:{col_label:"X",col_name:"size_x",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),pe=new _t({props:{col_label:"Y",col_name:"size_y",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),ke=new _t({props:{col_label:"Z",col_name:"size_z",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),te=new _t({props:{col_label:"C",col_name:"size_c",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),Te=new _t({props:{col_label:"T",col_name:"size_t",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),Fe=new _t({props:{col_label:"Data size",col_name:"written",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),Ye=new $s({props:{tableRows:t[0],textFilter:t[9]}}),{c(){e=L("div"),Ke(n.$$.fragment),r=X(),i=L("main"),s=L("div"),o=L("h2"),l=J(t[2]),c=J(` Zarr Images,
        `),h=J(f),p=J(", from "),w=J(g),v=J(" sources:"),E=X(),z=L("div");for(let k=0;k<de.length;k+=1)de[k].c();D=X(),je&&je.c(),W=X(),x=L("div"),U=L("div"),j=L("input"),$=X(),A=L("div"),u=L("div"),u.textContent="Filter by:",a=X(),Ne&&Ne.c(),d=X(),_=L("select"),y=L("option"),T=J(S),R=L("option"),R.textContent="2D",N=L("option"),N.textContent="3D",b=L("option"),b.textContent="4D",H=L("option"),H.textContent="5D",F=X(),le=L("select"),ae=L("option"),ne=J(O);for(let k=0;k<Oe.length;k+=1)Oe[k].c();I=X(),P=L("select"),K=L("option"),Y=J(G);for(let k=0;k<M.length;k+=1)M[k].c();ie=X(),fe=L("div"),se=X(),ee=L("div"),ue=J(`Sort:
          
          `),Ke(Q.$$.fragment),Me=X(),Ke(pe.$$.fragment),Ue=X(),Ke(ke.$$.fragment),Ce=X(),Ke(te.$$.fragment),he=X(),Ke(Te.$$.fragment),re=X(),Ke(Fe.$$.fragment),qe=X(),De=L("div"),Ae=L("h3"),Ge=J("Showing "),Se=J(Be),st=J(" images"),Re=X(),Ke(Ye.$$.fragment),C(o,"class","svelte-7rjbjc"),C(z,"class","sources svelte-7rjbjc"),C(s,"class","summary svelte-7rjbjc"),C(j,"placeholder","Filter by Name or Description"),C(j,"name","textFilter"),C(j,"class","svelte-7rjbjc"),Qe(u,"white-space","nowrap"),y.__value="0",Pe(y,y.__value),R.__value="2",Pe(R,R.__value),N.__value="3",Pe(N,N.__value),b.__value="4",Pe(b,b.__value),H.__value="5",Pe(H,H.__value),C(_,"class","svelte-7rjbjc"),ae.__value="",Pe(ae,ae.__value),C(le,"class","svelte-7rjbjc"),K.__value="",Pe(K,K.__value),C(P,"class","svelte-7rjbjc"),C(fe,"class","clear svelte-7rjbjc"),C(A,"class","filters svelte-7rjbjc"),C(U,"class","sidebar svelte-7rjbjc"),Qe(Ae,"margin-left","15px"),C(Ae,"class","svelte-7rjbjc"),C(De,"class","results svelte-7rjbjc"),C(x,"class","sidebarContainer svelte-7rjbjc"),C(i,"class","svelte-7rjbjc"),C(e,"class","app svelte-7rjbjc")},m(k,B){be(k,e,B),He(n,e,null),m(e,r),m(e,i),m(i,s),m(s,o),m(o,l),m(o,c),m(o,h),m(o,p),m(o,w),m(o,v),m(s,E),m(s,z);for(let _e=0;_e<de.length;_e+=1)de[_e]&&de[_e].m(z,null);m(z,D),je&&je.m(z,null),m(i,W),m(i,x),m(x,U),m(U,j),m(U,$),m(U,A),m(A,u),m(A,a),Ne&&Ne.m(A,null),m(A,d),m(A,_),m(_,y),m(y,T),m(_,R),m(_,N),m(_,b),m(_,H),m(A,F),m(A,le),m(le,ae),m(ae,ne);for(let _e=0;_e<Oe.length;_e+=1)Oe[_e]&&Oe[_e].m(le,null);m(A,I),m(A,P),m(P,K),m(K,Y);for(let _e=0;_e<M.length;_e+=1)M[_e]&&M[_e].m(P,null);m(A,ie),m(A,fe),m(U,se),m(U,ee),m(ee,ue),He(Q,ee,null),m(ee,Me),He(pe,ee,null),m(ee,Ue),He(ke,ee,null),m(ee,Ce),He(te,ee,null),m(ee,he),He(Te,ee,null),m(ee,re),He(Fe,ee,null),m(x,qe),m(x,De),m(De,Ae),m(Ae,Ge),m(Ae,Se),m(Ae,st),m(De,Re),He(Ye,De,null),ze=!0,nn||(Vn=[Ze(j,"input",t[18]),Ze(_,"change",t[14]),Ze(le,"change",t[16]),Ze(P,"change",t[17])],nn=!0)},p(k,B){if((!ze||B[0]&4)&&we(l,k[2]),(!ze||B[0]&8)&&f!==(f=Zt(k[3])+"")&&we(h,f),(!ze||B[0]&2)&&g!==(g=k[1].length+"")&&we(w,g),B[0]&8194){ot=Je(k[1]);let oe;for(oe=0;oe<ot.length;oe+=1){const wt=Cr(k,ot,oe);de[oe]?(de[oe].p(wt,B),ce(de[oe],1)):(de[oe]=Tr(wt),de[oe].c(),ce(de[oe],1),de[oe].m(z,D))}for(Rn(),oe=ot.length;oe<de.length;oe+=1)ni(oe);zn()}if(k[7]!==""?je?je.p(k,B):(je=Rr(k),je.c(),je.m(z,null)):je&&(je.d(1),je=null),k[7]!==""?Ne?Ne.p(k,B):(Ne=zr(k),Ne.c(),Ne.m(A,d)):Ne&&(Ne.d(1),Ne=null),(!ze||B[0]&64)&&S!==(S=k[6]!=="0"?"All Dimensions":"Dimension Count")&&we(T,S),(!ze||B[0]&256)&&O!==(O=k[8]==""?"Organism":"All Organisms")&&we(ne,O),B[0]&16){ft=Je(Object.keys(k[4]).sort());let oe;for(oe=0;oe<ft.length;oe+=1){const wt=Sr(k,ft,oe);Oe[oe]?Oe[oe].p(wt,B):(Oe[oe]=Lr(wt),Oe[oe].c(),Oe[oe].m(le,null))}for(;oe<Oe.length;oe+=1)Oe[oe].d(1);Oe.length=ft.length}(!ze||B[0]&256)&&G!==(G=k[8]==""?"Imaging Modality":"All Modalities")&&we(Y,G),B[0]&32&&(Vt=Je(Object.keys(k[5]).sort()),M=xr(M,B,Hn,1,k,Vt,V,P,mi,Mr,null,Ar));const _e={};B[0]&1024&&(_e.sortedBy=k[10]),B[0]&2048&&(_e.sortAscending=k[11]),Q.$set(_e);const rn={};B[0]&1024&&(rn.sortedBy=k[10]),B[0]&2048&&(rn.sortAscending=k[11]),pe.$set(rn);const sn={};B[0]&1024&&(sn.sortedBy=k[10]),B[0]&2048&&(sn.sortAscending=k[11]),ke.$set(sn);const on={};B[0]&1024&&(on.sortedBy=k[10]),B[0]&2048&&(on.sortAscending=k[11]),te.$set(on);const ln={};B[0]&1024&&(ln.sortedBy=k[10]),B[0]&2048&&(ln.sortAscending=k[11]),Te.$set(ln);const an={};B[0]&1024&&(an.sortedBy=k[10]),B[0]&2048&&(an.sortAscending=k[11]),Fe.$set(an),(!ze||B[0]&1)&&Be!==(Be=k[0].length+"")&&we(Se,Be);const un={};B[0]&1&&(un.tableRows=k[0]),B[0]&512&&(un.textFilter=k[9]),Ye.$set(un)},i(k){if(!ze){ce(n.$$.fragment,k);for(let B=0;B<ot.length;B+=1)ce(de[B]);ce(Q.$$.fragment,k),ce(pe.$$.fragment,k),ce(ke.$$.fragment,k),ce(te.$$.fragment,k),ce(Te.$$.fragment,k),ce(Fe.$$.fragment,k),ce(Ye.$$.fragment,k),ze=!0}},o(k){me(n.$$.fragment,k),de=de.filter(Boolean);for(let B=0;B<de.length;B+=1)me(de[B]);me(Q.$$.fragment,k),me(pe.$$.fragment,k),me(ke.$$.fragment,k),me(te.$$.fragment,k),me(Te.$$.fragment,k),me(Fe.$$.fragment,k),me(Ye.$$.fragment,k),ze=!1},d(k){k&&ye(e),We(n),Yt(de,k),je&&je.d(),Ne&&Ne.d(),Yt(Oe,k);for(let B=0;B<M.length;B+=1)M[B].d();We(Q),We(pe),We(ke),We(te),We(Te),We(Fe),We(Ye),nn=!1,nt(Vn)}}}function Fr(t){return t.split("/").pop().replace(".csv","").replace("_samples","")}function lo(t,e,n){let i=new URLSearchParams(window.location.search).get("csv");try{new URL(i)}catch{i=Ii}let s=[],o=[],l=0,c=0,f={},h={},p="0",g="",w="",v="",E="",z="";xe.subscribe(_=>{n(0,s=U(_)),n(1,o=xe.getCsvSourceList()),n(2,l=_.length),n(3,c=_.reduce((y,S)=>y+parseInt(S.written)||0,0))}),Yr.subscribe(_=>{let y={};for(const[S,T]of Object.entries(_))y[T]=S;n(4,f=y)}),Qr.subscribe(_=>{let y={};for(const[S,T]of Object.entries(_))y[T]=S;n(5,h=y)}),i&&Wr(i,xe);let D="",W=!0;function x(_){D===_?n(11,W=!W):n(11,W=!1),n(10,D=_),xe.sortTable(_,W)}function U(_){if(p!=="0"&&(_=_.filter(y=>y.dim_count==p)),w!=="")_=_.filter(y=>y.csv==w);else if(g!==""){let y=xe.getCsvSourceList(g),S=[g,...y.map(T=>T.source)];_=_.filter(T=>S.includes(T.source))}return v!==""&&(_=_.filter(y=>y.organismId==v)),E!=""&&(_=_.filter(y=>y.fbbiId==E)),z!=""&&(_=_.filter(y=>{var S,T;return((S=y.description)==null?void 0:S.includes(z))||((T=y.name)==null?void 0:T.includes(z))})),_}function j(_){n(7,g=_.target.value),w="",n(0,s=U(xe.getRows()))}function $(_){n(6,p=_.target.value),n(0,s=U(xe.getRows()))}function A(_){w=_.target.value,n(0,s=U(xe.getRows()))}function u(_){n(8,v=_.target.value),n(0,s=U(xe.getRows()))}function a(_){E=_.target.value,n(0,s=U(xe.getRows()))}function d(_){n(9,z=_.target.value),n(0,s=U(xe.getRows()))}return t.$$.update=()=>{t.$$.dirty[0]&1&&s.some(_=>_.source)},[s,o,l,c,f,h,p,g,v,z,D,W,x,j,$,A,u,a,d]}class ao extends it{constructor(e){super(),rt(this,e,lo,oo,$e,{},null,[-1,-1])}}new ao({target:document.getElementById("app")});
