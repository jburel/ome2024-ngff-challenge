const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-E49GQuAK.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/gzip-CF-9a_hd.js","assets/browser-B-ZyVB-j.js","assets/lz4-BIGKWw27.js","assets/zlib-CBiqHlio.js","assets/zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var ti=Object.defineProperty;var qn=t=>{throw TypeError(t)};var ni=(t,e,n)=>e in t?ti(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Q=(t,e,n)=>ni(t,typeof e!="symbol"?e+"":e,n),cn=(t,e,n)=>e.has(t)||qn("Cannot "+n);var W=(t,e,n)=>(cn(t,e,"read from private field"),n?n.call(t):e.get(t)),be=(t,e,n)=>e.has(t)?qn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ge=(t,e,n,r)=>(cn(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),fn=(t,e,n)=>(cn(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ke(){}function ri(t,e){for(const n in e)t[n]=e[n];return t}function jr(t){return t()}function Kn(){return Object.create(null)}function nt(t){t.forEach(jr)}function Cn(t){return typeof t=="function"}function $e(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ht;function _n(t,e){return t===e?!0:(Ht||(Ht=document.createElement("a")),Ht.href=e,t===Ht.href)}function ii(t){return Object.keys(t).length===0}function si(t,...e){if(t==null){for(const r of e)r(void 0);return ke}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function qt(t){let e;return si(t,n=>e=n)(),e}function gn(t,e,n,r){if(t){const i=Nr(t,e,n,r);return t[0](i)}}function Nr(t,e,n,r){return t[1]&&r?ri(n.ctx.slice(),t[1](r(e))):n.ctx}function mn(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(e.dirty.length,i.length);for(let l=0;l<o;l+=1)s[l]=e.dirty[l]|i[l];return s}return e.dirty|i}return e.dirty}function pn(t,e,n,r,i,s){if(i){const o=Nr(e,n,r,s);t.p(o,i)}}function yn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function m(t,e){t.appendChild(e)}function ve(t,e,n){t.insertBefore(e,n||null)}function ye(t){t.parentNode&&t.parentNode.removeChild(t)}function Yt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function O(t){return document.createElement(t)}function re(t){return document.createTextNode(t)}function ee(){return re(" ")}function Pr(){return re("")}function Ze(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function T(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function oi(t){return Array.from(t.childNodes)}function Ie(t,e){e=""+e,t.data!==e&&(t.data=e)}function Pe(t,e){t.value=e??""}function Qe(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function mt(t,e,n){t.classList.toggle(e,!!n)}function li(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}let It;function St(t){It=t}function Tn(){if(!It)throw new Error("Function called outside component initialization");return It}function Rn(t){Tn().$$.on_mount.push(t)}function ai(t){Tn().$$.on_destroy.push(t)}function ui(){const t=Tn();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=li(e,n,{cancelable:r});return i.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const gt=[],Qt=[];let pt=[];const Jn=[],ci=Promise.resolve();let bn=!1;function fi(){bn||(bn=!0,ci.then(Le))}function Ct(t){pt.push(t)}const hn=new Set;let ht=0;function Le(){if(ht!==0)return;const t=It;do{try{for(;ht<gt.length;){const e=gt[ht];ht++,St(e),hi(e.$$)}}catch(e){throw gt.length=0,ht=0,e}for(St(null),gt.length=0,ht=0;Qt.length;)Qt.pop()();for(let e=0;e<pt.length;e+=1){const n=pt[e];hn.has(n)||(hn.add(n),n())}pt.length=0}while(gt.length);for(;Jn.length;)Jn.pop()();bn=!1,hn.clear(),St(t)}function hi(t){if(t.fragment!==null){t.update(),nt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ct)}}function di(t){const e=[],n=[];pt.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),pt=e}const Kt=new Set;let lt;function zn(){lt={r:0,c:[],p:lt}}function On(){lt.r||nt(lt.c),lt=lt.p}function ce(t,e){t&&t.i&&(Kt.delete(t),t.i(e))}function me(t,e,n,r){if(t&&t.o){if(Kt.has(t))return;Kt.add(t),lt.c.push(()=>{Kt.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Je(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function _i(t,e){t.d(1),e.delete(t.key)}function gi(t,e){me(t,1,1,()=>{e.delete(t.key)})}function Br(t,e,n,r,i,s,o,l,c,h,f,b){let g=t.length,v=s.length,y=g;const k={};for(;y--;)k[t[y].key]=y;const R=[],D=new Map,H=new Map,U=[];for(y=v;y--;){const E=b(i,s,y),u=n(E);let a=o.get(u);a?U.push(()=>a.p(E,e)):(a=h(u,E),a.c()),D.set(u,R[y]=a),u in k&&H.set(u,Math.abs(y-k[u]))}const j=new Set,P=new Set;function Z(E){ce(E,1),E.m(l,f),o.set(E.key,E),f=E.first,v--}for(;g&&v;){const E=R[v-1],u=t[g-1],a=E.key,d=u.key;E===u?(f=E.first,g--,v--):D.has(d)?!o.has(a)||j.has(a)?Z(E):P.has(d)?g--:H.get(a)>H.get(d)?(P.add(a),Z(E)):(j.add(d),g--):(c(u,o),g--)}for(;g--;){const E=t[g];D.has(E.key)||c(E,o)}for(;v;)Z(R[v-1]);return nt(U),R}function Ke(t){t&&t.c()}function He(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),Ct(()=>{const s=t.$$.on_mount.map(jr).filter(Cn);t.$$.on_destroy?t.$$.on_destroy.push(...s):nt(s),t.$$.on_mount=[]}),i.forEach(Ct)}function We(t,e){const n=t.$$;n.fragment!==null&&(di(n.after_update),nt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function mi(t,e){t.$$.dirty[0]===-1&&(gt.push(t),fi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function rt(t,e,n,r,i,s,o=null,l=[-1]){const c=It;St(t);const h=t.$$={fragment:null,ctx:[],props:s,update:ke,not_equal:i,bound:Kn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Kn(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};o&&o(h.root);let f=!1;if(h.ctx=n?n(t,e.props||{},(b,g,...v)=>{const y=v.length?v[0]:g;return h.ctx&&i(h.ctx[b],h.ctx[b]=y)&&(!h.skip_bound&&h.bound[b]&&h.bound[b](y),f&&mi(t,b)),g}):[],h.update(),f=!0,nt(h.before_update),h.fragment=r?r(h.ctx):!1,e.target){if(e.hydrate){const b=oi(e.target);h.fragment&&h.fragment.l(b),b.forEach(ye)}else h.fragment&&h.fragment.c();e.intro&&ce(t.$$.fragment),He(t,e.target,e.anchor),Le()}St(c)}class it{constructor(){Q(this,"$$");Q(this,"$$set")}$destroy(){We(this,1),this.$destroy=ke}$on(e,n){if(!Cn(n))return ke;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!ii(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const pi="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(pi);const dt=[];function Ur(t,e=ke){let n;const r=new Set;function i(l){if($e(t,l)&&(t=l,n)){const c=!dt.length;for(const h of r)h[1](),dt.push(h,t);if(c){for(let h=0;h<dt.length;h+=2)dt[h][0](dt[h+1]);dt.length=0}}}function s(l){i(l(t))}function o(l,c=ke){const h=[l,c];return r.add(h),r.size===1&&(n=e(i,s)||ke),l(t),()=>{r.delete(h),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}var yi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xr={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,r){t.exports=r()})(yi,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,o={},l=0,c={parse:function(u,a){var d=(a=a||{}).dynamicTyping||!1;if(E(d)&&(a.dynamicTypingFunction=d,d={}),a.dynamicTyping=d,a.transform=!!E(a.transform)&&a.transform,a.worker&&c.WORKERS_SUPPORTED){var _=function(){if(!c.WORKERS_SUPPORTED)return!1;var I=(x=r.URL||r.webkitURL||null,F=n.toString(),c.BLOB_URL||(c.BLOB_URL=x.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",F,")();"],{type:"text/javascript"})))),A=new r.Worker(I),x,F;return A.onmessage=H,A.id=l++,o[A.id]=A}();return _.userStep=a.step,_.userChunk=a.chunk,_.userComplete=a.complete,_.userError=a.error,a.step=E(a.step),a.chunk=E(a.chunk),a.complete=E(a.complete),a.error=E(a.error),delete a.worker,void _.postMessage({input:u,config:a,workerId:_.id})}var p=null;return c.NODE_STREAM_INPUT,typeof u=="string"?(u=function(I){return I.charCodeAt(0)===65279?I.slice(1):I}(u),p=a.download?new b(a):new v(a)):u.readable===!0&&E(u.read)&&E(u.on)?p=new y(a):(r.File&&u instanceof File||u instanceof Object)&&(p=new g(a)),p.stream(u)},unparse:function(u,a){var d=!1,_=!0,p=",",I=`\r
`,A='"',x=A+A,F=!1,S=null,q=!1;(function(){if(typeof a=="object"){if(typeof a.delimiter!="string"||c.BAD_DELIMITERS.filter(function(z){return a.delimiter.indexOf(z)!==-1}).length||(p=a.delimiter),(typeof a.quotes=="boolean"||typeof a.quotes=="function"||Array.isArray(a.quotes))&&(d=a.quotes),typeof a.skipEmptyLines!="boolean"&&typeof a.skipEmptyLines!="string"||(F=a.skipEmptyLines),typeof a.newline=="string"&&(I=a.newline),typeof a.quoteChar=="string"&&(A=a.quoteChar),typeof a.header=="boolean"&&(_=a.header),Array.isArray(a.columns)){if(a.columns.length===0)throw new Error("Option columns is empty");S=a.columns}a.escapeChar!==void 0&&(x=a.escapeChar+A),(typeof a.escapeFormulae=="boolean"||a.escapeFormulae instanceof RegExp)&&(q=a.escapeFormulae instanceof RegExp?a.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var M=new RegExp(R(A),"g");if(typeof u=="string"&&(u=JSON.parse(u)),Array.isArray(u)){if(!u.length||Array.isArray(u[0]))return le(null,u,F);if(typeof u[0]=="object")return le(S||Object.keys(u[0]),u,F)}else if(typeof u=="object")return typeof u.data=="string"&&(u.data=JSON.parse(u.data)),Array.isArray(u.data)&&(u.fields||(u.fields=u.meta&&u.meta.fields||S),u.fields||(u.fields=Array.isArray(u.data[0])?u.fields:typeof u.data[0]=="object"?Object.keys(u.data[0]):[]),Array.isArray(u.data[0])||typeof u.data[0]=="object"||(u.data=[u.data])),le(u.fields||[],u.data||[],F);throw new Error("Unable to serialize unrecognized input");function le(z,te,C){var N="";typeof z=="string"&&(z=JSON.parse(z)),typeof te=="string"&&(te=JSON.parse(te));var K=Array.isArray(z)&&0<z.length,J=!Array.isArray(te[0]);if(K&&_){for(var G=0;G<z.length;G++)0<G&&(N+=p),N+=ae(z[G],G);0<te.length&&(N+=I)}for(var L=0;L<te.length;L++){var V=K?z.length:te[L].length,ie=!1,fe=K?Object.keys(te[L]).length===0:te[L].length===0;if(C&&!K&&(ie=C==="greedy"?te[L].join("").trim()==="":te[L].length===1&&te[L][0].length===0),C==="greedy"&&K){for(var se=[],X=0;X<V;X++){var ue=J?z[X]:X;se.push(te[L][ue])}ie=se.join("").trim()===""}if(!ie){for(var Y=0;Y<V;Y++){0<Y&&!fe&&(N+=p);var Me=K&&J?z[Y]:Y;N+=ae(te[L][Me],Y)}L<te.length-1&&(!C||0<V&&!fe)&&(N+=I)}}return N}function ae(z,te){if(z==null)return"";if(z.constructor===Date)return JSON.stringify(z).slice(1,25);var C=!1;q&&typeof z=="string"&&q.test(z)&&(z="'"+z,C=!0);var N=z.toString().replace(M,x);return(C=C||d===!0||typeof d=="function"&&d(z,te)||Array.isArray(d)&&d[te]||function(K,J){for(var G=0;G<J.length;G++)if(-1<K.indexOf(J[G]))return!0;return!1}(N,c.BAD_DELIMITERS)||-1<N.indexOf(p)||N.charAt(0)===" "||N.charAt(N.length-1)===" ")?A+N+A:N}}};if(c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!r.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=D,c.ParserHandle=k,c.NetworkStreamer=b,c.FileStreamer=g,c.StringStreamer=v,c.ReadableStreamStreamer=y,r.jQuery){var h=r.jQuery;h.fn.parse=function(u){var a=u.config||{},d=[];return this.each(function(I){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var A=0;A<this.files.length;A++)d.push({file:this.files[A],inputElem:this,instanceConfig:h.extend({},a)})}),_(),this;function _(){if(d.length!==0){var I,A,x,F,S=d[0];if(E(u.before)){var q=u.before(S.file,S.inputElem);if(typeof q=="object"){if(q.action==="abort")return I="AbortError",A=S.file,x=S.inputElem,F=q.reason,void(E(u.error)&&u.error({name:I},A,x,F));if(q.action==="skip")return void p();typeof q.config=="object"&&(S.instanceConfig=h.extend(S.instanceConfig,q.config))}else if(q==="skip")return void p()}var M=S.instanceConfig.complete;S.instanceConfig.complete=function(le){E(M)&&M(le,S.file,S.inputElem),p()},c.parse(S.file,S.instanceConfig)}else E(u.complete)&&u.complete()}function p(){d.splice(0,1),_()}}}function f(u){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(a){var d=P(a);d.chunkSize=parseInt(d.chunkSize),a.step||a.chunk||(d.chunkSize=null),this._handle=new k(d),(this._handle.streamer=this)._config=d}).call(this,u),this.parseChunk=function(a,d){if(this.isFirstChunk&&E(this._config.beforeFirstChunk)){var _=this._config.beforeFirstChunk(a);_!==void 0&&(a=_)}this.isFirstChunk=!1,this._halted=!1;var p=this._partialLine+a;this._partialLine="";var I=this._handle.parse(p,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var A=I.meta.cursor;this._finished||(this._partialLine=p.substring(A-this._baseIndex),this._baseIndex=A),I&&I.data&&(this._rowCount+=I.data.length);var x=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)r.postMessage({results:I,workerId:c.WORKER_ID,finished:x});else if(E(this._config.chunk)&&!d){if(this._config.chunk(I,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);I=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(I.data),this._completeResults.errors=this._completeResults.errors.concat(I.errors),this._completeResults.meta=I.meta),this._completed||!x||!E(this._config.complete)||I&&I.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),x||I&&I.meta.paused||this._nextChunk(),I}this._halted=!0},this._sendError=function(a){E(this._config.error)?this._config.error(a):s&&this._config.error&&r.postMessage({workerId:c.WORKER_ID,error:a,finished:!1})}}function b(u){var a;(u=u||{}).chunkSize||(u.chunkSize=c.RemoteChunkSize),f.call(this,u),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(d){this._input=d,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(a=new XMLHttpRequest,this._config.withCredentials&&(a.withCredentials=this._config.withCredentials),i||(a.onload=Z(this._chunkLoaded,this),a.onerror=Z(this._chunkError,this)),a.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var d=this._config.downloadRequestHeaders;for(var _ in d)a.setRequestHeader(_,d[_])}if(this._config.chunkSize){var p=this._start+this._config.chunkSize-1;a.setRequestHeader("Range","bytes="+this._start+"-"+p)}try{a.send(this._config.downloadRequestBody)}catch(I){this._chunkError(I.message)}i&&a.status===0&&this._chunkError()}},this._chunkLoaded=function(){a.readyState===4&&(a.status<200||400<=a.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:a.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(d){var _=d.getResponseHeader("Content-Range");return _===null?-1:parseInt(_.substring(_.lastIndexOf("/")+1))}(a),this.parseChunk(a.responseText)))},this._chunkError=function(d){var _=a.statusText||d;this._sendError(new Error(_))}}function g(u){var a,d;(u=u||{}).chunkSize||(u.chunkSize=c.LocalChunkSize),f.call(this,u);var _=typeof FileReader<"u";this.stream=function(p){this._input=p,d=p.slice||p.webkitSlice||p.mozSlice,_?((a=new FileReader).onload=Z(this._chunkLoaded,this),a.onerror=Z(this._chunkError,this)):a=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var p=this._input;if(this._config.chunkSize){var I=Math.min(this._start+this._config.chunkSize,this._input.size);p=d.call(p,this._start,I)}var A=a.readAsText(p,this._config.encoding);_||this._chunkLoaded({target:{result:A}})},this._chunkLoaded=function(p){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(p.target.result)},this._chunkError=function(){this._sendError(a.error)}}function v(u){var a;f.call(this,u=u||{}),this.stream=function(d){return a=d,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var d,_=this._config.chunkSize;return _?(d=a.substring(0,_),a=a.substring(_)):(d=a,a=""),this._finished=!a,this.parseChunk(d)}}}function y(u){f.call(this,u=u||{});var a=[],d=!0,_=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(p){this._input=p,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){_&&a.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),a.length?this.parseChunk(a.shift()):d=!0},this._streamData=Z(function(p){try{a.push(typeof p=="string"?p:p.toString(this._config.encoding)),d&&(d=!1,this._checkIsFinished(),this.parseChunk(a.shift()))}catch(I){this._streamError(I)}},this),this._streamError=Z(function(p){this._streamCleanUp(),this._sendError(p)},this),this._streamEnd=Z(function(){this._streamCleanUp(),_=!0,this._streamData("")},this),this._streamCleanUp=Z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function k(u){var a,d,_,p=Math.pow(2,53),I=-p,A=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,x=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,F=this,S=0,q=0,M=!1,le=!1,ae=[],z={data:[],errors:[],meta:{}};if(E(u.step)){var te=u.step;u.step=function(L){if(z=L,K())N();else{if(N(),z.data.length===0)return;S+=L.data.length,u.preview&&S>u.preview?d.abort():(z.data=z.data[0],te(z,F))}}}function C(L){return u.skipEmptyLines==="greedy"?L.join("").trim()==="":L.length===1&&L[0].length===0}function N(){return z&&_&&(G("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),_=!1),u.skipEmptyLines&&(z.data=z.data.filter(function(L){return!C(L)})),K()&&function(){if(!z)return;function L(ie,fe){E(u.transformHeader)&&(ie=u.transformHeader(ie,fe)),ae.push(ie)}if(Array.isArray(z.data[0])){for(var V=0;K()&&V<z.data.length;V++)z.data[V].forEach(L);z.data.splice(0,1)}else z.data.forEach(L)}(),function(){if(!z||!u.header&&!u.dynamicTyping&&!u.transform)return z;function L(ie,fe){var se,X=u.header?{}:[];for(se=0;se<ie.length;se++){var ue=se,Y=ie[se];u.header&&(ue=se>=ae.length?"__parsed_extra":ae[se]),u.transform&&(Y=u.transform(Y,ue)),Y=J(ue,Y),ue==="__parsed_extra"?(X[ue]=X[ue]||[],X[ue].push(Y)):X[ue]=Y}return u.header&&(se>ae.length?G("FieldMismatch","TooManyFields","Too many fields: expected "+ae.length+" fields but parsed "+se,q+fe):se<ae.length&&G("FieldMismatch","TooFewFields","Too few fields: expected "+ae.length+" fields but parsed "+se,q+fe)),X}var V=1;return!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(L),V=z.data.length):z.data=L(z.data,0),u.header&&z.meta&&(z.meta.fields=ae),q+=V,z}()}function K(){return u.header&&ae.length===0}function J(L,V){return ie=L,u.dynamicTypingFunction&&u.dynamicTyping[ie]===void 0&&(u.dynamicTyping[ie]=u.dynamicTypingFunction(ie)),(u.dynamicTyping[ie]||u.dynamicTyping)===!0?V==="true"||V==="TRUE"||V!=="false"&&V!=="FALSE"&&(function(fe){if(A.test(fe)){var se=parseFloat(fe);if(I<se&&se<p)return!0}return!1}(V)?parseFloat(V):x.test(V)?new Date(V):V===""?null:V):V;var ie}function G(L,V,ie,fe){var se={type:L,code:V,message:ie};fe!==void 0&&(se.row=fe),z.errors.push(se)}this.parse=function(L,V,ie){var fe=u.quoteChar||'"';if(u.newline||(u.newline=function(ue,Y){ue=ue.substring(0,1048576);var Me=new RegExp(R(Y)+"([^]*?)"+R(Y),"gm"),pe=(ue=ue.replace(Me,"")).split("\r"),Be=ue.split(`
`),we=1<Be.length&&Be[0].length<pe[0].length;if(pe.length===1||we)return`
`;for(var Ce=0,$=0;$<pe.length;$++)pe[$][0]===`
`&&Ce++;return Ce>=pe.length/2?`\r
`:"\r"}(L,fe)),_=!1,u.delimiter)E(u.delimiter)&&(u.delimiter=u.delimiter(L),z.meta.delimiter=u.delimiter);else{var se=function(ue,Y,Me,pe,Be){var we,Ce,$,he;Be=Be||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Te=0;Te<Be.length;Te++){var ne=Be[Te],Fe=0,qe=0,De=0;$=void 0;for(var Ee=new D({comments:pe,delimiter:ne,newline:Y,preview:10}).parse(ue),Ge=0;Ge<Ee.data.length;Ge++)if(Me&&C(Ee.data[Ge]))De++;else{var Ue=Ee.data[Ge].length;qe+=Ue,$!==void 0?0<Ue&&(Fe+=Math.abs(Ue-$),$=Ue):$=Ue}0<Ee.data.length&&(qe/=Ee.data.length-De),(Ce===void 0||Fe<=Ce)&&(he===void 0||he<qe)&&1.99<qe&&(Ce=Fe,we=ne,he=qe)}return{successful:!!(u.delimiter=we),bestDelimiter:we}}(L,u.newline,u.skipEmptyLines,u.comments,u.delimitersToGuess);se.successful?u.delimiter=se.bestDelimiter:(_=!0,u.delimiter=c.DefaultDelimiter),z.meta.delimiter=u.delimiter}var X=P(u);return u.preview&&u.header&&X.preview++,a=L,d=new D(X),z=d.parse(a,V,ie),N(),M?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return M},this.pause=function(){M=!0,d.abort(),a=E(u.chunk)?"":a.substring(d.getCharIndex())},this.resume=function(){F.streamer._halted?(M=!1,F.streamer.parseChunk(a,!0)):setTimeout(F.resume,3)},this.aborted=function(){return le},this.abort=function(){le=!0,d.abort(),z.meta.aborted=!0,E(u.complete)&&u.complete(z),a=""}}function R(u){return u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function D(u){var a,d=(u=u||{}).delimiter,_=u.newline,p=u.comments,I=u.step,A=u.preview,x=u.fastMode,F=a=u.quoteChar===void 0||u.quoteChar===null?'"':u.quoteChar;if(u.escapeChar!==void 0&&(F=u.escapeChar),(typeof d!="string"||-1<c.BAD_DELIMITERS.indexOf(d))&&(d=","),p===d)throw new Error("Comment character same as delimiter");p===!0?p="#":(typeof p!="string"||-1<c.BAD_DELIMITERS.indexOf(p))&&(p=!1),_!==`
`&&_!=="\r"&&_!==`\r
`&&(_=`
`);var S=0,q=!1;this.parse=function(M,le,ae){if(typeof M!="string")throw new Error("Input must be a string");var z=M.length,te=d.length,C=_.length,N=p.length,K=E(I),J=[],G=[],L=[],V=S=0;if(!M)return Ae();if(u.header&&!le){var ie=M.split(_)[0].split(d),fe=[],se={},X=!1;for(var ue in ie){var Y=ie[ue];E(u.transformHeader)&&(Y=u.transformHeader(Y,ue));var Me=Y,pe=se[Y]||0;for(0<pe&&(X=!0,Me=Y+"_"+pe),se[Y]=pe+1;fe.includes(Me);)Me=Me+"_"+pe;fe.push(Me)}if(X){var Be=M.split(_);Be[0]=fe.join(d),M=Be.join(_)}}if(x||x!==!1&&M.indexOf(a)===-1){for(var we=M.split(_),Ce=0;Ce<we.length;Ce++){if(L=we[Ce],S+=L.length,Ce!==we.length-1)S+=_.length;else if(ae)return Ae();if(!p||L.substring(0,N)!==p){if(K){if(J=[],De(L.split(d)),st(),q)return Ae()}else De(L.split(d));if(A&&A<=Ce)return J=J.slice(0,A),Ae(!0)}}return Ae()}for(var $=M.indexOf(d,S),he=M.indexOf(_,S),Te=new RegExp(R(F)+R(a),"g"),ne=M.indexOf(a,S);;)if(M[S]!==a)if(p&&L.length===0&&M.substring(S,S+N)===p){if(he===-1)return Ae();S=he+C,he=M.indexOf(_,S),$=M.indexOf(d,S)}else if($!==-1&&($<he||he===-1))L.push(M.substring(S,$)),S=$+te,$=M.indexOf(d,S);else{if(he===-1)break;if(L.push(M.substring(S,he)),Ue(he+C),K&&(st(),q))return Ae();if(A&&J.length>=A)return Ae(!0)}else for(ne=S,S++;;){if((ne=M.indexOf(a,ne+1))===-1)return ae||G.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:J.length,index:S}),Ge();if(ne===z-1)return Ge(M.substring(S,ne).replace(Te,a));if(a!==F||M[ne+1]!==F){if(a===F||ne===0||M[ne-1]!==F){$!==-1&&$<ne+1&&($=M.indexOf(d,ne+1)),he!==-1&&he<ne+1&&(he=M.indexOf(_,ne+1));var Fe=Ee(he===-1?$:Math.min($,he));if(M.substr(ne+1+Fe,te)===d){L.push(M.substring(S,ne).replace(Te,a)),M[S=ne+1+Fe+te]!==a&&(ne=M.indexOf(a,S)),$=M.indexOf(d,S),he=M.indexOf(_,S);break}var qe=Ee(he);if(M.substring(ne+1+qe,ne+1+qe+C)===_){if(L.push(M.substring(S,ne).replace(Te,a)),Ue(ne+1+qe+C),$=M.indexOf(d,S),ne=M.indexOf(a,S),K&&(st(),q))return Ae();if(A&&J.length>=A)return Ae(!0);break}G.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:J.length,index:S}),ne++}}else ne++}return Ge();function De(Re){J.push(Re),V=S}function Ee(Re){var Ye=0;if(Re!==-1){var ze=M.substring(ne+1,Re);ze&&ze.trim()===""&&(Ye=ze.length)}return Ye}function Ge(Re){return ae||(Re===void 0&&(Re=M.substring(S)),L.push(Re),S=z,De(L),K&&st()),Ae()}function Ue(Re){S=Re,De(L),L=[],he=M.indexOf(_,S)}function Ae(Re){return{data:J,errors:G,meta:{delimiter:d,linebreak:_,aborted:q,truncated:!!Re,cursor:V+(le||0)}}}function st(){I(Ae()),J=[],G=[]}},this.abort=function(){q=!0},this.getCharIndex=function(){return S}}function H(u){var a=u.data,d=o[a.workerId],_=!1;if(a.error)d.userError(a.error,a.file);else if(a.results&&a.results.data){var p={abort:function(){_=!0,U(a.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(E(d.userStep)){for(var I=0;I<a.results.data.length&&(d.userStep({data:a.results.data[I],errors:a.results.errors,meta:a.results.meta},p),!_);I++);delete a.results}else E(d.userChunk)&&(d.userChunk(a.results,p,a.file),delete a.results)}a.finished&&!_&&U(a.workerId,a.results)}function U(u,a){var d=o[u];E(d.userComplete)&&d.userComplete(a),d.terminate(),delete o[u]}function j(){throw new Error("Not implemented.")}function P(u){if(typeof u!="object"||u===null)return u;var a=Array.isArray(u)?[]:{};for(var d in u)a[d]=P(u[d]);return a}function Z(u,a){return function(){u.apply(a,arguments)}}function E(u){return typeof u=="function"}return s&&(r.onmessage=function(u){var a=u.data;if(c.WORKER_ID===void 0&&a&&(c.WORKER_ID=a.workerId),typeof a.input=="string")r.postMessage({workerId:c.WORKER_ID,results:c.parse(a.input,a.config),finished:!0});else if(r.File&&a.input instanceof File||a.input instanceof Object){var d=c.parse(a.input,a.config);d&&r.postMessage({workerId:c.WORKER_ID,results:d,finished:!0})}}),(b.prototype=Object.create(f.prototype)).constructor=b,(g.prototype=Object.create(f.prototype)).constructor=g,(v.prototype=Object.create(v.prototype)).constructor=v,(y.prototype=Object.create(f.prototype)).constructor=y,c})})(xr);var vi=xr.exports;const wi=bi(vi),ki="https://jburel.github.io/ome2024-ngff-challenge/idr-mark.svg",Ei="https://jburel.github.io/ome2024-ngff-challenge/nfdi4bioimage.png",Ai="https://raw.githubusercontent.com/will-moore/ome2024-ngff-challenge/hierarchy_browser/samples/ngff_samples.csv";let Si={IDR:"https://idr.openmicroscopy.org",Webknossos:"https://scalableminds.com",JAX:"http://jax.org","BioImage Archive":"https://www.ebi.ac.uk",Crick:"https://www.crick.ac.uk/","University of Muenster":"https://nfdi4bioimage.de/",Göttingen:"https://nfdi4bioimage.de/",Jülich:"https://nfdi4bioimage.de/",NFDI4BIOIMAGE:"https://nfdi4bioimage.de/"};function Gn(t){if(t==="IDR")return ki;let e=Si[t];return e?e==="https://nfdi4bioimage.de/"?Ei:`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${e}&size=24`:null}function Vr(t,e,n={}){wi.parse(t,{header:!1,download:!0,skipEmptyLines:"greedy",complete:function(r){let i=["url"],s=r.data[0];s.length>1&&(i=s,r.data.shift());let o=r.data.map(f=>{let b={...n};for(let g=0;g<i.length;g++)b[i[g]]=f[g];return b}),l=o.filter(f=>{var b;return!((b=f.url)!=null&&b.endsWith(".csv"))}),c={};l.forEach(f=>{if(c[f.url]){console.warn("Removing duplicate URL:",f.url);return}c[f.url]=f}),l=Object.values(c);let h=o.filter(f=>{var b;return(b=f.url)==null?void 0:b.includes(".csv")});e.addCsv(t,h,l.length),e.addRows(l),h.forEach(f=>{let b=f.url;f.csv=b,Vr(b,e,f)})}})}async function Hr(t){return await fetch(t).then(e=>e.json())}function Yn(t){return Math.floor(Math.random()*t)}function Zt(t){if(!t)return"";const e=2;return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(e)+" KB":t<1024*1024*1024?(t/(1024*1024)).toFixed(e)+" MB":t<1024*1024*1024*1024?(t/(1024*1024*1024)).toFixed(e)+" GB":t<1024*1024*1024*1024*1024?(t/(1024*1024*1024*1024)).toFixed(e)+" TB":(t/(1024*1024*1024*1024*1024)).toFixed(e)+" PB"}function Ii(t,e){return Array.from({length:e-t},(n,r)=>r+t)}function Ci(t,e,n){const r=t[0].shape,i=r[0],s=r[1],o=i*s;e||(e=t.map(Wr));const l=new Uint8ClampedArray(4*i*s).fill(0);let c=0;for(let h=0;h<o;h++){for(let f=0;f<t.length;f++){let b=n[f],g=t[f].data,v=e[f],k=(g[h]-v[0])/(v[1]-v[0]);for(let R=0;R<3;R++){let D=k*b[R]<<0;l[c*4+R]=Math.max(l[c*4+R],D)}}l[c*4+3]=255,c+=1}return l}function Wr(t){const e=t.data;let n=0,r=1/0,i=t.data.length;for(let s=0;s<i;s++){let o=e[s];n=Math.max(n,o),r=Math.min(r,o)}return[r,n]}const Jt=4,tt={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},Ti=[tt.magenta,tt.green],Ri=[tt.red,tt.green,tt.blue],Qn=Object.values(tt).slice(0,-2);function zi(t){let e;return t<=Jt?e=Array(t).fill(!0):e=[...Array(Jt).fill(!0),...Array(t-Jt).fill(!1)],e}function Oi(t,e){let n=[];if(t==1)n=[tt.white];else if(t==2)n=Ti;else if(t===3)n=Ri;else if(t<=Jt)n=Qn.slice(0,t);else{n=Array(t).fill(tt.white);const r=e.flatMap((i,s)=>i?s:[]);for(const[i,s]of r.entries())n[s]=Qn[i]}return n.map(qr)}function qr(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),r=parseInt(t.slice(4,6),16);return[e,n,r]}class Kr{constructor(){this.store=Ur({})}async lookupOntologyTerm(e){let n=e.replace("NCBI:txid","");return(await Hr(`https://rest.ensembl.org/taxonomy/id/${n}?content-type=application/json`)).name||e}addTerms(e){let n=qt(this.store);[...new Set(e)].forEach(i=>{i&&(n[i]||(n[i]="Loading...",setTimeout(()=>{this.lookupOntologyTerm(i).then(s=>{this.addEntry(i,s)})},Math.random()*5e3)))})}addEntry(e,n){this.store.update(r=>(r[e]=n,r))}subscribe(e){return this.store.subscribe(e)}}class Li extends Kr{constructor(){super()}async lookupOntologyTerm(e){const n=e.replace("obo:","");return(await Hr(`https://www.ebi.ac.uk/ols4/api/ontologies/fbbi/terms/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252F${n}`)).label||e}}const Jr=new Kr,Gr=new Li,Zn=5;async function Xt(t){var r;let e=await fetch(`${t}/zarr.json`).then(i=>{if(i.status===404)throw new Error(`${t}/zarr.json not found`);return i.json()}).catch(i=>[void 0,t]);const n=(r=e==null?void 0:e.attributes)==null?void 0:r.ome;if(!n)return[void 0,t];if(n.multiscales)return[n,t];if(n.plate){let i=n.plate.wells[0],s=`${t}/${i.path}/0`,[o,l]=await Xt(s);return[o,l,n.plate]}else if(n["bioformats2raw.layout"]){let i=`${t}/0`;return await Xt(i)}}class Mi{constructor(e="rating",n=!1){this.store=Ur([]),this.sortColumn=e,this.sortAscending=n,this.csvFiles=[]}getCsvSourceList(e){let n;if(!e)n=this.csvFiles[0];else for(let i of this.csvFiles){if(i.source===e){n=i;break}for(let s of i.child_csv){if(s.source===e){n=s;break}for(let o of s.child_csv)if(o.source===e){n=o;break}}}return n?n.child_csv.map(i=>{let s=i.image_count||0;for(let o of i.child_csv)s+=o.image_count||0;return{...i,total_count:s}}):[]}addCsv(e,n,r){n=n.map(s=>({...s,child_csv:[]}));let i;for(let s of this.csvFiles){if(s.url===e){i=s;break}for(let o of s.child_csv){if(o.url===e){i=o;break}for(let l of o.child_csv)if(l.url===e){i=l;break}}}i?(i.image_count=r,i.child_csv=n):(i={url:e,image_count:r,child_csv:n},this.csvFiles.push(i))}addRows(e){e=e.map(i=>{if(i.written&&(i.written=parseFloat(i.written)),i.shape){let s=i.shape.split(",").map(l=>parseInt(l)),o;i.dimension_names?o=i.dimension_names.split(","):s.length==5&&(o=["t","c","z","y","x"]),o&&o.length==s.length&&o.forEach((l,c)=>i["size_"+l]=s[c]),i.dim_count=s.reduce((l,c)=>l+(c>1?1:0),0)}return i.rating=Math.random()*4,i}),e.length>1&&(e[Yn(e.length)].rating=10+Math.random()*5,e[Yn(e.length)].rating=5+Math.random()*5),console.log("Adding rows",e),this.store.update(i=>(i.push(...e),i.sort((s,o)=>this.compareRows(s,o,!0)),i));let n=e.map(i=>i.organismId);console.log("organismIds",n),Jr.addTerms(n);let r=e.map(i=>i.fbbiId);console.log("fbbiIds",r),Gr.addTerms(r)}populateRow(e,n){this.store.update(r=>(r=r.map(i=>(i.url===e&&(i={...i,...n}),i)),r))}async loadNgffMetadata(e){var g;const[n,r,i]=await Xt(e);let s=[],o=0,l=0,c=!1,h=!0,f={multiscales:n},b=r;if(i&&(o=i.wells.length,l=i.field_count||1),n){const v=(g=n[0])==null?void 0:g.datasets[0],y=v==null?void 0:v.path;if(y){const k=await fetch(`${r}/${y}/zarr.json`).then(R=>R.json()).catch(R=>{console.log(`----> Failed to parse ${r}/${y}/zarr.json`,R)});s=k==null?void 0:k.shape}}else console.log("No multiscales found"),c=!0,s=[0];this.populateRow(e,{image_attrs:f,image_url:b,shape:s,well_count:o,field_count:l,load_failed:c,loaded:h})}async loadRocrateJsonAllRows(){let e=qt(this.store);for(let n=0;n<e.length;n=n+Zn){let r=Ii(n,Math.min(n+Zn,e.length)).map(i=>this.loadRocrateJson(e[i].url));await Promise.all(r)}}compareRows(e,n,r=!1){let i=e[this.sortColumn],s=n[this.sortColumn];if(r)return i===void 0&&(i=0),s===void 0&&(s=0),i<s?this.sortAscending?-1:1:i>s?this.sortAscending?1:-1:0;i===void 0&&(i=""),s===void 0&&(s="");let o=0;return r?o=i-s:o=i.localeCompare(s),this.sortAscending?o:-o}sortTable(e,n=!0){this.sortColumn=e,this.sortAscending=n;let r=this.isColumnNumeric(e);this.store.update(i=>(i.sort((s,o)=>this.compareRows(s,o,r)),i))}isColumnNumeric(e){let n=qt(this.store);for(let r of n){let i=r[e];if(i!==void 0&&i!=="")return!isNaN(i)}}emptyTable(){this.store.set([])}subscribe(e){return this.store.subscribe(e)}getRows(){return qt(this.store)}}const xe=new Mi;function Fi(t){let e,n,r,i,s,o,l,c;return{c(){e=O("button"),n=re(t[1]),r=ee(),i=O("span"),i.textContent="^",s=ee(),o=O("span"),o.textContent="^",T(i,"class","acc svelte-x3kqyg"),mt(i,"strong",t[3]==t[0]&&t[4]),T(o,"class","dec svelte-x3kqyg"),mt(o,"strong",t[3]==t[0]&&!t[4]),T(e,"class","svelte-x3kqyg")},m(h,f){ve(h,e,f),m(e,n),m(e,r),m(e,i),m(e,s),m(e,o),l||(c=Ze(e,"click",t[5]),l=!0)},p(h,[f]){f&2&&Ie(n,h[1]),f&25&&mt(i,"strong",h[3]==h[0]&&h[4]),f&25&&mt(o,"strong",h[3]==h[0]&&!h[4])},i:ke,o:ke,d(h){h&&ye(e),l=!1,c()}}}function Di(t,e,n){let{col_name:r}=e,{col_label:i}=e,{handleSort:s}=e,{sortedBy:o}=e,{sortAscending:l}=e;const c=()=>s(r);return t.$$set=h=>{"col_name"in h&&n(0,r=h.col_name),"col_label"in h&&n(1,i=h.col_label),"handleSort"in h&&n(2,s=h.handleSort),"sortedBy"in h&&n(3,o=h.sortedBy),"sortAscending"in h&&n(4,l=h.sortAscending)},[r,i,s,o,l,c]}class _t extends it{constructor(e){super(),rt(this,e,Di,Fi,$e,{col_name:0,col_label:1,handleSort:2,sortedBy:3,sortAscending:4})}}const Wt={AUTO:"auto",START:"start",CENTER:"center",END:"end"},Xe={HORIZONTAL:"horizontal",VERTICAL:"vertical"},kt={OBSERVED:0,REQUESTED:1},ji={[Xe.VERTICAL]:"top",[Xe.HORIZONTAL]:"left"},Xn={[Xe.VERTICAL]:"scrollTop",[Xe.HORIZONTAL]:"scrollLeft"};class Ni{constructor({itemSize:e,itemCount:n,estimatedItemSize:r}){this.itemSize=e,this.itemCount=n,this.estimatedItemSize=r,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:n,estimatedItemSize:r}){n!=null&&(this.itemCount=n),r!=null&&(this.estimatedItemSize=r),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:n}=this;return typeof n=="function"?n(e):Array.isArray(n)?n[e]:n}computeTotalSizeAndPositionData(){let e=0;for(let n=0;n<this.itemCount;n++){const r=this.getSize(n),i=e;e+=r,this.itemSizeAndPositionData[n]={offset:i,size:r}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const n=this.getSizeAndPositionOfLastMeasuredItem();let r=n.offset+n.size;for(let i=this.lastMeasuredIndex+1;i<=e;i++){const s=this.getSize(i);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${i} of value ${s}`);this.itemSizeAndPositionData[i]={offset:r,size:s},r+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=Wt.START,containerSize:n,currentOffset:r,targetIndex:i}){if(n<=0)return 0;const s=this.getSizeAndPositionForIndex(i),o=s.offset,l=o-n+s.size;let c;switch(e){case Wt.END:c=l;break;case Wt.CENTER:c=o-(n-s.size)/2;break;case Wt.START:c=o;break;default:c=Math.max(l,Math.min(o,r))}const h=this.getTotalSize();return Math.max(0,Math.min(h-n,c))}getVisibleRange({containerSize:e=0,offset:n,overscanCount:r}){if(this.getTotalSize()===0)return{};const s=n+e;let o=this.findNearestItem(n);if(o===void 0)throw Error(`Invalid offset ${n} specified`);const l=this.getSizeAndPositionForIndex(o);n=l.offset+l.size;let c=o;for(;n<s&&c<this.itemCount-1;)c++,n+=this.getSizeAndPositionForIndex(c).size;return r&&(o=Math.max(0,o-r),c=Math.min(c+r,this.itemCount-1)),{start:o,stop:c}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const n=this.getSizeAndPositionOfLastMeasuredItem(),r=Math.max(0,this.lastMeasuredIndex);return n.offset>=e?this.binarySearch({high:r,low:0,offset:e}):this.exponentialSearch({index:r,offset:e})}binarySearch({low:e,high:n,offset:r}){let i=0,s=0;for(;e<=n;){if(i=e+Math.floor((n-e)/2),s=this.getSizeAndPositionForIndex(i).offset,s===r)return i;s<r?e=i+1:s>r&&(n=i-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:n}){let r=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<n;)e+=r,r*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:n})}}const Pi=t=>({}),$n=t=>({});function er(t,e,n){const r=t.slice();return r[37]=e[n],r}const Bi=t=>({style:t[0]&4,index:t[0]&4}),tr=t=>({style:t[37].style,index:t[37].index}),Ui=t=>({}),nr=t=>({});function rr(t,e){let n,r;const i=e[21].item,s=gn(i,e,e[20],tr);return{key:t,first:null,c(){n=Pr(),s&&s.c(),this.first=n},m(o,l){ve(o,n,l),s&&s.m(o,l),r=!0},p(o,l){e=o,s&&s.p&&(!r||l[0]&1048580)&&pn(s,i,e,e[20],r?mn(i,e[20],l,Bi):yn(e[20]),tr)},i(o){r||(ce(s,o),r=!0)},o(o){me(s,o),r=!1},d(o){o&&ye(n),s&&s.d(o)}}}function xi(t){let e,n,r,i=[],s=new Map,o,l;const c=t[21].header,h=gn(c,t,t[20],nr);let f=Je(t[2]);const b=y=>y[0]?y[0](y[37].index):y[37].index;for(let y=0;y<f.length;y+=1){let k=er(t,f,y),R=b(k);s.set(R,i[y]=rr(R,k))}const g=t[21].footer,v=gn(g,t,t[20],$n);return{c(){e=O("div"),h&&h.c(),n=ee(),r=O("div");for(let y=0;y<i.length;y+=1)i[y].c();o=ee(),v&&v.c(),T(r,"class","virtual-list-inner svelte-dwpad5"),T(r,"style",t[4]),T(e,"class","virtual-list-wrapper svelte-dwpad5"),T(e,"style",t[3])},m(y,k){ve(y,e,k),h&&h.m(e,null),m(e,n),m(e,r);for(let R=0;R<i.length;R+=1)i[R]&&i[R].m(r,null);m(e,o),v&&v.m(e,null),t[22](e),l=!0},p(y,k){h&&h.p&&(!l||k[0]&1048576)&&pn(h,c,y,y[20],l?mn(c,y[20],k,Ui):yn(y[20]),nr),k[0]&1048581&&(f=Je(y[2]),zn(),i=Br(i,k,b,1,y,f,s,r,gi,rr,null,er),On()),(!l||k[0]&16)&&T(r,"style",y[4]),v&&v.p&&(!l||k[0]&1048576)&&pn(v,g,y,y[20],l?mn(g,y[20],k,Pi):yn(y[20]),$n),(!l||k[0]&8)&&T(e,"style",y[3])},i(y){if(!l){ce(h,y);for(let k=0;k<f.length;k+=1)ce(i[k]);ce(v,y),l=!0}},o(y){me(h,y);for(let k=0;k<i.length;k+=1)me(i[k]);me(v,y),l=!1},d(y){y&&ye(e),h&&h.d(y);for(let k=0;k<i.length;k+=1)i[k].d();v&&v.d(y),t[22](null)}}}const Vi=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function Hi(t,e,n){let{$$slots:r={},$$scope:i}=e,{height:s}=e,{width:o="100%"}=e,{itemCount:l}=e,{itemSize:c}=e,{estimatedItemSize:h=null}=e,{stickyIndices:f=null}=e,{getKey:b=null}=e,{scrollDirection:g=Xe.VERTICAL}=e,{scrollOffset:v=null}=e,{scrollToIndex:y=null}=e,{scrollToAlignment:k=null}=e,{scrollToBehaviour:R="instant"}=e,{overscanCount:D=3}=e;const H=ui(),U=new Ni({itemCount:l,itemSize:c,estimatedItemSize:ae()});let j=!1,P,Z=[],E={offset:v||y!=null&&Z.length&&q(y)||0,scrollChangeReason:kt.REQUESTED},u=E,a={scrollToIndex:y,scrollToAlignment:k,scrollOffset:v,itemCount:l,itemSize:c,estimatedItemSize:h},d={},_="",p="";x(),Rn(()=>{n(18,j=!0),P.addEventListener("scroll",M,Vi),v!=null?F(v):y!=null&&F(q(y))}),ai(()=>{j&&P.removeEventListener("scroll",M)});function I(){if(!j)return;const C=a.scrollToIndex!==y||a.scrollToAlignment!==k,N=a.itemCount!==l||a.itemSize!==c||a.estimatedItemSize!==h;N&&(U.updateConfig({itemSize:c,itemCount:l,estimatedItemSize:ae()}),S()),a.scrollOffset!==v?n(19,E={offset:v||0,scrollChangeReason:kt.REQUESTED}):typeof y=="number"&&(C||N)&&n(19,E={offset:q(y,k,l),scrollChangeReason:kt.REQUESTED}),a={scrollToIndex:y,scrollToAlignment:k,scrollOffset:v,itemCount:l,itemSize:c,estimatedItemSize:h}}function A(){if(!j)return;const{offset:C,scrollChangeReason:N}=E;(u.offset!==C||u.scrollChangeReason!==N)&&x(),u.offset!==C&&N===kt.REQUESTED&&F(C),u=E}function x(){const{offset:C}=E,{start:N,stop:K}=U.getVisibleRange({containerSize:g===Xe.VERTICAL?s:o,offset:C,overscanCount:D});let J=[];const G=U.getTotalSize();g===Xe.VERTICAL?(n(3,_=`height:${s}${typeof s=="number"?"px":""};width:${o};`),n(4,p=`flex-direction:column;height:${G}px;`)):(n(3,_=`height:${s};width:${o}${typeof o=="number"?"px":""}`),n(4,p=`min-height:100%;width:${G}px;`));const L=f!=null&&f.length!==0;if(L)for(let V=0;V<f.length;V++){const ie=f[V];J.push({index:ie,style:z(ie,!0)})}if(N!==void 0&&K!==void 0){for(let V=N;V<=K;V++)L&&f.includes(V)||J.push({index:V,style:z(V,!1)});H("itemsUpdated",{start:N,end:K})}n(2,Z=J)}function F(C){"scroll"in P?P.scroll({[ji[g]]:C,behavior:R}):n(1,P[Xn[g]]=C,P)}function S(C=0){d={},U.resetItem(C),x()}function q(C,N=k,K=l){return(C<0||C>=K)&&(C=0),U.getUpdatedOffsetForIndex({align:N,containerSize:g===Xe.VERTICAL?s:o,currentOffset:E.offset||0,targetIndex:C})}function M(C){const N=le();N<0||E.offset===N||C.target!==P||(n(19,E={offset:N,scrollChangeReason:kt.OBSERVED}),H("afterScroll",{offset:N,event:C}))}function le(){return P[Xn[g]]}function ae(){return h||typeof c=="number"&&c||50}function z(C,N){if(d[C])return d[C];const{size:K,offset:J}=U.getSizeAndPositionForIndex(C);let G;return g===Xe.VERTICAL?(G=`left:0;width:100%;height:${K}px;`,N?G+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${J}px;margin-bottom:${-(J+K)}px;`:G+=`position:absolute;top:${J}px;`):(G=`top:0;width:${K}px;`,N?G+=`position:sticky;z-index:1;left:0;margin-left:${J}px;margin-right:${-(J+K)}px;`:G+=`position:absolute;height:100%;left:${J}px;`),d[C]=G}function te(C){Qt[C?"unshift":"push"](()=>{P=C,n(1,P)})}return t.$$set=C=>{"height"in C&&n(5,s=C.height),"width"in C&&n(6,o=C.width),"itemCount"in C&&n(7,l=C.itemCount),"itemSize"in C&&n(8,c=C.itemSize),"estimatedItemSize"in C&&n(9,h=C.estimatedItemSize),"stickyIndices"in C&&n(10,f=C.stickyIndices),"getKey"in C&&n(0,b=C.getKey),"scrollDirection"in C&&n(11,g=C.scrollDirection),"scrollOffset"in C&&n(12,v=C.scrollOffset),"scrollToIndex"in C&&n(13,y=C.scrollToIndex),"scrollToAlignment"in C&&n(14,k=C.scrollToAlignment),"scrollToBehaviour"in C&&n(15,R=C.scrollToBehaviour),"overscanCount"in C&&n(16,D=C.overscanCount),"$$scope"in C&&n(20,i=C.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&I(),t.$$.dirty[0]&524288&&A(),t.$$.dirty[0]&263264&&j&&S(0)},[b,P,Z,_,p,s,o,l,c,h,f,g,v,y,k,R,D,S,j,E,i,r,te]}class Wi extends it{constructor(e){super(),rt(this,e,Hi,xi,$e,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),Le()}get width(){return this.$$.ctx[6]}set width(e){this.$$set({width:e}),Le()}get itemCount(){return this.$$.ctx[7]}set itemCount(e){this.$$set({itemCount:e}),Le()}get itemSize(){return this.$$.ctx[8]}set itemSize(e){this.$$set({itemSize:e}),Le()}get estimatedItemSize(){return this.$$.ctx[9]}set estimatedItemSize(e){this.$$set({estimatedItemSize:e}),Le()}get stickyIndices(){return this.$$.ctx[10]}set stickyIndices(e){this.$$set({stickyIndices:e}),Le()}get getKey(){return this.$$.ctx[0]}set getKey(e){this.$$set({getKey:e}),Le()}get scrollDirection(){return this.$$.ctx[11]}set scrollDirection(e){this.$$set({scrollDirection:e}),Le()}get scrollOffset(){return this.$$.ctx[12]}set scrollOffset(e){this.$$set({scrollOffset:e}),Le()}get scrollToIndex(){return this.$$.ctx[13]}set scrollToIndex(e){this.$$set({scrollToIndex:e}),Le()}get scrollToAlignment(){return this.$$.ctx[14]}set scrollToAlignment(e){this.$$set({scrollToAlignment:e}),Le()}get scrollToBehaviour(){return this.$$.ctx[15]}set scrollToBehaviour(e){this.$$set({scrollToBehaviour:e}),Le()}get overscanCount(){return this.$$.ctx[16]}set overscanCount(e){this.$$set({overscanCount:e}),Le()}get recomputeSizes(){return this.$$.ctx[17]}}class Ut extends Error{constructor(e,n={}){super(`Node not found: ${e}`,n),this.name="NodeNotFoundError"}}class Ln extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const qi="modulepreload",Ki=function(t){return"https://jburel.github.io/ome2024-ngff-challenge/"+t},ir={},Et=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.all(n.map(l=>{if(l=Ki(l),l in ir)return;ir[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":qi,c||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((b,g)=>{f.addEventListener("load",b),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var Ve;class Yr{constructor(e,n,r){be(this,Ve);typeof e=="number"?ge(this,Ve,new Uint8Array(e)):e instanceof ArrayBuffer?ge(this,Ve,new Uint8Array(e,n,r)):ge(this,Ve,new Uint8Array(Array.from(e,i=>i?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return W(this,Ve).byteOffset}get byteLength(){return W(this,Ve).byteLength}get buffer(){return W(this,Ve).buffer}get length(){return W(this,Ve).length}get(e){let n=W(this,Ve)[e];return typeof n=="number"?n!==0:n}set(e,n){W(this,Ve)[e]=n?1:0}fill(e){W(this,Ve).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}Ve=new WeakMap;var yt;class Mn{constructor(e,n,r,i){Q(this,"_data");Q(this,"chars");be(this,yt);if(this.chars=e,ge(this,yt,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*e);else if(n instanceof ArrayBuffer)i&&(i=i*e),this._data=new Uint8Array(n,r,i);else{let s=Array.from(n);this._data=new Uint8Array(s.length*e);for(let o=0;o<s.length;o++)this.set(o,s[o])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(e,n){const r=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);r.fill(0),r.set(W(this,yt).encode(n))}fill(e){const n=W(this,yt).encode(e);for(let r=0;r<this.length;r++)this._data.set(n,r*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}yt=new WeakMap;var Se;const Bn=class Bn{constructor(e,n,r,i){be(this,Se);Q(this,"chars");if(this.chars=e,typeof n=="number")ge(this,Se,new Int32Array(n*e));else if(n instanceof ArrayBuffer)i&&(i*=e),ge(this,Se,new Int32Array(n,r,i));else{const s=n,o=new Bn(e,1);ge(this,Se,new Int32Array(function*(){for(let l of s)o.set(0,l),yield*W(o,Se)}()))}}get BYTES_PER_ELEMENT(){return W(this,Se).BYTES_PER_ELEMENT*this.chars}get byteLength(){return W(this,Se).byteLength}get byteOffset(){return W(this,Se).byteOffset}get buffer(){return W(this,Se).buffer}get length(){return W(this,Se).length/this.chars}get(e){const n=this.chars*e;let r="";for(let i=0;i<this.chars;i++)r+=String.fromCodePoint(W(this,Se)[n+i]);return r.replace(/\u0000/g,"")}set(e,n){const r=this.chars*e,i=W(this,Se).subarray(r,r+this.chars);i.fill(0);for(let s=0;s<this.chars;s++)i[s]=n.codePointAt(s)??0}fill(e){this.set(0,e);let n=W(this,Se).subarray(0,this.chars);for(let r=1;r<this.length;r++)W(this,Se).set(n,r*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};Se=new WeakMap;let Tt=Bn;function xt(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function sr(t,e){const n=e/2,r=e-1;let i=0;for(let s=0;s<t.length;s+=e)for(let o=0;o<n;o+=1)i=t[s+o],t[s+o]=t[s+r-o],t[s+r-o]=i}const Ji={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:Yr},Gi=/v2:([US])(\d+)/;function Qr(t){if(t==="v2:object")return globalThis.Array;let e=t.match(Gi);if(e){let[,r,i]=e;return(r==="U"?Tt:Mn).bind(null,Number(i))}let n=Ji[t];if(!n)throw new Error(`Unknown or unsupported data_type: ${t}`);return n}function ct(t,e){return(e==="C"?Yi:Qi)(t)}function Yi(t){const e=t.length,n=globalThis.Array(e);for(let r=e-1,i=1;r>=0;r--)n[r]=i,i*=t[r];return n}function Qi(t){const e=t.length,n=globalThis.Array(e);for(let r=0,i=1;r<e;r++)n[r]=i,i*=t[r];return n}function Zi({name:t,configuration:e}){if(t==="default"){const n=(e==null?void 0:e.separator)??"/";return r=>["c",...r].join(n)}if(t==="v2"){const n=(e==null?void 0:e.separator)??".";return r=>r.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function vn(t){var n;const e=t.find(r=>r.name==="transpose");return((n=e==null?void 0:e.configuration)==null?void 0:n.order)==="F"?"F":"C"}const Xi=/^([<|>])(.*)$/;function $i(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(Xi);if(!e)throw new Error(`Invalid dtype: ${t}`);let[,n,r]=e,i={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[r]??(r.startsWith("S")||r.startsWith("U")?`v2:${r}`:void 0);if(!i)throw new Error(`Unsupported or unknown dtype: ${t}`);return n==="|"?{data_type:i}:{data_type:i,endian:n==="<"?"little":"big"}}function es(t,e={}){let n=[],r=$i(t.dtype);t.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in r&&r.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:i,...s}of t.filters??[])n.push({name:i,configuration:s});if(t.compressor){let{id:i,...s}=t.compressor;n.push({name:i,configuration:s})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:r.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:n,fill_value:t.fill_value,attributes:e}}function ts(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function ns(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let n=t==="bool";if(e==="boolean")return n;let r=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return r;let i=t==="int64"||t==="uint64";if(e==="bigint")return i;let s=t==="v2:object";return e==="object"?s:!r&&!i&&!n&&!s}function rs(t){return(t==null?void 0:t.name)==="sharding_indexed"}function Zr(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}const or=is();function is(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function lr(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var Rt,et,zt,Ot,bt;const Un=class Un{constructor(e,n){Q(this,"kind","array_to_bytes");be(this,Rt);be(this,et);be(this,zt);be(this,Ot);be(this,bt);ge(this,bt,e==null?void 0:e.endian),ge(this,et,Qr(n.data_type)),ge(this,Ot,n.shape),ge(this,Rt,ct(n.shape,vn(n.codecs)));const r=new(W(this,et))(0);ge(this,zt,r.BYTES_PER_ELEMENT)}static fromConfig(e,n){return new Un(e,n)}encode(e){let n=new Uint8Array(e.data.buffer);return or&&W(this,bt)==="big"&&sr(n,lr(W(this,et))),n}decode(e){return or&&W(this,bt)==="big"&&sr(e,lr(W(this,et))),{data:new(W(this,et))(e.buffer,e.byteOffset,e.byteLength/W(this,zt)),shape:W(this,Ot),stride:W(this,Rt)}}};Rt=new WeakMap,et=new WeakMap,zt=new WeakMap,Ot=new WeakMap,bt=new WeakMap;let $t=Un;class Fn{constructor(){Q(this,"kind","bytes_to_bytes")}static fromConfig(){return new Fn}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}function ss(t,e){if(Number.isNaN(e))throw new Error("JsonCodec allow_nan is false but NaN was encountered during encoding.");if(e===Number.POSITIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but Infinity was encountered during encoding.");if(e===Number.NEGATIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but -Infinity was encountered during encoding.");return e}function os(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((n,r)=>(n[r]=e[r],n),{}):e}var Lt,Mt;const xn=class xn{constructor(e={}){Q(this,"configuration");Q(this,"kind","array_to_bytes");be(this,Lt);be(this,Mt);this.configuration=e;const{encoding:n="utf-8",skipkeys:r=!1,ensure_ascii:i=!0,check_circular:s=!0,allow_nan:o=!0,sort_keys:l=!0,indent:c,strict:h=!0}=e;let f=e.separators;f||(c?f=[", ",": "]:f=[",",":"]),ge(this,Lt,{encoding:n,skipkeys:r,ensure_ascii:i,check_circular:s,allow_nan:o,indent:c,separators:f,sort_keys:l}),ge(this,Mt,{strict:h})}static fromConfig(e){return new xn(e)}encode(e){const{indent:n,encoding:r,ensure_ascii:i,check_circular:s,allow_nan:o,sort_keys:l}=W(this,Lt);if(r!=="utf-8")throw new Error("JsonCodec does not yet support non-utf-8 encoding.");const c=[];if(!s)throw new Error("JsonCodec does not yet support skipping the check for circular references during encoding.");o||c.push(ss),l&&c.push(os);const h=Array.from(e.data);h.push("|O"),h.push(e.shape);let f;c.length&&(f=(g,v)=>{let y=v;for(let k of c)y=k(g,y);return y});let b=JSON.stringify(h,f,n);return i&&(b=b.replace(/[\u007F-\uFFFF]/g,g=>{const v=`0000${g.charCodeAt(0).toString(16)}`;return`\\u${v.substring(v.length-4)}`})),new TextEncoder().encode(b)}decode(e){const{strict:n}=W(this,Mt);if(!n)throw new Error("JsonCodec does not yet support non-strict decoding.");const r=xt(e),i=r.pop();if(r.pop(),!i)throw new Error("0D not implemented for JsonCodec.");const s=ct(i,"C");return{data:r,shape:i,stride:s}}};Lt=new WeakMap,Mt=new WeakMap;let wn=xn;function ar(t){return t instanceof Yr||t instanceof Mn||t instanceof Tt?new Proxy(t,{get(n,r){return n.get(Number(r))},set(n,r,i){return n.set(Number(r),i),!0}}):t}function ls(t,e){let n;return t.data instanceof Mn||t.data instanceof Tt?n=new t.constructor(t.data.length,t.data.chars):n=new t.constructor(t.data.length),{data:n,shape:t.shape,stride:ct(t.shape,e)}}function as(t,e){let n=ls(t,e),r=t.shape.length,i=t.data.length,s=Array(r).fill(0),o=ar(t.data),l=ar(n.data);for(let c=0;c<i;c++){let h=0;for(let f=0;f<r;f++)h+=s[f]*n.stride[f];l[h]=o[c],s[0]+=1;for(let f=0;f<r;f++)if(s[f]===t.shape[f]){if(f+1===r)break;s[f]=0,s[f+1]+=1}}return n}function us(t){if(!t.stride)return"C";let e=ct(t.shape,"C");return t.stride.every((n,r)=>n===e[r])?"C":"F"}class Dn{constructor(e){Q(this,"configuration");Q(this,"kind","array_to_array");this.configuration=e}static fromConfig(e){return new Dn(e)}encode(e){var n,r;return us(e)===((n=this.configuration)==null?void 0:n.order)?e:as(e,((r=this.configuration)==null?void 0:r.order)??"C")}decode(e){return e}}var Ft,Dt;const Vn=class Vn{constructor(e){Q(this,"kind","array_to_bytes");be(this,Ft);be(this,Dt);ge(this,Ft,e),ge(this,Dt,ct(e,"C"))}static fromConfig(e,n){return new Vn(n.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let n=new TextDecoder,r=new DataView(e.buffer),i=Array(r.getUint32(0,!0)),s=4;for(let o=0;o<i.length;o++){let l=r.getUint32(s,!0);s+=4,i[o]=n.decode(e.buffer.slice(s,s+l)),s+=l}return{data:i,shape:W(this,Ft),stride:W(this,Dt)}}};Ft=new WeakMap,Dt=new WeakMap;let kn=Vn;function cs(){return new Map().set("blosc",()=>Et(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1])).then(t=>t.default)).set("gzip",()=>Et(()=>import("./gzip-CF-9a_hd.js"),__vite__mapDeps([2,3])).then(t=>t.default)).set("lz4",()=>Et(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([4,1])).then(t=>t.default)).set("zlib",()=>Et(()=>import("./zlib-CBiqHlio.js"),__vite__mapDeps([5,3])).then(t=>t.default)).set("zstd",()=>Et(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([6,1])).then(t=>t.default)).set("transpose",()=>Dn).set("bytes",()=>$t).set("crc32c",()=>Fn).set("vlen-utf8",()=>kn).set("json2",()=>wn)}const fs=cs();function En(t){let e;return{async encode(n){e||(e=await ur(t));for(const i of e.array_to_array)n=await i.encode(n);let r=await e.array_to_bytes.encode(n);for(const i of e.bytes_to_bytes)r=await i.encode(r);return r},async decode(n){e||(e=await ur(t));for(let i=e.bytes_to_bytes.length-1;i>=0;i--)n=await e.bytes_to_bytes[i].decode(n);let r=await e.array_to_bytes.decode(n);for(let i=e.array_to_array.length-1;i>=0;i--)r=await e.array_to_array[i].decode(r);return r}}}async function ur(t){let e=t.codecs.map(async s=>{var l;let o=await((l=fs.get(s.name))==null?void 0:l());if(!o)throw new Error(`Unknown codec: ${s.name}`);return{Codec:o,meta:s}}),n=[],r,i=[];for await(let{Codec:s,meta:o}of e){let l=s.fromConfig(o.configuration,t);switch(l.kind){case"array_to_array":n.push(l);break;case"array_to_bytes":r=l;break;default:i.push(l)}}if(!r){if(!hs(t))throw new Error(`Cannot encode ${t.data_type} to bytes without a codec`);r=$t.fromConfig({endian:"little"},t)}return{array_to_array:n,array_to_bytes:r,bytes_to_bytes:i}}function hs(t){return t.data_type!=="v2:object"}const cr=18446744073709551615n;function ds(t,e,n,r){if(t.store.getRange===void 0)throw new Error("Store does not support range requests");let i=t.store.getRange.bind(t.store),s=e.map((c,h)=>c/r.chunk_shape[h]),o=En({data_type:"uint64",shape:[...s,2],codecs:r.index_codecs}),l={};return async c=>{let h=c.map((H,U)=>Math.floor(H/s[U])),f=t.resolve(n(h)).path,b;if(f in l)b=l[f];else{let H=4,U=16*s.reduce((P,Z)=>P*Z,1),j=await i(f,{suffixLength:U+H});b=l[f]=j?await o.decode(j):null}if(b===null)return;let{data:g,shape:v,stride:y}=b,k=c.map((H,U)=>H%v[U]).reduce((H,U,j)=>H+U*y[j],0),R=g[k],D=g[k+1];if(!(R===cr&&D===cr))return i(f,{offset:Number(R),length:Number(D)})}}class vt{constructor(e,n="/"){Q(this,"store");Q(this,"path");this.store=e,this.path=n}resolve(e){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new vt(this.store,new URL(e,n).pathname)}}var jt;class jn extends vt{constructor(n,r,i){super(n,r);Q(this,"kind","group");be(this,jt);ge(this,jt,i)}get attrs(){return W(this,jt).attributes}}jt=new WeakMap;const At=Symbol("zarrita.context");function _s(t){return t[At]}function gs(t,e){let{configuration:n}=e.codecs.find(rs)??{},r={encode_chunk_key:Zi(e.chunk_key_encoding),TypedArray:Qr(e.data_type),fill_value:e.fill_value};if(n){let s=vn(n.codecs);return{...r,kind:"sharded",chunk_shape:n.chunk_shape,codec:En({data_type:e.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(o,l){return ct(o,l??s)},get_chunk_bytes:ds(t,e.chunk_grid.configuration.chunk_shape,r.encode_chunk_key,n)}}let i=vn(e.codecs);return{...r,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:En({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s,o){return ct(s,o??i)},async get_chunk_bytes(s,o){let l=r.encode_chunk_key(s),c=t.resolve(l).path;return t.store.get(c,o)}}}var Mr,Fr,ut,Dr;let en=(Dr=class extends(Fr=vt,Mr=At,Fr){constructor(n,r,i){super(n,r);Q(this,"kind","array");be(this,ut);Q(this,Mr);ge(this,ut,{...i,fill_value:Zr(i)}),this[At]=gs(this,i)}get attrs(){return W(this,ut).attributes}get shape(){return W(this,ut).shape}get chunks(){return this[At].chunk_shape}get dtype(){return W(this,ut).data_type}async getChunk(n,r){let i=this[At],s=await i.get_chunk_bytes(n,r);if(!s){let o=i.chunk_shape.reduce((c,h)=>c*h,1),l=new i.TypedArray(o);return l.fill(i.fill_value),{data:l,shape:i.chunk_shape,stride:i.get_strides(i.chunk_shape)}}return i.codec.decode(s)}is(n){return ns(this.dtype,n)}},ut=new WeakMap,Dr),tn=ms();function ms(){let t=new WeakMap;function e(n){let r=t.get(n)??{v2:0,v3:0};return t.set(n,r),r}return{increment(n,r){e(n)[r]+=1},version_max(n){let r=e(n);return r.v3>r.v2?"v3":"v2"}}}async function ps(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?xt(e):{}}async function ys(t,e={}){let n="store"in t?t:new vt(t),r={};return(e.attrs??!0)&&(r=await ps(n)),e.kind==="array"?fr(n,r):e.kind==="group"?hr(n,r):fr(n,r).catch(i=>{if(i instanceof Ut)return hr(n,r);throw i})}async function fr(t,e){let{path:n}=t.resolve(".zarray"),r=await t.store.get(n);if(!r)throw new Ut("v2 array",{cause:new Ln(n)});return tn.increment(t.store,"v2"),new en(t.store,t.path,es(xt(r),e))}async function hr(t,e){let{path:n}=t.resolve(".zgroup"),r=await t.store.get(n);if(!r)throw new Ut("v2 group",{cause:new Ln(n)});return tn.increment(t.store,"v2"),new jn(t.store,t.path,ts(xt(r),e))}async function bs(t){let{store:e,path:n}=t.resolve("zarr.json"),r=await t.store.get(n);if(!r)throw new Ut("v3 array or group",{cause:new Ln(n)});let i=xt(r);return i.node_type==="array"&&(i.fill_value=Zr(i)),i.node_type==="array"?new en(e,t.path,i):new jn(e,t.path,i)}async function vs(t,e={}){let n="store"in t?t:new vt(t),r=await bs(n);if(tn.increment(n.store,"v3"),e.kind===void 0||e.kind==="array"&&r instanceof en||e.kind==="group"&&r instanceof jn)return r;let i=r instanceof en?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${i}.`)}async function at(t,e={}){let n="store"in t?t.store:t,r=tn.version_max(n),i=r==="v2"?at.v2:at.v3,s=r==="v2"?at.v3:at.v2;return i(t,e).catch(o=>{if(o instanceof Ut)return s(t,e);throw o})}at.v2=ys;at.v3=vs;function*ws(t,e,n=1){e===void 0&&(e=t,t=0);for(let r=t;r<e;r+=n)yield r}function*ks(...t){if(t.length===0)return;const e=t.map(r=>r[Symbol.iterator]()),n=e.map(r=>r.next());if(n.some(r=>r.done))throw new Error("Input contains an empty iterator.");for(let r=0;;){if(n[r].done){if(e[r]=t[r][Symbol.iterator](),n[r]=e[r].next(),++r>=e.length)return}else yield n.map(({value:i})=>i),r=0;n[r]=e[r].next()}}function Es({start:t,stop:e,step:n},r){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const i=n<0,[s,o]=i?[-1,r-1]:[0,r];return t===null?t=i?o:s:t<0?(t+=r,t<s&&(t=s)):t>o&&(t=o),e===null?e=i?s:o:e<0?(e+=r,e<s&&(e=s)):e>o&&(e=o),[t,e,n]}function An(t,e,n=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:n}}function As(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class Nn extends Error{constructor(e){super(e),this.name="IndexError"}}function Ss(t,e){throw new Nn(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function Is(t){throw new Nn(`index out of bounds for dimension with length ${t}`)}function Cs(){throw new Nn("only slices with step >= 1 are supported")}function Ts(t,e){t.length>e.length&&Ss(t,e)}function Rs(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&Is(e),t}class zs{constructor({dim_sel:e,dim_len:n,dim_chunk_len:r}){Q(this,"dim_sel");Q(this,"dim_len");Q(this,"dim_chunk_len");Q(this,"nitems");e=Rs(e,n),this.dim_sel=e,this.dim_len=n,this.dim_chunk_len=r,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),n=e*this.dim_chunk_len,r=this.dim_sel-n;yield{dim_chunk_ix:e,dim_chunk_sel:r}}}class dr{constructor({dim_sel:e,dim_len:n,dim_chunk_len:r}){Q(this,"start");Q(this,"stop");Q(this,"step");Q(this,"dim_len");Q(this,"dim_chunk_len");Q(this,"nitems");Q(this,"nchunks");const[i,s,o]=Es(e,n);this.start=i,this.stop=s,this.step=o,this.step<1&&Cs(),this.dim_len=n,this.dim_chunk_len=r,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const r of ws(e,n)){const i=r*this.dim_chunk_len,s=Math.min(this.dim_len,(r+1)*this.dim_chunk_len),o=s-i;let l=0,c=0;if(this.start<i){const v=(i-this.start)%this.step;v&&(c+=this.step-v),l=Math.ceil((i-this.start)/this.step)}else c=this.start-i;const h=this.stop>s?o:this.stop-i,f=[c,h,this.step],b=Math.ceil((h-c)/this.step),g=[l,l+b,1];yield{dim_chunk_ix:r,dim_chunk_sel:f,dim_out_sel:g}}}}function Os(t,e){let n=[];return t===null?n=e.map(r=>An(null)):Array.isArray(t)&&(n=t.map(r=>r??An(null))),Ts(n,e),n}class Ls{constructor({selection:e,shape:n,chunk_shape:r}){Q(this,"dim_indexers");Q(this,"shape");this.dim_indexers=Os(e,n).map((i,s)=>new(typeof i=="number"?zs:dr)({dim_sel:i,dim_len:n[s],dim_chunk_len:r[s]})),this.shape=this.dim_indexers.filter(i=>i instanceof dr).map(i=>i.nitems)}*[Symbol.iterator](){for(const e of ks(...this.dim_indexers)){const n=e.map(i=>i.dim_chunk_ix),r=e.map(i=>"dim_out_sel"in i?{from:i.dim_chunk_sel,to:i.dim_out_sel}:{from:i.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:r}}}}function Ms(t,e){return"get"in t?t.get(e):t[e]}async function Fs(t,e,n,r){var c;let i=_s(t),s=new Ls({selection:e,shape:t.shape,chunk_shape:t.chunks}),o=r.prepare(new i.TypedArray(s.shape.reduce((h,f)=>h*f,1)),s.shape,i.get_strides(s.shape,n.order)),l=((c=n.create_queue)==null?void 0:c.call(n))??As();for(const{chunk_coords:h,mapping:f}of s)l.add(async()=>{let{data:b,shape:g,stride:v}=await t.getChunk(h,n.opts),y=r.prepare(b,g,v);r.set_from_chunk(o,y,f)});return await l.onIdle(),s.shape.length===0?Ms(o.data,0):o}function Pn(t,e=0,n){let r=n??t.length-e;return{length:r,subarray(i,s=r){return Pn(t,e+i,s-i)},set(i,s=0){for(let o=0;o<i.length;o++)t[e+s+o]=i.get(o)},get(i){return t[e+i]}}}function dn(t){return globalThis.Array.isArray(t.data)?{data:Pn(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function Ds(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function js(t,e){if(globalThis.Array.isArray(t.data))return Pn([e]);let n=Ds(t.data),r=new n([e]);return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}const Ns={prepare(t,e,n){return{data:t,shape:e,stride:n}},set_scalar(t,e,n){let r=dn(t);Sn(r,e,js(t,n),r.bytes_per_element)},set_from_chunk(t,e,n){let r=dn(t);Gt(r,dn(e),r.bytes_per_element,n)}};async function Ps(t,e=null,n={}){return Fs(t,e,n,Ns)}function Xr(t,e,n){return n<0&&e<t?Math.floor((t-e-1)/-n)+1:t<e?Math.floor((e-t-1)/n)+1:0}function Sn(t,e,n,r){if(e.length===0){t.data.set(n,0);return}const[i,...s]=e,[o,...l]=t.stride;if(typeof i=="number"){const g=t.data.subarray(o*i*r);Sn({data:g,stride:l},s,n,r);return}const[c,h,f]=i,b=Xr(c,h,f);if(s.length===0){for(let g=0;g<b;g++)t.data.set(n,o*(c+f*g)*r);return}for(let g=0;g<b;g++){const v=t.data.subarray(o*(c+f*g)*r);Sn({data:v,stride:l},s,n,r)}}function Gt(t,e,n,r){const[i,...s]=r,[o,...l]=t.stride,[c,...h]=e.stride;if(i.from===null){if(s.length===0){t.data.set(e.data.subarray(0,n),i.to*n);return}Gt({data:t.data.subarray(o*i.to*n),stride:l},e,n,s);return}if(i.to===null){if(s.length===0){let D=i.from*n;t.data.set(e.data.subarray(D,D+n),0);return}Gt(t,{data:e.data.subarray(c*i.from*n),stride:h},n,s);return}const[f,b,g]=i.to,[v,y,k]=i.from,R=Xr(f,b,g);if(s.length===0){if(g===1&&k===1&&o===1&&c===1){let D=v*n,H=R*n;t.data.set(e.data.subarray(D,D+H),f*n);return}for(let D=0;D<R;D++){let H=c*(v+k*D)*n;t.data.set(e.data.subarray(H,H+n),o*(f+g*D)*n)}return}for(let D=0;D<R;D++)Gt({data:t.data.subarray(o*(f+D*g)*n),stride:l},{data:e.data.subarray(c*(v+D*k)*n),stride:h},n,s)}function $r(t,e,n,r={}){return e!==void 0&&n!==void 0&&(r={...r,headers:{...r.headers,Range:`bytes=${e}-${e+n-1}`}}),fetch(t,r)}function Bs(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function _r(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const r=new URL(e.slice(1),n);return r.search=n.search,r}async function gr(t){if(!(t.status===404||t.status===403)){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function Us(t,e,n,r){if(r)return fetch(t,{...n,headers:{...n.headers,Range:`bytes=-${e}`}});let i=await fetch(t,{...n,method:"HEAD"});if(!i.ok)return i;let s=i.headers.get("Content-Length"),o=Number(s);return $r(t,o-e,o,n)}var Nt,Pt,Bt,In;class xs{constructor(e,n={}){be(this,Bt);Q(this,"url");be(this,Nt);be(this,Pt);this.url=e,ge(this,Nt,n.overrides??{}),ge(this,Pt,n.useSuffixRequest??!1)}async get(e,n={}){let r=_r(this.url,e).href,i=await fetch(r,fn(this,Bt,In).call(this,n));return gr(i)}async getRange(e,n,r={}){let i=_r(this.url,e),s=fn(this,Bt,In).call(this,r),o;return"suffixLength"in n?o=await Us(i,n.suffixLength,s,W(this,Pt)):o=await $r(i,n.offset,n.length,s),gr(o)}}Nt=new WeakMap,Pt=new WeakMap,Bt=new WeakSet,In=function(e){return Bs(W(this,Nt),e)};function Vs(t){let e,n;return{c(){e=O("div"),n=O("canvas"),Qe(n,"width",t[1]+"px"),Qe(n,"background-color","lightgrey"),T(n,"height",t[3]),T(n,"width",t[2]),T(e,"class","canvasWrapper svelte-12wykiu"),Qe(e,"width",t[1]+"px"),mt(e,"spinner",t[4])},m(r,i){ve(r,e,i),m(e,n),t[10](n)},p(r,[i]){i&2&&Qe(n,"width",r[1]+"px"),i&8&&T(n,"height",r[3]),i&4&&T(n,"width",r[2]),i&2&&Qe(e,"width",r[1]+"px"),i&16&&mt(e,"spinner",r[4])},i:ke,o:ke,d(r){r&&ye(e),t[10](null)}}}const mr=120;function Hs(t,e,n){let{source:r}=e,{attrs:i}=e,{thumbDatasetIndex:s=void 0}=e,{thumbAspectRatio:o=1}=e,{max_size:l=512}=e,c,h=120,f=120,b=f/o,g=!0;async function v(){var F;let k=i.multiscales[0].datasets.map(S=>S.path),R=i.multiscales[0].axes.map(S=>S.name),D=k.at(-1);s!=null&&s<k.length&&(D=k[s]);const H=new xs(r+"/"+D),U=await at.v3(H,{kind:"array"});let j=R.indexOf("c"),P=U.shape;if(P.at(-1)*P.at(-2)>l*l){console.log("Lowest resolution too large for Thumbnail: ",P,r);return}let Z=P.length,E=P[j]||1,u,a;(F=i==null?void 0:i.omero)!=null&&F.channels?(u=i.omero.channels.map(S=>S.active),a=i.omero.channels.map(S=>qr(S.color))):(u=zi(E),a=Oi(E,u)),a=a.filter((S,q)=>u[q]);let _=u.reduce((S,q,M)=>(q&&S.push(M),S),[]).map(S=>{let q=P.map((M,le)=>le==j?S:le>=Z-2?An(0,M):R[le]=="z"||R[le]=="t"?parseInt(M/2+""):0);return Ps(U,q)}),p=await Promise.all(_),I=p.map(S=>Wr(S)),A=Ci(p,I,a);n(2,f=P.at(-1)),n(3,b=P.at(-2));let x=f/mr;b>f&&(x=b/mr),n(1,h=f/x),setTimeout(()=>{const S=c.getContext("2d");n(4,g=!1),S.putImageData(new ImageData(A,f,b),0,0)},100)}Rn(()=>{v()});function y(k){Qt[k?"unshift":"push"](()=>{c=k,n(0,c)})}return t.$$set=k=>{"source"in k&&n(5,r=k.source),"attrs"in k&&n(6,i=k.attrs),"thumbDatasetIndex"in k&&n(7,s=k.thumbDatasetIndex),"thumbAspectRatio"in k&&n(8,o=k.thumbAspectRatio),"max_size"in k&&n(9,l=k.max_size)},[c,h,f,b,g,r,i,s,o,l,y]}class Ws extends it{constructor(e){super(),rt(this,e,Hs,Vs,$e,{source:5,attrs:6,thumbDatasetIndex:7,thumbAspectRatio:8,max_size:9})}}const qs="https://jburel.github.io/ome2024-ngff-challenge/ome-logomark.svg";function pr(t,e,n){const r=t.slice();return r[8]=e[n],r}function yr(t){let e,n;return e=new Ws({props:{source:t[3],attrs:t[2],max_size:2e3,thumbDatasetIndex:t[4],thumbAspectRatio:t[5]}}),{c(){Ke(e.$$.fragment)},m(r,i){He(e,r,i),n=!0},p(r,i){const s={};i&8&&(s.source=r[3]),i&4&&(s.attrs=r[2]),i&16&&(s.thumbDatasetIndex=r[4]),i&32&&(s.thumbAspectRatio=r[5]),e.$set(s)},i(r){n||(ce(e.$$.fragment,r),n=!0)},o(r){me(e.$$.fragment,r),n=!1},d(r){We(e,r)}}}function br(t){let e,n,r,i=t[0][`size_${t[8]}`]+"",s;return{c(){e=O("tr"),n=O("td"),n.textContent=`${t[8].toUpperCase()}`,r=O("td"),s=re(i),T(n,"class","svelte-ufwatd"),T(r,"class","svelte-ufwatd")},m(o,l){ve(o,e,l),m(e,n),m(e,r),m(r,s)},p(o,l){l&1&&i!==(i=o[0][`size_${o[8]}`]+"")&&Ie(s,i)},d(o){o&&ye(e)}}}function vr(t){let e,n=t[0][`size_${t[8]}`]!==void 0&&br(t);return{c(){n&&n.c(),e=Pr()},m(r,i){n&&n.m(r,i),ve(r,e,i)},p(r,i){r[0][`size_${r[8]}`]!==void 0?n?n.p(r,i):(n=br(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&ye(e),n&&n.d(r)}}}function wr(t){let e,n,r,i,s;return{c(){e=O("div"),n=O("a"),r=re("Original data"),T(n,"title",i="Link to original data: "+t[0].origin),T(n,"href",s=t[0].origin),T(n,"target","_blank")},m(o,l){ve(o,e,l),m(e,n),m(n,r)},p(o,l){l&1&&i!==(i="Link to original data: "+o[0].origin)&&T(n,"title",i),l&1&&s!==(s=o[0].origin)&&T(n,"href",s)},d(o){o&&ye(e)}}}function Ks(t){let e,n,r,i,s,o,l,c,h=Zt(t[0].written)+"",f,b,g,v,y=(t[0].name?t[0].name.replaceAll(t[1],`<mark>${t[1]}</mark>`):"")+"",k,R,D=t[6].replaceAll(t[1],`<mark>${t[1]}</mark>`)+"",H,U,j,P,Z,E,u,a,d=t[2]&&yr(t),_=Je(["t","c","z","y","x"]),p=[];for(let A=0;A<5;A+=1)p[A]=vr(pr(t,_,A));let I=t[0].origin&&wr(t);return{c(){e=O("div"),n=O("div"),d&&d.c(),r=ee(),i=O("table");for(let A=0;A<5;A+=1)p[A].c();s=ee(),o=O("tr"),l=O("td"),l.textContent="Size",c=O("td"),f=re(h),b=ee(),g=O("div"),v=O("div"),k=ee(),R=O("div"),H=ee(),I&&I.c(),U=ee(),j=O("a"),P=O("img"),T(n,"class","thumbWrapper svelte-ufwatd"),T(l,"class","svelte-ufwatd"),Qe(c,"white-space","nowrap"),T(c,"class","svelte-ufwatd"),T(i,"class","svelte-ufwatd"),T(P,"alt","OME logo"),T(P,"class","link_logo svelte-ufwatd"),_n(P.src,Z=qs)||T(P,"src",Z),T(j,"title",E="Validator: "+t[0].url),T(j,"href",u="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+t[0].url),T(j,"target","_blank"),T(e,"class","zarr-list-item svelte-ufwatd")},m(A,x){ve(A,e,x),m(e,n),d&&d.m(n,null),m(e,r),m(e,i);for(let F=0;F<5;F+=1)p[F]&&p[F].m(i,null);m(i,s),m(i,o),m(o,l),m(o,c),m(c,f),m(e,b),m(e,g),m(g,v),v.innerHTML=y,m(g,k),m(g,R),R.innerHTML=D,m(g,H),I&&I.m(g,null),m(g,U),m(g,j),m(j,P),a=!0},p(A,[x]){if(A[2]?d?(d.p(A,x),x&4&&ce(d,1)):(d=yr(A),d.c(),ce(d,1),d.m(n,null)):d&&(zn(),me(d,1,1,()=>{d=null}),On()),x&1){_=Je(["t","c","z","y","x"]);let F;for(F=0;F<5;F+=1){const S=pr(A,_,F);p[F]?p[F].p(S,x):(p[F]=vr(S),p[F].c(),p[F].m(i,s))}for(;F<5;F+=1)p[F].d(1)}(!a||x&1)&&h!==(h=Zt(A[0].written)+"")&&Ie(f,h),(!a||x&3)&&y!==(y=(A[0].name?A[0].name.replaceAll(A[1],`<mark>${A[1]}</mark>`):"")+"")&&(v.innerHTML=y),(!a||x&66)&&D!==(D=A[6].replaceAll(A[1],`<mark>${A[1]}</mark>`)+"")&&(R.innerHTML=D),A[0].origin?I?I.p(A,x):(I=wr(A),I.c(),I.m(g,U)):I&&(I.d(1),I=null),(!a||x&1&&E!==(E="Validator: "+A[0].url))&&T(j,"title",E),(!a||x&1&&u!==(u="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+A[0].url))&&T(j,"href",u)},i(A){a||(ce(d),a=!0)},o(A){me(d),a=!1},d(A){A&&ye(e),d&&d.d(),Yt(p,A),I&&I.d()}}}function Js(t,e,n){let r,{rowData:i}=e,{textFilter:s}=e,o,l,c,h=1;if(i.size_x&&i.size_y){let f=Math.max(i.size_x,i.size_y);for(c=0;f>256;)c+=1,f=f/2;h=i.size_x/i.size_y}return Rn(async()=>{let f=await Xt(i.url);n(2,o=f[0]),n(3,l=f[1]),f[2]}),t.$$set=f=>{"rowData"in f&&n(0,i=f.rowData),"textFilter"in f&&n(1,s=f.textFilter)},t.$$.update=()=>{var f;t.$$.dirty&3&&n(6,r=s!=""&&((f=i.description)!=null&&f.includes(s))?i.description:"")},[i,s,o,l,c,h,r]}class Gs extends it{constructor(e){super(),rt(this,e,Js,Ks,$e,{rowData:0,textFilter:1})}}function Ys(t){let e,n,r,i;return n=new Gs({props:{rowData:t[0][t[10]],textFilter:t[1]}}),{c(){e=O("div"),Ke(n.$$.fragment),T(e,"slot","item"),T(e,"style",r=t[9]),T(e,"class","row svelte-joy4w7")},m(s,o){ve(s,e,o),He(n,e,null),i=!0},p(s,o){const l={};o&1025&&(l.rowData=s[0][s[10]]),o&2&&(l.textFilter=s[1]),n.$set(l),(!i||o&512&&r!==(r=s[9]))&&T(e,"style",r)},i(s){i||(ce(n.$$.fragment,s),i=!0)},o(s){me(n.$$.fragment,s),i=!1},d(s){s&&ye(e),We(n)}}}function Qs(t){let e=!1,n=()=>{e=!1},r,i,s,o=`${t[3]}px`,l,c,h;return Ct(t[6]),Ct(t[7]),s=new Wi({props:{width:"100%",height:t[3],itemCount:t[0].length,itemSize:160,getKey:t[4],$$slots:{item:[Ys,({style:f,index:b})=>({9:f,10:b}),({style:f,index:b})=>(f?512:0)|(b?1024:0)]},$$scope:{ctx:t}}}),s.$on("afterScroll",t[5]),{c(){i=O("div"),Ke(s.$$.fragment),T(i,"class","imageListContainer svelte-joy4w7"),Qe(i,"height",o)},m(f,b){ve(f,i,b),He(s,i,null),l=!0,c||(h=[Ze(window,"resize",t[6]),Ze(window,"scroll",()=>{e=!0,clearTimeout(r),r=setTimeout(n,100),t[7]()})],c=!0)},p(f,[b]){b&4&&!e&&(e=!0,clearTimeout(r),scrollTo(window.pageXOffset,f[2]),r=setTimeout(n,100));const g={};b&8&&(g.height=f[3]),b&1&&(g.itemCount=f[0].length),b&3587&&(g.$$scope={dirty:b,ctx:f}),s.$set(g),b&8&&o!==(o=`${f[3]}px`)&&Qe(i,"height",o)},i(f){l||(ce(s.$$.fragment,f),l=!0)},o(f){me(s.$$.fragment,f),l=!1},d(f){f&&ye(i),We(s),c=!1,nt(h)}}}function Zs(t,e,n){let r,{tableRows:i}=e,{textFilter:s}=e;function o(g){return i[g].url}let l=0,c=0;function h(g){let v=g.detail.offset-c;l<300&&v>0||v<0&&l>0&&n(2,l+=v),c=g.detail.offset}function f(){n(3,r=window.innerHeight)}function b(){n(2,l=window.pageYOffset)}return t.$$set=g=>{"tableRows"in g&&n(0,i=g.tableRows),"textFilter"in g&&n(1,s=g.textFilter)},n(3,r=0),[i,s,l,r,o,h,f,b]}class Xs extends it{constructor(e){super(),rt(this,e,Zs,Qs,$e,{tableRows:0,textFilter:1})}}const $s="https://jburel.github.io/ome2024-ngff-challenge/ome-main-nav.svg";function eo(t){let e;return{c(){e=O("nav"),e.innerHTML=`<img style="height: 30px" alt="OME Logo" src="${$s}"/> <h2 class="svelte-jcf7ka">2024 NGFF Challenge</h2> <ul class="svelte-jcf7ka"><li class="svelte-jcf7ka"><a href="https://github.com/ome/ome2024-ngff-challenge/" target="_blank" class="svelte-jcf7ka">About</a></li></ul>`,T(e,"class","svelte-jcf7ka")},m(n,r){ve(n,e,r)},p:ke,i:ke,o:ke,d(n){n&&ye(e)}}}class to extends it{constructor(e){super(),rt(this,e,null,eo,$e,{})}}function no(t){let e,n,r,i,s,o,l,c=t[0].source+"",h,f,b,g,v,y,k=t[0].total_count+"",R,D,H,U,j,P,Z;return{c(){e=O("div"),n=O("label"),r=O("img"),o=ee(),l=O("div"),h=re(c),f=ee(),b=O("br"),g=ee(),v=O("span"),y=re("("),R=re(k),D=re(" images)"),U=O("input"),T(r,"title",i=t[0].url),T(r,"class","sourceLogo svelte-1mddads"),T(r,"alt","Source logo"),_n(r.src,s=Gn(t[0].source))||T(r,"src",s),T(v,"title",H=t[0].child_csv.length+" collections"),T(U,"type","radio"),T(U,"name","source"),U.value=j=t[0].source,T(U,"class","svelte-1mddads"),T(n,"class","svelte-1mddads"),T(e,"class","source svelte-1mddads")},m(E,u){ve(E,e,u),m(e,n),m(n,r),m(n,o),m(n,l),m(l,h),m(l,f),m(l,b),m(l,g),m(l,v),m(v,y),m(v,R),m(v,D),m(l,U),P||(Z=Ze(U,"change",function(){Cn(t[1])&&t[1].apply(this,arguments)}),P=!0)},p(E,[u]){t=E,u&1&&i!==(i=t[0].url)&&T(r,"title",i),u&1&&!_n(r.src,s=Gn(t[0].source))&&T(r,"src",s),u&1&&c!==(c=t[0].source+"")&&Ie(h,c),u&1&&k!==(k=t[0].total_count+"")&&Ie(R,k),u&1&&H!==(H=t[0].child_csv.length+" collections")&&T(v,"title",H),u&1&&j!==(j=t[0].source)&&(U.value=j)},i:ke,o:ke,d(E){E&&ye(e),P=!1,Z()}}}function ro(t,e,n){let{source:r}=e,{handleFilter:i}=e;return t.$$set=s=>{"source"in s&&n(0,r=s.source),"handleFilter"in s&&n(1,i=s.handleFilter)},[r,i]}class io extends it{constructor(e){super(),rt(this,e,ro,no,$e,{source:0,handleFilter:1})}}function kr(t,e,n){const r=t.slice();return r[25]=e[n],r}function Er(t,e,n){const r=t.slice();return r[25]=e[n],r}function Ar(t,e,n){const r=t.slice();return r[30]=e[n],r}function Sr(t,e,n){const r=t.slice();return r[33]=e[n],r}function Ir(t){let e,n;return e=new io({props:{source:t[33],handleFilter:t[13]}}),{c(){Ke(e.$$.fragment)},m(r,i){He(e,r,i),n=!0},p(r,i){const s={};i[0]&2&&(s.source=r[33]),e.$set(s)},i(r){n||(ce(e.$$.fragment,r),n=!0)},o(r){me(e.$$.fragment,r),n=!1},d(r){We(e,r)}}}function Cr(t){let e,n,r,i,s,o;return{c(){e=O("div"),n=O("label"),r=O("input"),i=re(`
              ❌ Clear Source Filter`),T(r,"type","radio"),T(r,"name","source"),r.value="",T(r,"class","svelte-7rjbjc"),T(n,"class","svelte-7rjbjc"),T(e,"class","source clear svelte-7rjbjc")},m(l,c){ve(l,e,c),m(e,n),m(n,r),m(n,i),s||(o=Ze(r,"change",t[13]),s=!0)},p:ke,d(l){l&&ye(e),s=!1,o()}}}function Tr(t){let e,n,r,i,s=Je(xe.getCsvSourceList(t[7])),o=[];for(let l=0;l<s.length;l+=1)o[l]=Rr(Ar(t,s,l));return{c(){e=O("select"),n=O("option"),n.textContent="Collection";for(let l=0;l<o.length;l+=1)o[l].c();n.__value="",Pe(n,n.__value),T(e,"name","collection"),T(e,"class","svelte-7rjbjc")},m(l,c){ve(l,e,c),m(e,n);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(e,null);r||(i=Ze(e,"change",t[15]),r=!0)},p(l,c){if(c[0]&128){s=Je(xe.getCsvSourceList(l[7]));let h;for(h=0;h<s.length;h+=1){const f=Ar(l,s,h);o[h]?o[h].p(f,c):(o[h]=Rr(f),o[h].c(),o[h].m(e,null))}for(;h<o.length;h+=1)o[h].d(1);o.length=s.length}},d(l){l&&ye(e),Yt(o,l),r=!1,i()}}}function Rr(t){let e,n=(t[30].source==t[7]?Lr(t[30].url):t[30].source)+"",r,i,s=t[30].image_count+"",o,l,c;return{c(){e=O("option"),r=re(n),i=re(" ("),o=re(s),l=re(`)
                `),e.__value=c=t[30].url,Pe(e,e.__value)},m(h,f){ve(h,e,f),m(e,r),m(e,i),m(e,o),m(e,l)},p(h,f){f[0]&128&&n!==(n=(h[30].source==h[7]?Lr(h[30].url):h[30].source)+"")&&Ie(r,n),f[0]&128&&s!==(s=h[30].image_count+"")&&Ie(o,s),f[0]&128&&c!==(c=h[30].url)&&(e.__value=c,Pe(e,e.__value))},d(h){h&&ye(e)}}}function zr(t){let e,n=t[25]+"",r,i;return{c(){e=O("option"),r=re(n),e.__value=i=t[4][t[25]],Pe(e,e.__value)},m(s,o){ve(s,e,o),m(e,r)},p(s,o){o[0]&16&&n!==(n=s[25]+"")&&Ie(r,n),o[0]&16&&i!==(i=s[4][s[25]])&&(e.__value=i,Pe(e,e.__value))},d(s){s&&ye(e)}}}function Or(t,e){let n,r=e[25]+"",i,s;return{key:t,first:null,c(){n=O("option"),i=re(r),n.__value=s=e[5][e[25]],Pe(n,n.__value),this.first=n},m(o,l){ve(o,n,l),m(n,i)},p(o,l){e=o,l[0]&32&&r!==(r=e[25]+"")&&Ie(i,r),l[0]&32&&s!==(s=e[5][e[25]])&&(n.__value=s,Pe(n,n.__value))},d(o){o&&ye(n)}}}function so(t){let e,n,r,i,s,o,l,c,h=Zt(t[3])+"",f,b,g=t[1].length+"",v,y,k,R,D,H,U,j,P,Z,E,u,a,d,_,p,I=t[6]!=="0"?"All Dimensions":"Dimension Count",A,x,F,S,q,M,le,ae,z=t[8]==""?"Organism":"All Organisms",te,C,N,K,J=t[8]==""?"Imaging Modality":"All Modalities",G,L=[],V=new Map,ie,fe,se,X,ue,Y,Me,pe,Be,we,Ce,$,he,Te,ne,Fe,qe,De,Ee,Ge,Ue=t[0].length+"",Ae,st,Re,Ye,ze,nn,Hn;n=new to({});let ot=Je(t[1]),de=[];for(let w=0;w<ot.length;w+=1)de[w]=Ir(Sr(t,ot,w));const ei=w=>me(de[w],1,1,()=>{de[w]=null});let je=t[7]!==""&&Cr(t),Ne=t[7]!==""&&Tr(t),ft=Je(Object.keys(t[4]).sort()),Oe=[];for(let w=0;w<ft.length;w+=1)Oe[w]=zr(Er(t,ft,w));let Vt=Je(Object.keys(t[5]).sort());const Wn=w=>w[25];for(let w=0;w<Vt.length;w+=1){let B=kr(t,Vt,w),_e=Wn(B);V.set(_e,L[w]=Or(_e,B))}return Y=new _t({props:{col_label:"X",col_name:"size_x",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),pe=new _t({props:{col_label:"Y",col_name:"size_y",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),we=new _t({props:{col_label:"Z",col_name:"size_z",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),$=new _t({props:{col_label:"C",col_name:"size_c",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),Te=new _t({props:{col_label:"T",col_name:"size_t",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),Fe=new _t({props:{col_label:"Data size",col_name:"written",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),Ye=new Xs({props:{tableRows:t[0],textFilter:t[9]}}),{c(){e=O("div"),Ke(n.$$.fragment),r=ee(),i=O("main"),s=O("div"),o=O("h2"),l=re(t[2]),c=re(` Zarr Images,
        `),f=re(h),b=re(", from "),v=re(g),y=re(" sources:"),k=ee(),R=O("div");for(let w=0;w<de.length;w+=1)de[w].c();D=ee(),je&&je.c(),H=ee(),U=O("div"),j=O("div"),P=O("input"),Z=ee(),E=O("div"),u=O("div"),u.textContent="Filter by:",a=ee(),Ne&&Ne.c(),d=ee(),_=O("select"),p=O("option"),A=re(I),x=O("option"),x.textContent="2D",F=O("option"),F.textContent="3D",S=O("option"),S.textContent="4D",q=O("option"),q.textContent="5D",M=ee(),le=O("select"),ae=O("option"),te=re(z);for(let w=0;w<Oe.length;w+=1)Oe[w].c();C=ee(),N=O("select"),K=O("option"),G=re(J);for(let w=0;w<L.length;w+=1)L[w].c();ie=ee(),fe=O("div"),se=ee(),X=O("div"),ue=re(`Sort:
          
          `),Ke(Y.$$.fragment),Me=ee(),Ke(pe.$$.fragment),Be=ee(),Ke(we.$$.fragment),Ce=ee(),Ke($.$$.fragment),he=ee(),Ke(Te.$$.fragment),ne=ee(),Ke(Fe.$$.fragment),qe=ee(),De=O("div"),Ee=O("h3"),Ge=re("Showing "),Ae=re(Ue),st=re(" zarrs"),Re=ee(),Ke(Ye.$$.fragment),T(o,"class","svelte-7rjbjc"),T(R,"class","sources svelte-7rjbjc"),T(s,"class","summary svelte-7rjbjc"),T(P,"placeholder","Filter by Name or Description"),T(P,"name","textFilter"),T(P,"class","svelte-7rjbjc"),Qe(u,"white-space","nowrap"),p.__value="0",Pe(p,p.__value),x.__value="2",Pe(x,x.__value),F.__value="3",Pe(F,F.__value),S.__value="4",Pe(S,S.__value),q.__value="5",Pe(q,q.__value),T(_,"class","svelte-7rjbjc"),ae.__value="",Pe(ae,ae.__value),T(le,"class","svelte-7rjbjc"),K.__value="",Pe(K,K.__value),T(N,"class","svelte-7rjbjc"),T(fe,"class","clear svelte-7rjbjc"),T(E,"class","filters svelte-7rjbjc"),T(j,"class","sidebar svelte-7rjbjc"),Qe(Ee,"margin-left","15px"),T(Ee,"class","svelte-7rjbjc"),T(De,"class","results svelte-7rjbjc"),T(U,"class","sidebarContainer svelte-7rjbjc"),T(i,"class","svelte-7rjbjc"),T(e,"class","app svelte-7rjbjc")},m(w,B){ve(w,e,B),He(n,e,null),m(e,r),m(e,i),m(i,s),m(s,o),m(o,l),m(o,c),m(o,f),m(o,b),m(o,v),m(o,y),m(s,k),m(s,R);for(let _e=0;_e<de.length;_e+=1)de[_e]&&de[_e].m(R,null);m(R,D),je&&je.m(R,null),m(i,H),m(i,U),m(U,j),m(j,P),m(j,Z),m(j,E),m(E,u),m(E,a),Ne&&Ne.m(E,null),m(E,d),m(E,_),m(_,p),m(p,A),m(_,x),m(_,F),m(_,S),m(_,q),m(E,M),m(E,le),m(le,ae),m(ae,te);for(let _e=0;_e<Oe.length;_e+=1)Oe[_e]&&Oe[_e].m(le,null);m(E,C),m(E,N),m(N,K),m(K,G);for(let _e=0;_e<L.length;_e+=1)L[_e]&&L[_e].m(N,null);m(E,ie),m(E,fe),m(j,se),m(j,X),m(X,ue),He(Y,X,null),m(X,Me),He(pe,X,null),m(X,Be),He(we,X,null),m(X,Ce),He($,X,null),m(X,he),He(Te,X,null),m(X,ne),He(Fe,X,null),m(U,qe),m(U,De),m(De,Ee),m(Ee,Ge),m(Ee,Ae),m(Ee,st),m(De,Re),He(Ye,De,null),ze=!0,nn||(Hn=[Ze(P,"input",t[18]),Ze(_,"change",t[14]),Ze(le,"change",t[16]),Ze(N,"change",t[17])],nn=!0)},p(w,B){if((!ze||B[0]&4)&&Ie(l,w[2]),(!ze||B[0]&8)&&h!==(h=Zt(w[3])+"")&&Ie(f,h),(!ze||B[0]&2)&&g!==(g=w[1].length+"")&&Ie(v,g),B[0]&8194){ot=Je(w[1]);let oe;for(oe=0;oe<ot.length;oe+=1){const wt=Sr(w,ot,oe);de[oe]?(de[oe].p(wt,B),ce(de[oe],1)):(de[oe]=Ir(wt),de[oe].c(),ce(de[oe],1),de[oe].m(R,D))}for(zn(),oe=ot.length;oe<de.length;oe+=1)ei(oe);On()}if(w[7]!==""?je?je.p(w,B):(je=Cr(w),je.c(),je.m(R,null)):je&&(je.d(1),je=null),w[7]!==""?Ne?Ne.p(w,B):(Ne=Tr(w),Ne.c(),Ne.m(E,d)):Ne&&(Ne.d(1),Ne=null),(!ze||B[0]&64)&&I!==(I=w[6]!=="0"?"All Dimensions":"Dimension Count")&&Ie(A,I),(!ze||B[0]&256)&&z!==(z=w[8]==""?"Organism":"All Organisms")&&Ie(te,z),B[0]&16){ft=Je(Object.keys(w[4]).sort());let oe;for(oe=0;oe<ft.length;oe+=1){const wt=Er(w,ft,oe);Oe[oe]?Oe[oe].p(wt,B):(Oe[oe]=zr(wt),Oe[oe].c(),Oe[oe].m(le,null))}for(;oe<Oe.length;oe+=1)Oe[oe].d(1);Oe.length=ft.length}(!ze||B[0]&256)&&J!==(J=w[8]==""?"Imaging Modality":"All Modalities")&&Ie(G,J),B[0]&32&&(Vt=Je(Object.keys(w[5]).sort()),L=Br(L,B,Wn,1,w,Vt,V,N,_i,Or,null,kr));const _e={};B[0]&1024&&(_e.sortedBy=w[10]),B[0]&2048&&(_e.sortAscending=w[11]),Y.$set(_e);const rn={};B[0]&1024&&(rn.sortedBy=w[10]),B[0]&2048&&(rn.sortAscending=w[11]),pe.$set(rn);const sn={};B[0]&1024&&(sn.sortedBy=w[10]),B[0]&2048&&(sn.sortAscending=w[11]),we.$set(sn);const on={};B[0]&1024&&(on.sortedBy=w[10]),B[0]&2048&&(on.sortAscending=w[11]),$.$set(on);const ln={};B[0]&1024&&(ln.sortedBy=w[10]),B[0]&2048&&(ln.sortAscending=w[11]),Te.$set(ln);const an={};B[0]&1024&&(an.sortedBy=w[10]),B[0]&2048&&(an.sortAscending=w[11]),Fe.$set(an),(!ze||B[0]&1)&&Ue!==(Ue=w[0].length+"")&&Ie(Ae,Ue);const un={};B[0]&1&&(un.tableRows=w[0]),B[0]&512&&(un.textFilter=w[9]),Ye.$set(un)},i(w){if(!ze){ce(n.$$.fragment,w);for(let B=0;B<ot.length;B+=1)ce(de[B]);ce(Y.$$.fragment,w),ce(pe.$$.fragment,w),ce(we.$$.fragment,w),ce($.$$.fragment,w),ce(Te.$$.fragment,w),ce(Fe.$$.fragment,w),ce(Ye.$$.fragment,w),ze=!0}},o(w){me(n.$$.fragment,w),de=de.filter(Boolean);for(let B=0;B<de.length;B+=1)me(de[B]);me(Y.$$.fragment,w),me(pe.$$.fragment,w),me(we.$$.fragment,w),me($.$$.fragment,w),me(Te.$$.fragment,w),me(Fe.$$.fragment,w),me(Ye.$$.fragment,w),ze=!1},d(w){w&&ye(e),We(n),Yt(de,w),je&&je.d(),Ne&&Ne.d(),Yt(Oe,w);for(let B=0;B<L.length;B+=1)L[B].d();We(Y),We(pe),We(we),We($),We(Te),We(Fe),We(Ye),nn=!1,nt(Hn)}}}function Lr(t){return t.split("/").pop().replace(".csv","").replace("_samples","")}function oo(t,e,n){let i=new URLSearchParams(window.location.search).get("csv");try{new URL(i)}catch{i=Ai}let s=[],o=[],l=0,c=0,h={},f={},b="0",g="",v="",y="",k="",R="";xe.subscribe(_=>{n(0,s=j(_)),n(1,o=xe.getCsvSourceList()),n(2,l=_.length),n(3,c=_.reduce((p,I)=>p+parseInt(I.written)||0,0))}),Jr.subscribe(_=>{let p={};for(const[I,A]of Object.entries(_))p[A]=I;n(4,h=p)}),Gr.subscribe(_=>{let p={};for(const[I,A]of Object.entries(_))p[A]=I;n(5,f=p)}),i&&Vr(i,xe);let D="",H=!0;function U(_){D===_?n(11,H=!H):n(11,H=!1),n(10,D=_),xe.sortTable(_,H)}function j(_){if(b!=="0"&&(_=_.filter(p=>p.dim_count==b)),v!=="")_=_.filter(p=>p.csv==v);else if(g!==""){let p=xe.getCsvSourceList(g),I=[g,...p.map(A=>A.source)];_=_.filter(A=>I.includes(A.source))}return y!==""&&(_=_.filter(p=>p.organismId==y)),k!=""&&(_=_.filter(p=>p.fbbiId==k)),R!=""&&(_=_.filter(p=>{var I,A;return((I=p.description)==null?void 0:I.includes(R))||((A=p.name)==null?void 0:A.includes(R))})),_}function P(_){n(7,g=_.target.value),v="",n(0,s=j(xe.getRows()))}function Z(_){n(6,b=_.target.value),n(0,s=j(xe.getRows()))}function E(_){v=_.target.value,n(0,s=j(xe.getRows()))}function u(_){n(8,y=_.target.value),n(0,s=j(xe.getRows()))}function a(_){k=_.target.value,n(0,s=j(xe.getRows()))}function d(_){n(9,R=_.target.value),n(0,s=j(xe.getRows()))}return t.$$.update=()=>{t.$$.dirty[0]&1&&s.some(_=>_.source)},[s,o,l,c,h,f,b,g,y,R,D,H,U,P,Z,E,u,a,d]}class lo extends it{constructor(e){super(),rt(this,e,oo,so,$e,{},null,[-1,-1])}}new lo({target:document.getElementById("app")});
