const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-E49GQuAK.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/gzip-CF-9a_hd.js","assets/browser-B-ZyVB-j.js","assets/lz4-BIGKWw27.js","assets/zlib-CBiqHlio.js","assets/zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var Gr=Object.defineProperty;var jn=t=>{throw TypeError(t)};var Yr=(t,e,n)=>e in t?Gr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var X=(t,e,n)=>Yr(t,typeof e!="symbol"?e+"":e,n),sn=(t,e,n)=>e.has(t)||jn("Cannot "+n);var J=(t,e,n)=>(sn(t,e,"read from private field"),n?n.call(t):e.get(t)),be=(t,e,n)=>e.has(t)?jn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),me=(t,e,n,r)=>(sn(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),on=(t,e,n)=>(sn(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ie(){}function Qr(t,e){for(const n in e)t[n]=e[n];return t}function zr(t){return t()}function xn(){return Object.create(null)}function st(t){t.forEach(zr)}function En(t){return typeof t=="function"}function Xe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ut;function un(t,e){return t===e?!0:(Ut||(Ut=document.createElement("a")),Ut.href=e,t===Ut.href)}function Zr(t){return Object.keys(t).length===0}function $r(t,...e){if(t==null){for(const r of e)r(void 0);return Ie}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function xt(t){let e;return $r(t,n=>e=n)(),e}function cn(t,e,n,r){if(t){const i=Rr(t,e,n,r);return t[0](i)}}function Rr(t,e,n,r){return t[1]&&r?Qr(n.ctx.slice(),t[1](r(e))):n.ctx}function fn(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(e.dirty.length,i.length);for(let u=0;u<o;u+=1)s[u]=e.dirty[u]|i[u];return s}return e.dirty|i}return e.dirty}function hn(t,e,n,r,i,s){if(i){const o=Rr(e,n,r,s);t.p(o,i)}}function dn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function m(t,e){t.appendChild(e)}function Ee(t,e,n){t.insertBefore(e,n||null)}function ve(t){t.parentNode&&t.parentNode.removeChild(t)}function Ht(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function L(t){return document.createElement(t)}function ee(t){return document.createTextNode(t)}function ne(){return ee(" ")}function Or(){return ee("")}function Ze(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function T(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Xr(t){return Array.from(t.childNodes)}function ke(t,e){e=""+e,t.data!==e&&(t.data=e)}function He(t,e){t.value=e??""}function et(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function dt(t,e,n){t.classList.toggle(e,!!n)}function ei(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}let Et;function kt(t){Et=t}function An(){if(!Et)throw new Error("Function called outside component initialization");return Et}function Sn(t){An().$$.on_mount.push(t)}function ti(t){An().$$.on_destroy.push(t)}function ni(){const t=An();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=ei(e,n,{cancelable:r});return i.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const ht=[],Kt=[];let _t=[];const Vn=[],ri=Promise.resolve();let _n=!1;function ii(){_n||(_n=!0,ri.then(Re))}function gn(t){_t.push(t)}const ln=new Set;let ut=0;function Re(){if(ut!==0)return;const t=Et;do{try{for(;ut<ht.length;){const e=ht[ut];ut++,kt(e),si(e.$$)}}catch(e){throw ht.length=0,ut=0,e}for(kt(null),ht.length=0,ut=0;Kt.length;)Kt.pop()();for(let e=0;e<_t.length;e+=1){const n=_t[e];ln.has(n)||(ln.add(n),n())}_t.length=0}while(ht.length);for(;Vn.length;)Vn.pop()();_n=!1,ln.clear(),kt(t)}function si(t){if(t.fragment!==null){t.update(),st(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(gn)}}function oi(t){const e=[],n=[];_t.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),_t=e}const Vt=new Set;let tt;function In(){tt={r:0,c:[],p:tt}}function Cn(){tt.r||st(tt.c),tt=tt.p}function _e(t,e){t&&t.i&&(Vt.delete(t),t.i(e))}function ye(t,e,n,r){if(t&&t.o){if(Vt.has(t))return;Vt.add(t),tt.c.push(()=>{Vt.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function je(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function li(t,e){t.d(1),e.delete(t.key)}function ai(t,e){ye(t,1,1,()=>{e.delete(t.key)})}function Lr(t,e,n,r,i,s,o,u,c,h,f,E){let g=t.length,b=s.length,p=g;const y={};for(;p--;)y[t[p].key]=p;const z=[],P=new Map,q=new Map,x=[];for(p=b;p--;){const C=E(i,s,p),a=n(C);let l=o.get(a);l?x.push(()=>l.p(C,e)):(l=h(a,C),l.c()),P.set(a,z[p]=l),a in y&&q.set(a,Math.abs(p-y[a]))}const V=new Set,B=new Set;function H(C){_e(C,1),C.m(u,f),o.set(C.key,C),f=C.first,b--}for(;g&&b;){const C=z[b-1],a=t[g-1],l=C.key,d=a.key;C===a?(f=C.first,g--,b--):P.has(d)?!o.has(l)||V.has(l)?H(C):B.has(d)?g--:q.get(l)>q.get(d)?(B.add(l),H(C)):(V.add(d),g--):(c(a,o),g--)}for(;g--;){const C=t[g];P.has(C.key)||c(C,o)}for(;b;)H(z[b-1]);return st(x),z}function We(t){t&&t.c()}function Be(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),gn(()=>{const s=t.$$.on_mount.map(zr).filter(En);t.$$.on_destroy?t.$$.on_destroy.push(...s):st(s),t.$$.on_mount=[]}),i.forEach(gn)}function Ue(t,e){const n=t.$$;n.fragment!==null&&(oi(n.after_update),st(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ui(t,e){t.$$.dirty[0]===-1&&(ht.push(t),ii(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ot(t,e,n,r,i,s,o=null,u=[-1]){const c=Et;kt(t);const h=t.$$={fragment:null,ctx:[],props:s,update:Ie,not_equal:i,bound:xn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:xn(),dirty:u,skip_bound:!1,root:e.target||c.$$.root};o&&o(h.root);let f=!1;if(h.ctx=n?n(t,e.props||{},(E,g,...b)=>{const p=b.length?b[0]:g;return h.ctx&&i(h.ctx[E],h.ctx[E]=p)&&(!h.skip_bound&&h.bound[E]&&h.bound[E](p),f&&ui(t,E)),g}):[],h.update(),f=!0,st(h.before_update),h.fragment=r?r(h.ctx):!1,e.target){if(e.hydrate){const E=Xr(e.target);h.fragment&&h.fragment.l(E),E.forEach(ve)}else h.fragment&&h.fragment.c();e.intro&&_e(t.$$.fragment),Be(t,e.target,e.anchor),Re()}kt(c)}class lt{constructor(){X(this,"$$");X(this,"$$set")}$destroy(){Ue(this,1),this.$destroy=Ie}$on(e,n){if(!En(n))return Ie;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Zr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ci="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ci);const jt={AUTO:"auto",START:"start",CENTER:"center",END:"end"},Ge={HORIZONTAL:"horizontal",VERTICAL:"vertical"},bt={OBSERVED:0,REQUESTED:1},fi={[Ge.VERTICAL]:"top",[Ge.HORIZONTAL]:"left"},qn={[Ge.VERTICAL]:"scrollTop",[Ge.HORIZONTAL]:"scrollLeft"};class hi{constructor({itemSize:e,itemCount:n,estimatedItemSize:r}){this.itemSize=e,this.itemCount=n,this.estimatedItemSize=r,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:n,estimatedItemSize:r}){n!=null&&(this.itemCount=n),r!=null&&(this.estimatedItemSize=r),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:n}=this;return typeof n=="function"?n(e):Array.isArray(n)?n[e]:n}computeTotalSizeAndPositionData(){let e=0;for(let n=0;n<this.itemCount;n++){const r=this.getSize(n),i=e;e+=r,this.itemSizeAndPositionData[n]={offset:i,size:r}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const n=this.getSizeAndPositionOfLastMeasuredItem();let r=n.offset+n.size;for(let i=this.lastMeasuredIndex+1;i<=e;i++){const s=this.getSize(i);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${i} of value ${s}`);this.itemSizeAndPositionData[i]={offset:r,size:s},r+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=jt.START,containerSize:n,currentOffset:r,targetIndex:i}){if(n<=0)return 0;const s=this.getSizeAndPositionForIndex(i),o=s.offset,u=o-n+s.size;let c;switch(e){case jt.END:c=u;break;case jt.CENTER:c=o-(n-s.size)/2;break;case jt.START:c=o;break;default:c=Math.max(u,Math.min(o,r))}const h=this.getTotalSize();return Math.max(0,Math.min(h-n,c))}getVisibleRange({containerSize:e=0,offset:n,overscanCount:r}){if(this.getTotalSize()===0)return{};const s=n+e;let o=this.findNearestItem(n);if(o===void 0)throw Error(`Invalid offset ${n} specified`);const u=this.getSizeAndPositionForIndex(o);n=u.offset+u.size;let c=o;for(;n<s&&c<this.itemCount-1;)c++,n+=this.getSizeAndPositionForIndex(c).size;return r&&(o=Math.max(0,o-r),c=Math.min(c+r,this.itemCount-1)),{start:o,stop:c}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const n=this.getSizeAndPositionOfLastMeasuredItem(),r=Math.max(0,this.lastMeasuredIndex);return n.offset>=e?this.binarySearch({high:r,low:0,offset:e}):this.exponentialSearch({index:r,offset:e})}binarySearch({low:e,high:n,offset:r}){let i=0,s=0;for(;e<=n;){if(i=e+Math.floor((n-e)/2),s=this.getSizeAndPositionForIndex(i).offset,s===r)return i;s<r?e=i+1:s>r&&(n=i-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:n}){let r=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<n;)e+=r,r*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:n})}}const di=t=>({}),Wn=t=>({});function Hn(t,e,n){const r=t.slice();return r[37]=e[n],r}const _i=t=>({style:t[0]&4,index:t[0]&4}),Kn=t=>({style:t[37].style,index:t[37].index}),gi=t=>({}),Jn=t=>({});function Gn(t,e){let n,r;const i=e[21].item,s=cn(i,e,e[20],Kn);return{key:t,first:null,c(){n=Or(),s&&s.c(),this.first=n},m(o,u){Ee(o,n,u),s&&s.m(o,u),r=!0},p(o,u){e=o,s&&s.p&&(!r||u[0]&1048580)&&hn(s,i,e,e[20],r?fn(i,e[20],u,_i):dn(e[20]),Kn)},i(o){r||(_e(s,o),r=!0)},o(o){ye(s,o),r=!1},d(o){o&&ve(n),s&&s.d(o)}}}function mi(t){let e,n,r,i=[],s=new Map,o,u;const c=t[21].header,h=cn(c,t,t[20],Jn);let f=je(t[2]);const E=p=>p[0]?p[0](p[37].index):p[37].index;for(let p=0;p<f.length;p+=1){let y=Hn(t,f,p),z=E(y);s.set(z,i[p]=Gn(z,y))}const g=t[21].footer,b=cn(g,t,t[20],Wn);return{c(){e=L("div"),h&&h.c(),n=ne(),r=L("div");for(let p=0;p<i.length;p+=1)i[p].c();o=ne(),b&&b.c(),T(r,"class","virtual-list-inner svelte-dwpad5"),T(r,"style",t[4]),T(e,"class","virtual-list-wrapper svelte-dwpad5"),T(e,"style",t[3])},m(p,y){Ee(p,e,y),h&&h.m(e,null),m(e,n),m(e,r);for(let z=0;z<i.length;z+=1)i[z]&&i[z].m(r,null);m(e,o),b&&b.m(e,null),t[22](e),u=!0},p(p,y){h&&h.p&&(!u||y[0]&1048576)&&hn(h,c,p,p[20],u?fn(c,p[20],y,gi):dn(p[20]),Jn),y[0]&1048581&&(f=je(p[2]),In(),i=Lr(i,y,E,1,p,f,s,r,ai,Gn,null,Hn),Cn()),(!u||y[0]&16)&&T(r,"style",p[4]),b&&b.p&&(!u||y[0]&1048576)&&hn(b,g,p,p[20],u?fn(g,p[20],y,di):dn(p[20]),Wn),(!u||y[0]&8)&&T(e,"style",p[3])},i(p){if(!u){_e(h,p);for(let y=0;y<f.length;y+=1)_e(i[y]);_e(b,p),u=!0}},o(p){ye(h,p);for(let y=0;y<i.length;y+=1)ye(i[y]);ye(b,p),u=!1},d(p){p&&ve(e),h&&h.d(p);for(let y=0;y<i.length;y+=1)i[y].d();b&&b.d(p),t[22](null)}}}const pi=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function yi(t,e,n){let{$$slots:r={},$$scope:i}=e,{height:s}=e,{width:o="100%"}=e,{itemCount:u}=e,{itemSize:c}=e,{estimatedItemSize:h=null}=e,{stickyIndices:f=null}=e,{getKey:E=null}=e,{scrollDirection:g=Ge.VERTICAL}=e,{scrollOffset:b=null}=e,{scrollToIndex:p=null}=e,{scrollToAlignment:y=null}=e,{scrollToBehaviour:z="instant"}=e,{overscanCount:P=3}=e;const q=ni(),x=new hi({itemCount:u,itemSize:c,estimatedItemSize:he()});let V=!1,B,H=[],C={offset:b||p!=null&&H.length&&K(p)||0,scrollChangeReason:bt.REQUESTED},a=C,l={scrollToIndex:p,scrollToAlignment:y,scrollOffset:b,itemCount:u,itemSize:c,estimatedItemSize:h},d={},I="",_="";D(),Sn(()=>{n(18,V=!0),B.addEventListener("scroll",O,pi),b!=null?N(b):p!=null&&N(K(p))}),ti(()=>{V&&B.removeEventListener("scroll",O)});function v(){if(!V)return;const S=l.scrollToIndex!==p||l.scrollToAlignment!==y,j=l.itemCount!==u||l.itemSize!==c||l.estimatedItemSize!==h;j&&(x.updateConfig({itemSize:c,itemCount:u,estimatedItemSize:he()}),A()),l.scrollOffset!==b?n(19,C={offset:b||0,scrollChangeReason:bt.REQUESTED}):typeof p=="number"&&(S||j)&&n(19,C={offset:K(p,y,u),scrollChangeReason:bt.REQUESTED}),l={scrollToIndex:p,scrollToAlignment:y,scrollOffset:b,itemCount:u,itemSize:c,estimatedItemSize:h}}function w(){if(!V)return;const{offset:S,scrollChangeReason:j}=C;(a.offset!==S||a.scrollChangeReason!==j)&&D(),a.offset!==S&&j===bt.REQUESTED&&N(S),a=C}function D(){const{offset:S}=C,{start:j,stop:Z}=x.getVisibleRange({containerSize:g===Ge.VERTICAL?s:o,offset:S,overscanCount:P});let W=[];const $=x.getTotalSize();g===Ge.VERTICAL?(n(3,I=`height:${s}${typeof s=="number"?"px":""};width:${o};`),n(4,_=`flex-direction:column;height:${$}px;`)):(n(3,I=`height:${s};width:${o}${typeof o=="number"?"px":""}`),n(4,_=`min-height:100%;width:${$}px;`));const M=f!=null&&f.length!==0;if(M)for(let F=0;F<f.length;F++){const re=f[F];W.push({index:re,style:R(re,!0)})}if(j!==void 0&&Z!==void 0){for(let F=j;F<=Z;F++)M&&f.includes(F)||W.push({index:F,style:R(F,!1)});q("itemsUpdated",{start:j,end:Z})}n(2,H=W)}function N(S){"scroll"in B?B.scroll({[fi[g]]:S,behavior:z}):n(1,B[qn[g]]=S,B)}function A(S=0){d={},x.resetItem(S),D()}function K(S,j=y,Z=u){return(S<0||S>=Z)&&(S=0),x.getUpdatedOffsetForIndex({align:j,containerSize:g===Ge.VERTICAL?s:o,currentOffset:C.offset||0,targetIndex:S})}function O(S){const j=fe();j<0||C.offset===j||S.target!==B||(n(19,C={offset:j,scrollChangeReason:bt.OBSERVED}),q("afterScroll",{offset:j,event:S}))}function fe(){return B[qn[g]]}function he(){return h||typeof c=="number"&&c||50}function R(S,j){if(d[S])return d[S];const{size:Z,offset:W}=x.getSizeAndPositionForIndex(S);let $;return g===Ge.VERTICAL?($=`left:0;width:100%;height:${Z}px;`,j?$+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${W}px;margin-bottom:${-(W+Z)}px;`:$+=`position:absolute;top:${W}px;`):($=`top:0;width:${Z}px;`,j?$+=`position:sticky;z-index:1;left:0;margin-left:${W}px;margin-right:${-(W+Z)}px;`:$+=`position:absolute;height:100%;left:${W}px;`),d[S]=$}function G(S){Kt[S?"unshift":"push"](()=>{B=S,n(1,B)})}return t.$$set=S=>{"height"in S&&n(5,s=S.height),"width"in S&&n(6,o=S.width),"itemCount"in S&&n(7,u=S.itemCount),"itemSize"in S&&n(8,c=S.itemSize),"estimatedItemSize"in S&&n(9,h=S.estimatedItemSize),"stickyIndices"in S&&n(10,f=S.stickyIndices),"getKey"in S&&n(0,E=S.getKey),"scrollDirection"in S&&n(11,g=S.scrollDirection),"scrollOffset"in S&&n(12,b=S.scrollOffset),"scrollToIndex"in S&&n(13,p=S.scrollToIndex),"scrollToAlignment"in S&&n(14,y=S.scrollToAlignment),"scrollToBehaviour"in S&&n(15,z=S.scrollToBehaviour),"overscanCount"in S&&n(16,P=S.overscanCount),"$$scope"in S&&n(20,i=S.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&v(),t.$$.dirty[0]&524288&&w(),t.$$.dirty[0]&263264&&V&&A(0)},[E,B,H,I,_,s,o,u,c,h,f,g,b,p,y,z,P,A,V,C,i,r,G]}class bi extends lt{constructor(e){super(),ot(this,e,yi,mi,Xe,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),Re()}get width(){return this.$$.ctx[6]}set width(e){this.$$set({width:e}),Re()}get itemCount(){return this.$$.ctx[7]}set itemCount(e){this.$$set({itemCount:e}),Re()}get itemSize(){return this.$$.ctx[8]}set itemSize(e){this.$$set({itemSize:e}),Re()}get estimatedItemSize(){return this.$$.ctx[9]}set estimatedItemSize(e){this.$$set({estimatedItemSize:e}),Re()}get stickyIndices(){return this.$$.ctx[10]}set stickyIndices(e){this.$$set({stickyIndices:e}),Re()}get getKey(){return this.$$.ctx[0]}set getKey(e){this.$$set({getKey:e}),Re()}get scrollDirection(){return this.$$.ctx[11]}set scrollDirection(e){this.$$set({scrollDirection:e}),Re()}get scrollOffset(){return this.$$.ctx[12]}set scrollOffset(e){this.$$set({scrollOffset:e}),Re()}get scrollToIndex(){return this.$$.ctx[13]}set scrollToIndex(e){this.$$set({scrollToIndex:e}),Re()}get scrollToAlignment(){return this.$$.ctx[14]}set scrollToAlignment(e){this.$$set({scrollToAlignment:e}),Re()}get scrollToBehaviour(){return this.$$.ctx[15]}set scrollToBehaviour(e){this.$$set({scrollToBehaviour:e}),Re()}get overscanCount(){return this.$$.ctx[16]}set overscanCount(e){this.$$set({overscanCount:e}),Re()}get recomputeSizes(){return this.$$.ctx[17]}}const ct=[];function Mr(t,e=Ie){let n;const r=new Set;function i(u){if(Xe(t,u)&&(t=u,n)){const c=!ct.length;for(const h of r)h[1](),ct.push(h,t);if(c){for(let h=0;h<ct.length;h+=2)ct[h][0](ct[h+1]);ct.length=0}}}function s(u){i(u(t))}function o(u,c=Ie){const h=[u,c];return r.add(h),r.size===1&&(n=e(i,s)||Ie),u(t),()=>{r.delete(h),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}var vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fr={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,r){t.exports=r()})(vi,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,o={},u=0,c={parse:function(a,l){var d=(l=l||{}).dynamicTyping||!1;if(C(d)&&(l.dynamicTypingFunction=d,d={}),l.dynamicTyping=d,l.transform=!!C(l.transform)&&l.transform,l.worker&&c.WORKERS_SUPPORTED){var I=function(){if(!c.WORKERS_SUPPORTED)return!1;var v=(D=r.URL||r.webkitURL||null,N=n.toString(),c.BLOB_URL||(c.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",N,")();"],{type:"text/javascript"})))),w=new r.Worker(v),D,N;return w.onmessage=q,w.id=u++,o[w.id]=w}();return I.userStep=l.step,I.userChunk=l.chunk,I.userComplete=l.complete,I.userError=l.error,l.step=C(l.step),l.chunk=C(l.chunk),l.complete=C(l.complete),l.error=C(l.error),delete l.worker,void I.postMessage({input:a,config:l,workerId:I.id})}var _=null;return c.NODE_STREAM_INPUT,typeof a=="string"?(a=function(v){return v.charCodeAt(0)===65279?v.slice(1):v}(a),_=l.download?new E(l):new b(l)):a.readable===!0&&C(a.read)&&C(a.on)?_=new p(l):(r.File&&a instanceof File||a instanceof Object)&&(_=new g(l)),_.stream(a)},unparse:function(a,l){var d=!1,I=!0,_=",",v=`\r
`,w='"',D=w+w,N=!1,A=null,K=!1;(function(){if(typeof l=="object"){if(typeof l.delimiter!="string"||c.BAD_DELIMITERS.filter(function(R){return l.delimiter.indexOf(R)!==-1}).length||(_=l.delimiter),(typeof l.quotes=="boolean"||typeof l.quotes=="function"||Array.isArray(l.quotes))&&(d=l.quotes),typeof l.skipEmptyLines!="boolean"&&typeof l.skipEmptyLines!="string"||(N=l.skipEmptyLines),typeof l.newline=="string"&&(v=l.newline),typeof l.quoteChar=="string"&&(w=l.quoteChar),typeof l.header=="boolean"&&(I=l.header),Array.isArray(l.columns)){if(l.columns.length===0)throw new Error("Option columns is empty");A=l.columns}l.escapeChar!==void 0&&(D=l.escapeChar+w),(typeof l.escapeFormulae=="boolean"||l.escapeFormulae instanceof RegExp)&&(K=l.escapeFormulae instanceof RegExp?l.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var O=new RegExp(z(w),"g");if(typeof a=="string"&&(a=JSON.parse(a)),Array.isArray(a)){if(!a.length||Array.isArray(a[0]))return fe(null,a,N);if(typeof a[0]=="object")return fe(A||Object.keys(a[0]),a,N)}else if(typeof a=="object")return typeof a.data=="string"&&(a.data=JSON.parse(a.data)),Array.isArray(a.data)&&(a.fields||(a.fields=a.meta&&a.meta.fields||A),a.fields||(a.fields=Array.isArray(a.data[0])?a.fields:typeof a.data[0]=="object"?Object.keys(a.data[0]):[]),Array.isArray(a.data[0])||typeof a.data[0]=="object"||(a.data=[a.data])),fe(a.fields||[],a.data||[],N);throw new Error("Unable to serialize unrecognized input");function fe(R,G,S){var j="";typeof R=="string"&&(R=JSON.parse(R)),typeof G=="string"&&(G=JSON.parse(G));var Z=Array.isArray(R)&&0<R.length,W=!Array.isArray(G[0]);if(Z&&I){for(var $=0;$<R.length;$++)0<$&&(j+=_),j+=he(R[$],$);0<G.length&&(j+=v)}for(var M=0;M<G.length;M++){var F=Z?R.length:G[M].length,re=!1,oe=Z?Object.keys(G[M]).length===0:G[M].length===0;if(S&&!Z&&(re=S==="greedy"?G[M].join("").trim()==="":G[M].length===1&&G[M][0].length===0),S==="greedy"&&Z){for(var ie=[],ae=0;ae<F;ae++){var ue=W?R[ae]:ae;ie.push(G[M][ue])}re=ie.join("").trim()===""}if(!re){for(var Q=0;Q<F;Q++){0<Q&&!oe&&(j+=_);var Oe=Z&&W?R[Q]:Q;j+=he(G[M][Oe],Q)}M<G.length-1&&(!S||0<F&&!oe)&&(j+=v)}}return j}function he(R,G){if(R==null)return"";if(R.constructor===Date)return JSON.stringify(R).slice(1,25);var S=!1;K&&typeof R=="string"&&K.test(R)&&(R="'"+R,S=!0);var j=R.toString().replace(O,D);return(S=S||d===!0||typeof d=="function"&&d(R,G)||Array.isArray(d)&&d[G]||function(Z,W){for(var $=0;$<W.length;$++)if(-1<Z.indexOf(W[$]))return!0;return!1}(j,c.BAD_DELIMITERS)||-1<j.indexOf(_)||j.charAt(0)===" "||j.charAt(j.length-1)===" ")?w+j+w:j}}};if(c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!r.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=P,c.ParserHandle=y,c.NetworkStreamer=E,c.FileStreamer=g,c.StringStreamer=b,c.ReadableStreamStreamer=p,r.jQuery){var h=r.jQuery;h.fn.parse=function(a){var l=a.config||{},d=[];return this.each(function(v){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var w=0;w<this.files.length;w++)d.push({file:this.files[w],inputElem:this,instanceConfig:h.extend({},l)})}),I(),this;function I(){if(d.length!==0){var v,w,D,N,A=d[0];if(C(a.before)){var K=a.before(A.file,A.inputElem);if(typeof K=="object"){if(K.action==="abort")return v="AbortError",w=A.file,D=A.inputElem,N=K.reason,void(C(a.error)&&a.error({name:v},w,D,N));if(K.action==="skip")return void _();typeof K.config=="object"&&(A.instanceConfig=h.extend(A.instanceConfig,K.config))}else if(K==="skip")return void _()}var O=A.instanceConfig.complete;A.instanceConfig.complete=function(fe){C(O)&&O(fe,A.file,A.inputElem),_()},c.parse(A.file,A.instanceConfig)}else C(a.complete)&&a.complete()}function _(){d.splice(0,1),I()}}}function f(a){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(l){var d=B(l);d.chunkSize=parseInt(d.chunkSize),l.step||l.chunk||(d.chunkSize=null),this._handle=new y(d),(this._handle.streamer=this)._config=d}).call(this,a),this.parseChunk=function(l,d){if(this.isFirstChunk&&C(this._config.beforeFirstChunk)){var I=this._config.beforeFirstChunk(l);I!==void 0&&(l=I)}this.isFirstChunk=!1,this._halted=!1;var _=this._partialLine+l;this._partialLine="";var v=this._handle.parse(_,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var w=v.meta.cursor;this._finished||(this._partialLine=_.substring(w-this._baseIndex),this._baseIndex=w),v&&v.data&&(this._rowCount+=v.data.length);var D=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)r.postMessage({results:v,workerId:c.WORKER_ID,finished:D});else if(C(this._config.chunk)&&!d){if(this._config.chunk(v,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);v=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(v.data),this._completeResults.errors=this._completeResults.errors.concat(v.errors),this._completeResults.meta=v.meta),this._completed||!D||!C(this._config.complete)||v&&v.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),D||v&&v.meta.paused||this._nextChunk(),v}this._halted=!0},this._sendError=function(l){C(this._config.error)?this._config.error(l):s&&this._config.error&&r.postMessage({workerId:c.WORKER_ID,error:l,finished:!1})}}function E(a){var l;(a=a||{}).chunkSize||(a.chunkSize=c.RemoteChunkSize),f.call(this,a),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(d){this._input=d,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(l=new XMLHttpRequest,this._config.withCredentials&&(l.withCredentials=this._config.withCredentials),i||(l.onload=H(this._chunkLoaded,this),l.onerror=H(this._chunkError,this)),l.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var d=this._config.downloadRequestHeaders;for(var I in d)l.setRequestHeader(I,d[I])}if(this._config.chunkSize){var _=this._start+this._config.chunkSize-1;l.setRequestHeader("Range","bytes="+this._start+"-"+_)}try{l.send(this._config.downloadRequestBody)}catch(v){this._chunkError(v.message)}i&&l.status===0&&this._chunkError()}},this._chunkLoaded=function(){l.readyState===4&&(l.status<200||400<=l.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:l.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(d){var I=d.getResponseHeader("Content-Range");return I===null?-1:parseInt(I.substring(I.lastIndexOf("/")+1))}(l),this.parseChunk(l.responseText)))},this._chunkError=function(d){var I=l.statusText||d;this._sendError(new Error(I))}}function g(a){var l,d;(a=a||{}).chunkSize||(a.chunkSize=c.LocalChunkSize),f.call(this,a);var I=typeof FileReader<"u";this.stream=function(_){this._input=_,d=_.slice||_.webkitSlice||_.mozSlice,I?((l=new FileReader).onload=H(this._chunkLoaded,this),l.onerror=H(this._chunkError,this)):l=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var _=this._input;if(this._config.chunkSize){var v=Math.min(this._start+this._config.chunkSize,this._input.size);_=d.call(_,this._start,v)}var w=l.readAsText(_,this._config.encoding);I||this._chunkLoaded({target:{result:w}})},this._chunkLoaded=function(_){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(_.target.result)},this._chunkError=function(){this._sendError(l.error)}}function b(a){var l;f.call(this,a=a||{}),this.stream=function(d){return l=d,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var d,I=this._config.chunkSize;return I?(d=l.substring(0,I),l=l.substring(I)):(d=l,l=""),this._finished=!l,this.parseChunk(d)}}}function p(a){f.call(this,a=a||{});var l=[],d=!0,I=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(_){this._input=_,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){I&&l.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),l.length?this.parseChunk(l.shift()):d=!0},this._streamData=H(function(_){try{l.push(typeof _=="string"?_:_.toString(this._config.encoding)),d&&(d=!1,this._checkIsFinished(),this.parseChunk(l.shift()))}catch(v){this._streamError(v)}},this),this._streamError=H(function(_){this._streamCleanUp(),this._sendError(_)},this),this._streamEnd=H(function(){this._streamCleanUp(),I=!0,this._streamData("")},this),this._streamCleanUp=H(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function y(a){var l,d,I,_=Math.pow(2,53),v=-_,w=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,D=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,N=this,A=0,K=0,O=!1,fe=!1,he=[],R={data:[],errors:[],meta:{}};if(C(a.step)){var G=a.step;a.step=function(M){if(R=M,Z())j();else{if(j(),R.data.length===0)return;A+=M.data.length,a.preview&&A>a.preview?d.abort():(R.data=R.data[0],G(R,N))}}}function S(M){return a.skipEmptyLines==="greedy"?M.join("").trim()==="":M.length===1&&M[0].length===0}function j(){return R&&I&&($("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),I=!1),a.skipEmptyLines&&(R.data=R.data.filter(function(M){return!S(M)})),Z()&&function(){if(!R)return;function M(re,oe){C(a.transformHeader)&&(re=a.transformHeader(re,oe)),he.push(re)}if(Array.isArray(R.data[0])){for(var F=0;Z()&&F<R.data.length;F++)R.data[F].forEach(M);R.data.splice(0,1)}else R.data.forEach(M)}(),function(){if(!R||!a.header&&!a.dynamicTyping&&!a.transform)return R;function M(re,oe){var ie,ae=a.header?{}:[];for(ie=0;ie<re.length;ie++){var ue=ie,Q=re[ie];a.header&&(ue=ie>=he.length?"__parsed_extra":he[ie]),a.transform&&(Q=a.transform(Q,ue)),Q=W(ue,Q),ue==="__parsed_extra"?(ae[ue]=ae[ue]||[],ae[ue].push(Q)):ae[ue]=Q}return a.header&&(ie>he.length?$("FieldMismatch","TooManyFields","Too many fields: expected "+he.length+" fields but parsed "+ie,K+oe):ie<he.length&&$("FieldMismatch","TooFewFields","Too few fields: expected "+he.length+" fields but parsed "+ie,K+oe)),ae}var F=1;return!R.data.length||Array.isArray(R.data[0])?(R.data=R.data.map(M),F=R.data.length):R.data=M(R.data,0),a.header&&R.meta&&(R.meta.fields=he),K+=F,R}()}function Z(){return a.header&&he.length===0}function W(M,F){return re=M,a.dynamicTypingFunction&&a.dynamicTyping[re]===void 0&&(a.dynamicTyping[re]=a.dynamicTypingFunction(re)),(a.dynamicTyping[re]||a.dynamicTyping)===!0?F==="true"||F==="TRUE"||F!=="false"&&F!=="FALSE"&&(function(oe){if(w.test(oe)){var ie=parseFloat(oe);if(v<ie&&ie<_)return!0}return!1}(F)?parseFloat(F):D.test(F)?new Date(F):F===""?null:F):F;var re}function $(M,F,re,oe){var ie={type:M,code:F,message:re};oe!==void 0&&(ie.row=oe),R.errors.push(ie)}this.parse=function(M,F,re){var oe=a.quoteChar||'"';if(a.newline||(a.newline=function(ue,Q){ue=ue.substring(0,1048576);var Oe=new RegExp(z(Q)+"([^]*?)"+z(Q),"gm"),pe=(ue=ue.replace(Oe,"")).split("\r"),De=ue.split(`
`),we=1<De.length&&De[0].length<pe[0].length;if(pe.length===1||we)return`
`;for(var Ce=0,te=0;te<pe.length;te++)pe[te][0]===`
`&&Ce++;return Ce>=pe.length/2?`\r
`:"\r"}(M,oe)),I=!1,a.delimiter)C(a.delimiter)&&(a.delimiter=a.delimiter(M),R.meta.delimiter=a.delimiter);else{var ie=function(ue,Q,Oe,pe,De){var we,Ce,te,de;De=De||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Le=0;Le<De.length;Le++){var Y=De[Le],Je=0,Me=0,xe=0;te=void 0;for(var Ve=new P({comments:pe,delimiter:Y,newline:Q,preview:10}).parse(ue),qe=0;qe<Ve.data.length;qe++)if(Oe&&S(Ve.data[qe]))xe++;else{var Ae=Ve.data[qe].length;Me+=Ae,te!==void 0?0<Ae&&(Je+=Math.abs(Ae-te),te=Ae):te=Ae}0<Ve.data.length&&(Me/=Ve.data.length-xe),(Ce===void 0||Je<=Ce)&&(de===void 0||de<Me)&&1.99<Me&&(Ce=Je,we=Y,de=Me)}return{successful:!!(a.delimiter=we),bestDelimiter:we}}(M,a.newline,a.skipEmptyLines,a.comments,a.delimitersToGuess);ie.successful?a.delimiter=ie.bestDelimiter:(I=!0,a.delimiter=c.DefaultDelimiter),R.meta.delimiter=a.delimiter}var ae=B(a);return a.preview&&a.header&&ae.preview++,l=M,d=new P(ae),R=d.parse(l,F,re),j(),O?{meta:{paused:!0}}:R||{meta:{paused:!1}}},this.paused=function(){return O},this.pause=function(){O=!0,d.abort(),l=C(a.chunk)?"":l.substring(d.getCharIndex())},this.resume=function(){N.streamer._halted?(O=!1,N.streamer.parseChunk(l,!0)):setTimeout(N.resume,3)},this.aborted=function(){return fe},this.abort=function(){fe=!0,d.abort(),R.meta.aborted=!0,C(a.complete)&&a.complete(R),l=""}}function z(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function P(a){var l,d=(a=a||{}).delimiter,I=a.newline,_=a.comments,v=a.step,w=a.preview,D=a.fastMode,N=l=a.quoteChar===void 0||a.quoteChar===null?'"':a.quoteChar;if(a.escapeChar!==void 0&&(N=a.escapeChar),(typeof d!="string"||-1<c.BAD_DELIMITERS.indexOf(d))&&(d=","),_===d)throw new Error("Comment character same as delimiter");_===!0?_="#":(typeof _!="string"||-1<c.BAD_DELIMITERS.indexOf(_))&&(_=!1),I!==`
`&&I!=="\r"&&I!==`\r
`&&(I=`
`);var A=0,K=!1;this.parse=function(O,fe,he){if(typeof O!="string")throw new Error("Input must be a string");var R=O.length,G=d.length,S=I.length,j=_.length,Z=C(v),W=[],$=[],M=[],F=A=0;if(!O)return ce();if(a.header&&!fe){var re=O.split(I)[0].split(d),oe=[],ie={},ae=!1;for(var ue in re){var Q=re[ue];C(a.transformHeader)&&(Q=a.transformHeader(Q,ue));var Oe=Q,pe=ie[Q]||0;for(0<pe&&(ae=!0,Oe=Q+"_"+pe),ie[Q]=pe+1;oe.includes(Oe);)Oe=Oe+"_"+pe;oe.push(Oe)}if(ae){var De=O.split(I);De[0]=oe.join(d),O=De.join(I)}}if(D||D!==!1&&O.indexOf(l)===-1){for(var we=O.split(I),Ce=0;Ce<we.length;Ce++){if(M=we[Ce],A+=M.length,Ce!==we.length-1)A+=I.length;else if(he)return ce();if(!_||M.substring(0,j)!==_){if(Z){if(W=[],xe(M.split(d)),Ye(),K)return ce()}else xe(M.split(d));if(w&&w<=Ce)return W=W.slice(0,w),ce(!0)}}return ce()}for(var te=O.indexOf(d,A),de=O.indexOf(I,A),Le=new RegExp(z(N)+z(l),"g"),Y=O.indexOf(l,A);;)if(O[A]!==l)if(_&&M.length===0&&O.substring(A,A+j)===_){if(de===-1)return ce();A=de+S,de=O.indexOf(I,A),te=O.indexOf(d,A)}else if(te!==-1&&(te<de||de===-1))M.push(O.substring(A,te)),A=te+G,te=O.indexOf(d,A);else{if(de===-1)break;if(M.push(O.substring(A,de)),Ae(de+S),Z&&(Ye(),K))return ce();if(w&&W.length>=w)return ce(!0)}else for(Y=A,A++;;){if((Y=O.indexOf(l,Y+1))===-1)return he||$.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:W.length,index:A}),qe();if(Y===R-1)return qe(O.substring(A,Y).replace(Le,l));if(l!==N||O[Y+1]!==N){if(l===N||Y===0||O[Y-1]!==N){te!==-1&&te<Y+1&&(te=O.indexOf(d,Y+1)),de!==-1&&de<Y+1&&(de=O.indexOf(I,Y+1));var Je=Ve(de===-1?te:Math.min(te,de));if(O.substr(Y+1+Je,G)===d){M.push(O.substring(A,Y).replace(Le,l)),O[A=Y+1+Je+G]!==l&&(Y=O.indexOf(l,A)),te=O.indexOf(d,A),de=O.indexOf(I,A);break}var Me=Ve(de);if(O.substring(Y+1+Me,Y+1+Me+S)===I){if(M.push(O.substring(A,Y).replace(Le,l)),Ae(Y+1+Me+S),te=O.indexOf(d,A),Y=O.indexOf(l,A),Z&&(Ye(),K))return ce();if(w&&W.length>=w)return ce(!0);break}$.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:W.length,index:A}),Y++}}else Y++}return qe();function xe(Te){W.push(Te),F=A}function Ve(Te){var Ke=0;if(Te!==-1){var le=O.substring(Y+1,Te);le&&le.trim()===""&&(Ke=le.length)}return Ke}function qe(Te){return he||(Te===void 0&&(Te=O.substring(A)),M.push(Te),A=R,xe(M),Z&&Ye()),ce()}function Ae(Te){A=Te,xe(M),M=[],de=O.indexOf(I,A)}function ce(Te){return{data:W,errors:$,meta:{delimiter:d,linebreak:I,aborted:K,truncated:!!Te,cursor:F+(fe||0)}}}function Ye(){v(ce()),W=[],$=[]}},this.abort=function(){K=!0},this.getCharIndex=function(){return A}}function q(a){var l=a.data,d=o[l.workerId],I=!1;if(l.error)d.userError(l.error,l.file);else if(l.results&&l.results.data){var _={abort:function(){I=!0,x(l.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:V,resume:V};if(C(d.userStep)){for(var v=0;v<l.results.data.length&&(d.userStep({data:l.results.data[v],errors:l.results.errors,meta:l.results.meta},_),!I);v++);delete l.results}else C(d.userChunk)&&(d.userChunk(l.results,_,l.file),delete l.results)}l.finished&&!I&&x(l.workerId,l.results)}function x(a,l){var d=o[a];C(d.userComplete)&&d.userComplete(l),d.terminate(),delete o[a]}function V(){throw new Error("Not implemented.")}function B(a){if(typeof a!="object"||a===null)return a;var l=Array.isArray(a)?[]:{};for(var d in a)l[d]=B(a[d]);return l}function H(a,l){return function(){a.apply(l,arguments)}}function C(a){return typeof a=="function"}return s&&(r.onmessage=function(a){var l=a.data;if(c.WORKER_ID===void 0&&l&&(c.WORKER_ID=l.workerId),typeof l.input=="string")r.postMessage({workerId:c.WORKER_ID,results:c.parse(l.input,l.config),finished:!0});else if(r.File&&l.input instanceof File||l.input instanceof Object){var d=c.parse(l.input,l.config);d&&r.postMessage({workerId:c.WORKER_ID,results:d,finished:!0})}}),(E.prototype=Object.create(f.prototype)).constructor=E,(g.prototype=Object.create(f.prototype)).constructor=g,(b.prototype=Object.create(b.prototype)).constructor=b,(p.prototype=Object.create(f.prototype)).constructor=p,c})})(Fr);var ki=Fr.exports;const Ei=wi(ki),Ai="https://jburel.github.io/ome2024-ngff-challenge/idr-mark.svg",Si="https://jburel.github.io/ome2024-ngff-challenge/nfdi4bioimage.png",Ii="https://raw.githubusercontent.com/will-moore/ome2024-ngff-challenge/hierarchy_browser/samples/ngff_samples.csv";let Ci={IDR:"https://idr.openmicroscopy.org",Webknossos:"https://scalableminds.com",JAX:"http://jax.org","BioImage Archive":"https://www.ebi.ac.uk",Crick:"https://www.crick.ac.uk/","University of Muenster":"https://nfdi4bioimage.de/",Göttingen:"https://nfdi4bioimage.de/",Jülich:"https://nfdi4bioimage.de/",NFDI4BIOIMAGE:"https://nfdi4bioimage.de/"};function Yn(t){if(t==="IDR")return Ai;let e=Ci[t];return e?e==="https://nfdi4bioimage.de/"?Si:`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${e}&size=24`:null}function Dr(t,e,n={}){Ei.parse(t,{header:!1,download:!0,skipEmptyLines:"greedy",complete:function(r){let i=["url"],s=r.data[0];s.length>1&&(i=s,r.data.shift());let o=r.data.map(f=>{let E={...n};for(let g=0;g<i.length;g++)E[i[g]]=f[g];return E}),u=o.filter(f=>{var E;return!((E=f.url)!=null&&E.endsWith(".csv"))}),c={};u.forEach(f=>{if(c[f.url]){console.warn("Removing duplicate URL:",f.url);return}c[f.url]=f}),u=Object.values(c);let h=o.filter(f=>{var E;return(E=f.url)==null?void 0:E.includes(".csv")});e.addCsv(t,h,u.length),e.addRows(u),h.forEach(f=>{let E=f.url;f.csv=E,Dr(E,e,f)})}})}async function Nr(t){return await fetch(t).then(e=>e.json())}function Jt(t){if(!t)return"";const e=2;return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(e)+" KB":t<1024*1024*1024?(t/(1024*1024)).toFixed(e)+" MB":t<1024*1024*1024*1024?(t/(1024*1024*1024)).toFixed(e)+" GB":t<1024*1024*1024*1024*1024?(t/(1024*1024*1024*1024)).toFixed(e)+" TB":(t/(1024*1024*1024*1024*1024)).toFixed(e)+" PB"}function Ti(t,e){return Array.from({length:e-t},(n,r)=>r+t)}function zi(t,e,n){const r=t[0].shape,i=r[0],s=r[1],o=i*s;e||(e=t.map(Pr));const u=new Uint8ClampedArray(4*i*s).fill(0);let c=0;for(let h=0;h<o;h++){for(let f=0;f<t.length;f++){let E=n[f],g=t[f].data,b=e[f],y=(g[h]-b[0])/(b[1]-b[0]);for(let z=0;z<3;z++){let P=y*E[z]<<0;u[c*4+z]=Math.max(u[c*4+z],P)}}u[c*4+3]=255,c+=1}return u}function Pr(t){const e=t.data;let n=0,r=1/0,i=t.data.length;for(let s=0;s<i;s++){let o=e[s];n=Math.max(n,o),r=Math.min(r,o)}return[r,n]}const qt=4,$e={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},Ri=[$e.magenta,$e.green],Oi=[$e.red,$e.green,$e.blue],Qn=Object.values($e).slice(0,-2);function Li(t){let e;return t<=qt?e=Array(t).fill(!0):e=[...Array(qt).fill(!0),...Array(t-qt).fill(!1)],e}function Mi(t,e){let n=[];if(t==1)n=[$e.white];else if(t==2)n=Ri;else if(t===3)n=Oi;else if(t<=qt)n=Qn.slice(0,t);else{n=Array(t).fill($e.white);const r=e.flatMap((i,s)=>i?s:[]);for(const[i,s]of r.entries())n[s]=Qn[i]}return n.map(Br)}function Br(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),r=parseInt(t.slice(4,6),16);return[e,n,r]}class Ur{constructor(){this.store=Mr({})}async lookupOntologyTerm(e){let n=e.replace("NCBI:txid","");return(await Nr(`https://rest.ensembl.org/taxonomy/id/${n}?content-type=application/json`)).name||e}addTerms(e){let n=xt(this.store);[...new Set(e)].forEach(i=>{i&&(n[i]||(n[i]="Loading...",setTimeout(()=>{this.lookupOntologyTerm(i).then(s=>{this.addEntry(i,s)})},Math.random()*5e3)))})}addEntry(e,n){this.store.update(r=>(r[e]=n,r))}subscribe(e){return this.store.subscribe(e)}}class Fi extends Ur{constructor(){super()}async lookupOntologyTerm(e){const n=e.replace("obo:","");return(await Nr(`https://www.ebi.ac.uk/ols4/api/ontologies/fbbi/terms/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252F${n}`)).label||e}}const jr=new Ur,xr=new Fi,Zn=5;async function Gt(t){var r;let e=await fetch(`${t}/zarr.json`).then(i=>{if(i.status===404)throw new Error(`${t}/zarr.json not found`);return i.json()}).catch(i=>[void 0,t]);const n=(r=e==null?void 0:e.attributes)==null?void 0:r.ome;if(!n)return[void 0,t];if(n.multiscales)return[n,t];if(n.plate){let i=n.plate.wells[0],s=`${t}/${i.path}/0`,[o,u]=await Gt(s);return[o,u,n.plate]}else if(n["bioformats2raw.layout"]){let i=`${t}/0`;return await Gt(i)}}class Di{constructor(){this.store=Mr([]),this.csvFiles=[]}getCsvSourceList(e){let n;if(!e)n=this.csvFiles[0];else for(let i of this.csvFiles){if(i.source===e){n=i;break}for(let s of i.child_csv){if(s.source===e){n=s;break}for(let o of s.child_csv)if(o.source===e){n=o;break}}}return n?n.child_csv.map(i=>{let s=i.image_count||0;for(let o of i.child_csv)s+=o.image_count||0;return{...i,total_count:s}}):[]}addCsv(e,n,r){n=n.map(s=>({...s,child_csv:[]}));let i;for(let s of this.csvFiles){if(s.url===e){i=s;break}for(let o of s.child_csv){if(o.url===e){i=o;break}for(let u of o.child_csv)if(u.url===e){i=u;break}}}i?(i.image_count=r,i.child_csv=n):(i={url:e,image_count:r,child_csv:n},this.csvFiles.push(i))}addRows(e){e=e.map(i=>{if(i.written&&(i.written=parseFloat(i.written)),i.shape){let s=i.shape.split(",").map(u=>parseInt(u)),o;i.dimension_names?o=i.dimension_names.split(","):s.length==5&&(o=["t","c","z","y","x"]),o&&o.length==s.length&&o.forEach((u,c)=>i["size_"+u]=s[c]),i.dim_count=s.reduce((u,c)=>u+(c>1?1:0),0)}return i}),console.log("Adding rows",e),this.store.update(i=>(i.push(...e),i));let n=e.map(i=>i.organismId);console.log("organismIds",n),jr.addTerms(n);let r=e.map(i=>i.fbbiId);console.log("fbbiIds",r),xr.addTerms(r)}populateRow(e,n){this.store.update(r=>(r=r.map(i=>(i.url===e&&(i={...i,...n}),i)),r))}async loadNgffMetadata(e){var g;const[n,r,i]=await Gt(e);let s=[],o=0,u=0,c=!1,h=!0,f={multiscales:n},E=r;if(i&&(o=i.wells.length,u=i.field_count||1),n){const b=(g=n[0])==null?void 0:g.datasets[0],p=b==null?void 0:b.path;if(p){const y=await fetch(`${r}/${p}/zarr.json`).then(z=>z.json()).catch(z=>{console.log(`----> Failed to parse ${r}/${p}/zarr.json`,z)});s=y==null?void 0:y.shape}}else console.log("No multiscales found"),c=!0,s=[0];this.populateRow(e,{image_attrs:f,image_url:E,shape:s,well_count:o,field_count:u,load_failed:c,loaded:h})}async loadRocrateJsonAllRows(){let e=xt(this.store);for(let n=0;n<e.length;n=n+Zn){let r=Ti(n,Math.min(n+Zn,e.length)).map(i=>this.loadRocrateJson(e[i].url));await Promise.all(r)}}compareRows(e,n,r=!1){let i=e[this.sortColumn],s=n[this.sortColumn];if(r)return i===void 0&&(i=0),s===void 0&&(s=0),i<s?this.sortAscending?-1:1:i>s?this.sortAscending?1:-1:0;i===void 0&&(i=""),s===void 0&&(s="");let o=0;return r?o=i-s:o=i.localeCompare(s),this.sortAscending?o:-o}sortTable(e,n=!0){this.sortColumn=e,this.sortAscending=n;let r=this.isColumnNumeric(e);this.store.update(i=>(i.sort((s,o)=>this.compareRows(s,o,r)),i))}isColumnNumeric(e){let n=xt(this.store);for(let r of n){let i=r[e];if(i!==void 0&&i!=="")return!isNaN(i)}}emptyTable(){this.store.set([])}subscribe(e){return this.store.subscribe(e)}getRows(){return xt(this.store)}}const Ne=new Di;function Ni(t){let e,n,r,i,s,o,u,c;return{c(){e=L("button"),n=ee(t[1]),r=ne(),i=L("span"),i.textContent="^",s=ne(),o=L("span"),o.textContent="^",T(i,"class","acc svelte-1ii807g"),dt(i,"strong",t[3]==t[0]&&t[4]),T(o,"class","dec svelte-1ii807g"),dt(o,"strong",t[3]==t[0]&&!t[4]),T(e,"class","svelte-1ii807g")},m(h,f){Ee(h,e,f),m(e,n),m(e,r),m(e,i),m(e,s),m(e,o),u||(c=Ze(e,"click",t[5]),u=!0)},p(h,[f]){f&2&&ke(n,h[1]),f&25&&dt(i,"strong",h[3]==h[0]&&h[4]),f&25&&dt(o,"strong",h[3]==h[0]&&!h[4])},i:Ie,o:Ie,d(h){h&&ve(e),u=!1,c()}}}function Pi(t,e,n){let{col_name:r}=e,{col_label:i}=e,{handleSort:s}=e,{sortedBy:o}=e,{sortAscending:u}=e;const c=()=>s(r);return t.$$set=h=>{"col_name"in h&&n(0,r=h.col_name),"col_label"in h&&n(1,i=h.col_label),"handleSort"in h&&n(2,s=h.handleSort),"sortedBy"in h&&n(3,o=h.sortedBy),"sortAscending"in h&&n(4,u=h.sortAscending)},[r,i,s,o,u,c]}class ft extends lt{constructor(e){super(),ot(this,e,Pi,Ni,Xe,{col_name:0,col_label:1,handleSort:2,sortedBy:3,sortAscending:4})}}const Bi="https://jburel.github.io/ome2024-ngff-challenge/ome-main-nav.svg";function Ui(t){let e;return{c(){e=L("nav"),e.innerHTML=`<img style="height: 30px" alt="OME Logo" src="${Bi}"/> <h2 class="svelte-jcf7ka">2024 NGFF Challenge</h2> <ul class="svelte-jcf7ka"><li class="svelte-jcf7ka"><a href="https://github.com/ome/ome2024-ngff-challenge/" target="_blank" class="svelte-jcf7ka">About</a></li></ul>`,T(e,"class","svelte-jcf7ka")},m(n,r){Ee(n,e,r)},p:Ie,i:Ie,o:Ie,d(n){n&&ve(e)}}}class ji extends lt{constructor(e){super(),ot(this,e,null,Ui,Xe,{})}}class Nt extends Error{constructor(e,n={}){super(`Node not found: ${e}`,n),this.name="NodeNotFoundError"}}class Tn extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const xi="modulepreload",Vi=function(t){return"https://jburel.github.io/ome2024-ngff-challenge/"+t},$n={},vt=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.all(n.map(u=>{if(u=Vi(u),u in $n)return;$n[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":xi,c||(f.as="script"),f.crossOrigin="",f.href=u,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((E,g)=>{f.addEventListener("load",E),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var Pe;class Vr{constructor(e,n,r){be(this,Pe);typeof e=="number"?me(this,Pe,new Uint8Array(e)):e instanceof ArrayBuffer?me(this,Pe,new Uint8Array(e,n,r)):me(this,Pe,new Uint8Array(Array.from(e,i=>i?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return J(this,Pe).byteOffset}get byteLength(){return J(this,Pe).byteLength}get buffer(){return J(this,Pe).buffer}get length(){return J(this,Pe).length}get(e){let n=J(this,Pe)[e];return typeof n=="number"?n!==0:n}set(e,n){J(this,Pe)[e]=n?1:0}fill(e){J(this,Pe).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}Pe=new WeakMap;var gt;class zn{constructor(e,n,r,i){X(this,"_data");X(this,"chars");be(this,gt);if(this.chars=e,me(this,gt,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*e);else if(n instanceof ArrayBuffer)i&&(i=i*e),this._data=new Uint8Array(n,r,i);else{let s=Array.from(n);this._data=new Uint8Array(s.length*e);for(let o=0;o<s.length;o++)this.set(o,s[o])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(e,n){const r=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);r.fill(0),r.set(J(this,gt).encode(n))}fill(e){const n=J(this,gt).encode(e);for(let r=0;r<this.length;r++)this._data.set(n,r*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}gt=new WeakMap;var Se;const Dn=class Dn{constructor(e,n,r,i){be(this,Se);X(this,"chars");if(this.chars=e,typeof n=="number")me(this,Se,new Int32Array(n*e));else if(n instanceof ArrayBuffer)i&&(i*=e),me(this,Se,new Int32Array(n,r,i));else{const s=n,o=new Dn(e,1);me(this,Se,new Int32Array(function*(){for(let u of s)o.set(0,u),yield*J(o,Se)}()))}}get BYTES_PER_ELEMENT(){return J(this,Se).BYTES_PER_ELEMENT*this.chars}get byteLength(){return J(this,Se).byteLength}get byteOffset(){return J(this,Se).byteOffset}get buffer(){return J(this,Se).buffer}get length(){return J(this,Se).length/this.chars}get(e){const n=this.chars*e;let r="";for(let i=0;i<this.chars;i++)r+=String.fromCodePoint(J(this,Se)[n+i]);return r.replace(/\u0000/g,"")}set(e,n){const r=this.chars*e,i=J(this,Se).subarray(r,r+this.chars);i.fill(0);for(let s=0;s<this.chars;s++)i[s]=n.codePointAt(s)??0}fill(e){this.set(0,e);let n=J(this,Se).subarray(0,this.chars);for(let r=1;r<this.length;r++)J(this,Se).set(n,r*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};Se=new WeakMap;let At=Dn;function Pt(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function Xn(t,e){const n=e/2,r=e-1;let i=0;for(let s=0;s<t.length;s+=e)for(let o=0;o<n;o+=1)i=t[s+o],t[s+o]=t[s+r-o],t[s+r-o]=i}const qi={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:Vr},Wi=/v2:([US])(\d+)/;function qr(t){if(t==="v2:object")return globalThis.Array;let e=t.match(Wi);if(e){let[,r,i]=e;return(r==="U"?At:zn).bind(null,Number(i))}let n=qi[t];if(!n)throw new Error(`Unknown or unsupported data_type: ${t}`);return n}function it(t,e){return(e==="C"?Hi:Ki)(t)}function Hi(t){const e=t.length,n=globalThis.Array(e);for(let r=e-1,i=1;r>=0;r--)n[r]=i,i*=t[r];return n}function Ki(t){const e=t.length,n=globalThis.Array(e);for(let r=0,i=1;r<e;r++)n[r]=i,i*=t[r];return n}function Ji({name:t,configuration:e}){if(t==="default"){const n=(e==null?void 0:e.separator)??"/";return r=>["c",...r].join(n)}if(t==="v2"){const n=(e==null?void 0:e.separator)??".";return r=>r.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function mn(t){var n;const e=t.find(r=>r.name==="transpose");return((n=e==null?void 0:e.configuration)==null?void 0:n.order)==="F"?"F":"C"}const Gi=/^([<|>])(.*)$/;function Yi(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(Gi);if(!e)throw new Error(`Invalid dtype: ${t}`);let[,n,r]=e,i={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[r]??(r.startsWith("S")||r.startsWith("U")?`v2:${r}`:void 0);if(!i)throw new Error(`Unsupported or unknown dtype: ${t}`);return n==="|"?{data_type:i}:{data_type:i,endian:n==="<"?"little":"big"}}function Qi(t,e={}){let n=[],r=Yi(t.dtype);t.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in r&&r.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:i,...s}of t.filters??[])n.push({name:i,configuration:s});if(t.compressor){let{id:i,...s}=t.compressor;n.push({name:i,configuration:s})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:r.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:n,fill_value:t.fill_value,attributes:e}}function Zi(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function $i(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let n=t==="bool";if(e==="boolean")return n;let r=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return r;let i=t==="int64"||t==="uint64";if(e==="bigint")return i;let s=t==="v2:object";return e==="object"?s:!r&&!i&&!n&&!s}function Xi(t){return(t==null?void 0:t.name)==="sharding_indexed"}function Wr(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}const er=es();function es(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function tr(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var St,Qe,It,Ct,mt;const Nn=class Nn{constructor(e,n){X(this,"kind","array_to_bytes");be(this,St);be(this,Qe);be(this,It);be(this,Ct);be(this,mt);me(this,mt,e==null?void 0:e.endian),me(this,Qe,qr(n.data_type)),me(this,Ct,n.shape),me(this,St,it(n.shape,mn(n.codecs)));const r=new(J(this,Qe))(0);me(this,It,r.BYTES_PER_ELEMENT)}static fromConfig(e,n){return new Nn(e,n)}encode(e){let n=new Uint8Array(e.data.buffer);return er&&J(this,mt)==="big"&&Xn(n,tr(J(this,Qe))),n}decode(e){return er&&J(this,mt)==="big"&&Xn(e,tr(J(this,Qe))),{data:new(J(this,Qe))(e.buffer,e.byteOffset,e.byteLength/J(this,It)),shape:J(this,Ct),stride:J(this,St)}}};St=new WeakMap,Qe=new WeakMap,It=new WeakMap,Ct=new WeakMap,mt=new WeakMap;let Yt=Nn;class Rn{constructor(){X(this,"kind","bytes_to_bytes")}static fromConfig(){return new Rn}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}function ts(t,e){if(Number.isNaN(e))throw new Error("JsonCodec allow_nan is false but NaN was encountered during encoding.");if(e===Number.POSITIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but Infinity was encountered during encoding.");if(e===Number.NEGATIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but -Infinity was encountered during encoding.");return e}function ns(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((n,r)=>(n[r]=e[r],n),{}):e}var Tt,zt;const Pn=class Pn{constructor(e={}){X(this,"configuration");X(this,"kind","array_to_bytes");be(this,Tt);be(this,zt);this.configuration=e;const{encoding:n="utf-8",skipkeys:r=!1,ensure_ascii:i=!0,check_circular:s=!0,allow_nan:o=!0,sort_keys:u=!0,indent:c,strict:h=!0}=e;let f=e.separators;f||(c?f=[", ",": "]:f=[",",":"]),me(this,Tt,{encoding:n,skipkeys:r,ensure_ascii:i,check_circular:s,allow_nan:o,indent:c,separators:f,sort_keys:u}),me(this,zt,{strict:h})}static fromConfig(e){return new Pn(e)}encode(e){const{indent:n,encoding:r,ensure_ascii:i,check_circular:s,allow_nan:o,sort_keys:u}=J(this,Tt);if(r!=="utf-8")throw new Error("JsonCodec does not yet support non-utf-8 encoding.");const c=[];if(!s)throw new Error("JsonCodec does not yet support skipping the check for circular references during encoding.");o||c.push(ts),u&&c.push(ns);const h=Array.from(e.data);h.push("|O"),h.push(e.shape);let f;c.length&&(f=(g,b)=>{let p=b;for(let y of c)p=y(g,p);return p});let E=JSON.stringify(h,f,n);return i&&(E=E.replace(/[\u007F-\uFFFF]/g,g=>{const b=`0000${g.charCodeAt(0).toString(16)}`;return`\\u${b.substring(b.length-4)}`})),new TextEncoder().encode(E)}decode(e){const{strict:n}=J(this,zt);if(!n)throw new Error("JsonCodec does not yet support non-strict decoding.");const r=Pt(e),i=r.pop();if(r.pop(),!i)throw new Error("0D not implemented for JsonCodec.");const s=it(i,"C");return{data:r,shape:i,stride:s}}};Tt=new WeakMap,zt=new WeakMap;let pn=Pn;function nr(t){return t instanceof Vr||t instanceof zn||t instanceof At?new Proxy(t,{get(n,r){return n.get(Number(r))},set(n,r,i){return n.set(Number(r),i),!0}}):t}function rs(t,e){let n;return t.data instanceof zn||t.data instanceof At?n=new t.constructor(t.data.length,t.data.chars):n=new t.constructor(t.data.length),{data:n,shape:t.shape,stride:it(t.shape,e)}}function is(t,e){let n=rs(t,e),r=t.shape.length,i=t.data.length,s=Array(r).fill(0),o=nr(t.data),u=nr(n.data);for(let c=0;c<i;c++){let h=0;for(let f=0;f<r;f++)h+=s[f]*n.stride[f];u[h]=o[c],s[0]+=1;for(let f=0;f<r;f++)if(s[f]===t.shape[f]){if(f+1===r)break;s[f]=0,s[f+1]+=1}}return n}function ss(t){if(!t.stride)return"C";let e=it(t.shape,"C");return t.stride.every((n,r)=>n===e[r])?"C":"F"}class On{constructor(e){X(this,"configuration");X(this,"kind","array_to_array");this.configuration=e}static fromConfig(e){return new On(e)}encode(e){var n,r;return ss(e)===((n=this.configuration)==null?void 0:n.order)?e:is(e,((r=this.configuration)==null?void 0:r.order)??"C")}decode(e){return e}}var Rt,Ot;const Bn=class Bn{constructor(e){X(this,"kind","array_to_bytes");be(this,Rt);be(this,Ot);me(this,Rt,e),me(this,Ot,it(e,"C"))}static fromConfig(e,n){return new Bn(n.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let n=new TextDecoder,r=new DataView(e.buffer),i=Array(r.getUint32(0,!0)),s=4;for(let o=0;o<i.length;o++){let u=r.getUint32(s,!0);s+=4,i[o]=n.decode(e.buffer.slice(s,s+u)),s+=u}return{data:i,shape:J(this,Rt),stride:J(this,Ot)}}};Rt=new WeakMap,Ot=new WeakMap;let yn=Bn;function os(){return new Map().set("blosc",()=>vt(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1])).then(t=>t.default)).set("gzip",()=>vt(()=>import("./gzip-CF-9a_hd.js"),__vite__mapDeps([2,3])).then(t=>t.default)).set("lz4",()=>vt(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([4,1])).then(t=>t.default)).set("zlib",()=>vt(()=>import("./zlib-CBiqHlio.js"),__vite__mapDeps([5,3])).then(t=>t.default)).set("zstd",()=>vt(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([6,1])).then(t=>t.default)).set("transpose",()=>On).set("bytes",()=>Yt).set("crc32c",()=>Rn).set("vlen-utf8",()=>yn).set("json2",()=>pn)}const ls=os();function bn(t){let e;return{async encode(n){e||(e=await rr(t));for(const i of e.array_to_array)n=await i.encode(n);let r=await e.array_to_bytes.encode(n);for(const i of e.bytes_to_bytes)r=await i.encode(r);return r},async decode(n){e||(e=await rr(t));for(let i=e.bytes_to_bytes.length-1;i>=0;i--)n=await e.bytes_to_bytes[i].decode(n);let r=await e.array_to_bytes.decode(n);for(let i=e.array_to_array.length-1;i>=0;i--)r=await e.array_to_array[i].decode(r);return r}}}async function rr(t){let e=t.codecs.map(async s=>{var u;let o=await((u=ls.get(s.name))==null?void 0:u());if(!o)throw new Error(`Unknown codec: ${s.name}`);return{Codec:o,meta:s}}),n=[],r,i=[];for await(let{Codec:s,meta:o}of e){let u=s.fromConfig(o.configuration,t);switch(u.kind){case"array_to_array":n.push(u);break;case"array_to_bytes":r=u;break;default:i.push(u)}}if(!r){if(!as(t))throw new Error(`Cannot encode ${t.data_type} to bytes without a codec`);r=Yt.fromConfig({endian:"little"},t)}return{array_to_array:n,array_to_bytes:r,bytes_to_bytes:i}}function as(t){return t.data_type!=="v2:object"}const ir=18446744073709551615n;function us(t,e,n,r){if(t.store.getRange===void 0)throw new Error("Store does not support range requests");let i=t.store.getRange.bind(t.store),s=e.map((c,h)=>c/r.chunk_shape[h]),o=bn({data_type:"uint64",shape:[...s,2],codecs:r.index_codecs}),u={};return async c=>{let h=c.map((q,x)=>Math.floor(q/s[x])),f=t.resolve(n(h)).path,E;if(f in u)E=u[f];else{let q=4,x=16*s.reduce((B,H)=>B*H,1),V=await i(f,{suffixLength:x+q});E=u[f]=V?await o.decode(V):null}if(E===null)return;let{data:g,shape:b,stride:p}=E,y=c.map((q,x)=>q%b[x]).reduce((q,x,V)=>q+x*p[V],0),z=g[y],P=g[y+1];if(!(z===ir&&P===ir))return i(f,{offset:Number(z),length:Number(P)})}}class pt{constructor(e,n="/"){X(this,"store");X(this,"path");this.store=e,this.path=n}resolve(e){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new pt(this.store,new URL(e,n).pathname)}}var Lt;class Ln extends pt{constructor(n,r,i){super(n,r);X(this,"kind","group");be(this,Lt);me(this,Lt,i)}get attrs(){return J(this,Lt).attributes}}Lt=new WeakMap;const wt=Symbol("zarrita.context");function cs(t){return t[wt]}function fs(t,e){let{configuration:n}=e.codecs.find(Xi)??{},r={encode_chunk_key:Ji(e.chunk_key_encoding),TypedArray:qr(e.data_type),fill_value:e.fill_value};if(n){let s=mn(n.codecs);return{...r,kind:"sharded",chunk_shape:n.chunk_shape,codec:bn({data_type:e.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(o,u){return it(o,u??s)},get_chunk_bytes:us(t,e.chunk_grid.configuration.chunk_shape,r.encode_chunk_key,n)}}let i=mn(e.codecs);return{...r,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:bn({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s,o){return it(s,o??i)},async get_chunk_bytes(s,o){let u=r.encode_chunk_key(s),c=t.resolve(u).path;return t.store.get(c,o)}}}var Ir,Cr,rt,Tr;let Qt=(Tr=class extends(Cr=pt,Ir=wt,Cr){constructor(n,r,i){super(n,r);X(this,"kind","array");be(this,rt);X(this,Ir);me(this,rt,{...i,fill_value:Wr(i)}),this[wt]=fs(this,i)}get attrs(){return J(this,rt).attributes}get shape(){return J(this,rt).shape}get chunks(){return this[wt].chunk_shape}get dtype(){return J(this,rt).data_type}async getChunk(n,r){let i=this[wt],s=await i.get_chunk_bytes(n,r);if(!s){let o=i.chunk_shape.reduce((c,h)=>c*h,1),u=new i.TypedArray(o);return u.fill(i.fill_value),{data:u,shape:i.chunk_shape,stride:i.get_strides(i.chunk_shape)}}return i.codec.decode(s)}is(n){return $i(this.dtype,n)}},rt=new WeakMap,Tr),Zt=hs();function hs(){let t=new WeakMap;function e(n){let r=t.get(n)??{v2:0,v3:0};return t.set(n,r),r}return{increment(n,r){e(n)[r]+=1},version_max(n){let r=e(n);return r.v3>r.v2?"v3":"v2"}}}async function ds(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?Pt(e):{}}async function _s(t,e={}){let n="store"in t?t:new pt(t),r={};return(e.attrs??!0)&&(r=await ds(n)),e.kind==="array"?sr(n,r):e.kind==="group"?or(n,r):sr(n,r).catch(i=>{if(i instanceof Nt)return or(n,r);throw i})}async function sr(t,e){let{path:n}=t.resolve(".zarray"),r=await t.store.get(n);if(!r)throw new Nt("v2 array",{cause:new Tn(n)});return Zt.increment(t.store,"v2"),new Qt(t.store,t.path,Qi(Pt(r),e))}async function or(t,e){let{path:n}=t.resolve(".zgroup"),r=await t.store.get(n);if(!r)throw new Nt("v2 group",{cause:new Tn(n)});return Zt.increment(t.store,"v2"),new Ln(t.store,t.path,Zi(Pt(r),e))}async function gs(t){let{store:e,path:n}=t.resolve("zarr.json"),r=await t.store.get(n);if(!r)throw new Nt("v3 array or group",{cause:new Tn(n)});let i=Pt(r);return i.node_type==="array"&&(i.fill_value=Wr(i)),i.node_type==="array"?new Qt(e,t.path,i):new Ln(e,t.path,i)}async function ms(t,e={}){let n="store"in t?t:new pt(t),r=await gs(n);if(Zt.increment(n.store,"v3"),e.kind===void 0||e.kind==="array"&&r instanceof Qt||e.kind==="group"&&r instanceof Ln)return r;let i=r instanceof Qt?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${i}.`)}async function nt(t,e={}){let n="store"in t?t.store:t,r=Zt.version_max(n),i=r==="v2"?nt.v2:nt.v3,s=r==="v2"?nt.v3:nt.v2;return i(t,e).catch(o=>{if(o instanceof Nt)return s(t,e);throw o})}nt.v2=_s;nt.v3=ms;function*ps(t,e,n=1){e===void 0&&(e=t,t=0);for(let r=t;r<e;r+=n)yield r}function*ys(...t){if(t.length===0)return;const e=t.map(r=>r[Symbol.iterator]()),n=e.map(r=>r.next());if(n.some(r=>r.done))throw new Error("Input contains an empty iterator.");for(let r=0;;){if(n[r].done){if(e[r]=t[r][Symbol.iterator](),n[r]=e[r].next(),++r>=e.length)return}else yield n.map(({value:i})=>i),r=0;n[r]=e[r].next()}}function bs({start:t,stop:e,step:n},r){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const i=n<0,[s,o]=i?[-1,r-1]:[0,r];return t===null?t=i?o:s:t<0?(t+=r,t<s&&(t=s)):t>o&&(t=o),e===null?e=i?s:o:e<0?(e+=r,e<s&&(e=s)):e>o&&(e=o),[t,e,n]}function vn(t,e,n=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:n}}function vs(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class Mn extends Error{constructor(e){super(e),this.name="IndexError"}}function ws(t,e){throw new Mn(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function ks(t){throw new Mn(`index out of bounds for dimension with length ${t}`)}function Es(){throw new Mn("only slices with step >= 1 are supported")}function As(t,e){t.length>e.length&&ws(t,e)}function Ss(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&ks(e),t}class Is{constructor({dim_sel:e,dim_len:n,dim_chunk_len:r}){X(this,"dim_sel");X(this,"dim_len");X(this,"dim_chunk_len");X(this,"nitems");e=Ss(e,n),this.dim_sel=e,this.dim_len=n,this.dim_chunk_len=r,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),n=e*this.dim_chunk_len,r=this.dim_sel-n;yield{dim_chunk_ix:e,dim_chunk_sel:r}}}class lr{constructor({dim_sel:e,dim_len:n,dim_chunk_len:r}){X(this,"start");X(this,"stop");X(this,"step");X(this,"dim_len");X(this,"dim_chunk_len");X(this,"nitems");X(this,"nchunks");const[i,s,o]=bs(e,n);this.start=i,this.stop=s,this.step=o,this.step<1&&Es(),this.dim_len=n,this.dim_chunk_len=r,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const r of ps(e,n)){const i=r*this.dim_chunk_len,s=Math.min(this.dim_len,(r+1)*this.dim_chunk_len),o=s-i;let u=0,c=0;if(this.start<i){const b=(i-this.start)%this.step;b&&(c+=this.step-b),u=Math.ceil((i-this.start)/this.step)}else c=this.start-i;const h=this.stop>s?o:this.stop-i,f=[c,h,this.step],E=Math.ceil((h-c)/this.step),g=[u,u+E,1];yield{dim_chunk_ix:r,dim_chunk_sel:f,dim_out_sel:g}}}}function Cs(t,e){let n=[];return t===null?n=e.map(r=>vn(null)):Array.isArray(t)&&(n=t.map(r=>r??vn(null))),As(n,e),n}class Ts{constructor({selection:e,shape:n,chunk_shape:r}){X(this,"dim_indexers");X(this,"shape");this.dim_indexers=Cs(e,n).map((i,s)=>new(typeof i=="number"?Is:lr)({dim_sel:i,dim_len:n[s],dim_chunk_len:r[s]})),this.shape=this.dim_indexers.filter(i=>i instanceof lr).map(i=>i.nitems)}*[Symbol.iterator](){for(const e of ys(...this.dim_indexers)){const n=e.map(i=>i.dim_chunk_ix),r=e.map(i=>"dim_out_sel"in i?{from:i.dim_chunk_sel,to:i.dim_out_sel}:{from:i.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:r}}}}function zs(t,e){return"get"in t?t.get(e):t[e]}async function Rs(t,e,n,r){var c;let i=cs(t),s=new Ts({selection:e,shape:t.shape,chunk_shape:t.chunks}),o=r.prepare(new i.TypedArray(s.shape.reduce((h,f)=>h*f,1)),s.shape,i.get_strides(s.shape,n.order)),u=((c=n.create_queue)==null?void 0:c.call(n))??vs();for(const{chunk_coords:h,mapping:f}of s)u.add(async()=>{let{data:E,shape:g,stride:b}=await t.getChunk(h,n.opts),p=r.prepare(E,g,b);r.set_from_chunk(o,p,f)});return await u.onIdle(),s.shape.length===0?zs(o.data,0):o}function Fn(t,e=0,n){let r=n??t.length-e;return{length:r,subarray(i,s=r){return Fn(t,e+i,s-i)},set(i,s=0){for(let o=0;o<i.length;o++)t[e+s+o]=i.get(o)},get(i){return t[e+i]}}}function an(t){return globalThis.Array.isArray(t.data)?{data:Fn(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function Os(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function Ls(t,e){if(globalThis.Array.isArray(t.data))return Fn([e]);let n=Os(t.data),r=new n([e]);return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}const Ms={prepare(t,e,n){return{data:t,shape:e,stride:n}},set_scalar(t,e,n){let r=an(t);wn(r,e,Ls(t,n),r.bytes_per_element)},set_from_chunk(t,e,n){let r=an(t);Wt(r,an(e),r.bytes_per_element,n)}};async function Fs(t,e=null,n={}){return Rs(t,e,n,Ms)}function Hr(t,e,n){return n<0&&e<t?Math.floor((t-e-1)/-n)+1:t<e?Math.floor((e-t-1)/n)+1:0}function wn(t,e,n,r){if(e.length===0){t.data.set(n,0);return}const[i,...s]=e,[o,...u]=t.stride;if(typeof i=="number"){const g=t.data.subarray(o*i*r);wn({data:g,stride:u},s,n,r);return}const[c,h,f]=i,E=Hr(c,h,f);if(s.length===0){for(let g=0;g<E;g++)t.data.set(n,o*(c+f*g)*r);return}for(let g=0;g<E;g++){const b=t.data.subarray(o*(c+f*g)*r);wn({data:b,stride:u},s,n,r)}}function Wt(t,e,n,r){const[i,...s]=r,[o,...u]=t.stride,[c,...h]=e.stride;if(i.from===null){if(s.length===0){t.data.set(e.data.subarray(0,n),i.to*n);return}Wt({data:t.data.subarray(o*i.to*n),stride:u},e,n,s);return}if(i.to===null){if(s.length===0){let P=i.from*n;t.data.set(e.data.subarray(P,P+n),0);return}Wt(t,{data:e.data.subarray(c*i.from*n),stride:h},n,s);return}const[f,E,g]=i.to,[b,p,y]=i.from,z=Hr(f,E,g);if(s.length===0){if(g===1&&y===1&&o===1&&c===1){let P=b*n,q=z*n;t.data.set(e.data.subarray(P,P+q),f*n);return}for(let P=0;P<z;P++){let q=c*(b+y*P)*n;t.data.set(e.data.subarray(q,q+n),o*(f+g*P)*n)}return}for(let P=0;P<z;P++)Wt({data:t.data.subarray(o*(f+P*g)*n),stride:u},{data:e.data.subarray(c*(b+P*y)*n),stride:h},n,s)}function Kr(t,e,n,r={}){return e!==void 0&&n!==void 0&&(r={...r,headers:{...r.headers,Range:`bytes=${e}-${e+n-1}`}}),fetch(t,r)}function Ds(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function ar(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const r=new URL(e.slice(1),n);return r.search=n.search,r}async function ur(t){if(!(t.status===404||t.status===403)){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function Ns(t,e,n,r){if(r)return fetch(t,{...n,headers:{...n.headers,Range:`bytes=-${e}`}});let i=await fetch(t,{...n,method:"HEAD"});if(!i.ok)return i;let s=i.headers.get("Content-Length"),o=Number(s);return Kr(t,o-e,o,n)}var Mt,Ft,Dt,kn;class Ps{constructor(e,n={}){be(this,Dt);X(this,"url");be(this,Mt);be(this,Ft);this.url=e,me(this,Mt,n.overrides??{}),me(this,Ft,n.useSuffixRequest??!1)}async get(e,n={}){let r=ar(this.url,e).href,i=await fetch(r,on(this,Dt,kn).call(this,n));return ur(i)}async getRange(e,n,r={}){let i=ar(this.url,e),s=on(this,Dt,kn).call(this,r),o;return"suffixLength"in n?o=await Ns(i,n.suffixLength,s,J(this,Ft)):o=await Kr(i,n.offset,n.length,s),ur(o)}}Mt=new WeakMap,Ft=new WeakMap,Dt=new WeakSet,kn=function(e){return Ds(J(this,Mt),e)};function Bs(t){let e,n;return{c(){e=L("div"),n=L("canvas"),et(n,"width",t[1]+"px"),et(n,"background-color","lightgrey"),T(n,"height",t[3]),T(n,"width",t[2]),T(e,"class","canvasWrapper svelte-12wykiu"),et(e,"width",t[1]+"px"),dt(e,"spinner",t[4])},m(r,i){Ee(r,e,i),m(e,n),t[10](n)},p(r,[i]){i&2&&et(n,"width",r[1]+"px"),i&8&&T(n,"height",r[3]),i&4&&T(n,"width",r[2]),i&2&&et(e,"width",r[1]+"px"),i&16&&dt(e,"spinner",r[4])},i:Ie,o:Ie,d(r){r&&ve(e),t[10](null)}}}const cr=200;function Us(t,e,n){let{source:r}=e,{attrs:i}=e,{thumbDatasetIndex:s=void 0}=e,{thumbAspectRatio:o=1}=e,{max_size:u=512}=e,c,h=200,f=200,E=f/o,g=!0;async function b(){var N;let y=i.multiscales[0].datasets.map(A=>A.path),z=i.multiscales[0].axes.map(A=>A.name),P=y.at(-1);s!=null&&s<y.length&&(P=y[s]);const q=new Ps(r+"/"+P),x=await nt.v3(q,{kind:"array"});let V=z.indexOf("c"),B=x.shape;if(B.at(-1)*B.at(-2)>u*u){console.log("Lowest resolution too large for Thumbnail: ",B,r);return}let H=B.length,C=B[V]||1,a,l;(N=i==null?void 0:i.omero)!=null&&N.channels?(a=i.omero.channels.map(A=>A.active),l=i.omero.channels.map(A=>Br(A.color))):(a=Li(C),l=Mi(C,a)),l=l.filter((A,K)=>a[K]);let I=a.reduce((A,K,O)=>(K&&A.push(O),A),[]).map(A=>{let K=B.map((O,fe)=>fe==V?A:fe>=H-2?vn(0,O):z[fe]=="z"||z[fe]=="t"?parseInt(O/2+""):0);return Fs(x,K)}),_=await Promise.all(I),v=_.map(A=>Pr(A)),w=zi(_,v,l);n(2,f=B.at(-1)),n(3,E=B.at(-2));let D=f/cr;E>f&&(D=E/cr),n(1,h=f/D),setTimeout(()=>{const A=c.getContext("2d");n(4,g=!1),A.putImageData(new ImageData(w,f,E),0,0)},100)}Sn(()=>{b()});function p(y){Kt[y?"unshift":"push"](()=>{c=y,n(0,c)})}return t.$$set=y=>{"source"in y&&n(5,r=y.source),"attrs"in y&&n(6,i=y.attrs),"thumbDatasetIndex"in y&&n(7,s=y.thumbDatasetIndex),"thumbAspectRatio"in y&&n(8,o=y.thumbAspectRatio),"max_size"in y&&n(9,u=y.max_size)},[c,h,f,E,g,r,i,s,o,u,p]}class js extends lt{constructor(e){super(),ot(this,e,Us,Bs,Xe,{source:5,attrs:6,thumbDatasetIndex:7,thumbAspectRatio:8,max_size:9})}}const xs="https://jburel.github.io/ome2024-ngff-challenge/ome-logomark.svg";function fr(t,e,n){const r=t.slice();return r[8]=e[n],r}function hr(t){let e,n;return e=new js({props:{source:t[3],attrs:t[2],max_size:2e3,thumbDatasetIndex:t[4],thumbAspectRatio:t[5]}}),{c(){We(e.$$.fragment)},m(r,i){Be(e,r,i),n=!0},p(r,i){const s={};i&8&&(s.source=r[3]),i&4&&(s.attrs=r[2]),i&16&&(s.thumbDatasetIndex=r[4]),i&32&&(s.thumbAspectRatio=r[5]),e.$set(s)},i(r){n||(_e(e.$$.fragment,r),n=!0)},o(r){ye(e.$$.fragment,r),n=!1},d(r){Ue(e,r)}}}function dr(t){let e,n,r,i=t[0][`size_${t[8]}`]+"",s;return{c(){e=L("tr"),n=L("td"),n.textContent=`${t[8].toUpperCase()}`,r=L("td"),s=ee(i),T(n,"class","svelte-1x0usqf"),T(r,"class","svelte-1x0usqf")},m(o,u){Ee(o,e,u),m(e,n),m(e,r),m(r,s)},p(o,u){u&1&&i!==(i=o[0][`size_${o[8]}`]+"")&&ke(s,i)},d(o){o&&ve(e)}}}function _r(t){let e,n=t[0][`size_${t[8]}`]!==void 0&&dr(t);return{c(){n&&n.c(),e=Or()},m(r,i){n&&n.m(r,i),Ee(r,e,i)},p(r,i){r[0][`size_${r[8]}`]!==void 0?n?n.p(r,i):(n=dr(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&ve(e),n&&n.d(r)}}}function gr(t){let e,n,r,i,s=t[0].origin.slice(-30)+"",o,u,c;return{c(){e=L("div"),n=ee("Original data: "),r=L("a"),i=ee("..."),o=ee(s),T(r,"title",u="Link to original data: "+t[0].origin),T(r,"href",c=t[0].origin),T(r,"target","_blank")},m(h,f){Ee(h,e,f),m(e,n),m(e,r),m(r,i),m(r,o)},p(h,f){f&1&&s!==(s=h[0].origin.slice(-30)+"")&&ke(o,s),f&1&&u!==(u="Link to original data: "+h[0].origin)&&T(r,"title",u),f&1&&c!==(c=h[0].origin)&&T(r,"href",c)},d(h){h&&ve(e)}}}function Vs(t){let e,n,r,i,s,o,u,c,h=Jt(t[0].written)+"",f,E,g,b,p=(t[0].name?t[0].name.replaceAll(t[1],`<mark>${t[1]}</mark>`):"")+"",y,z,P=t[6].replaceAll(t[1],`<mark>${t[1]}</mark>`)+"",q,x,V,B,H,C,a,l,d=t[2]&&hr(t),I=je(["t","c","z","y","x"]),_=[];for(let w=0;w<5;w+=1)_[w]=_r(fr(t,I,w));let v=t[0].origin&&gr(t);return{c(){e=L("div"),n=L("div"),d&&d.c(),r=ne(),i=L("table");for(let w=0;w<5;w+=1)_[w].c();s=ne(),o=L("tr"),u=L("td"),u.textContent="Size",c=L("td"),f=ee(h),E=ne(),g=L("div"),b=L("div"),y=ne(),z=L("div"),q=ne(),v&&v.c(),x=ne(),V=L("a"),B=L("img"),T(u,"class","svelte-1x0usqf"),T(c,"class","svelte-1x0usqf"),T(i,"class","svelte-1x0usqf"),T(B,"alt","OME logo"),T(B,"class","link_logo svelte-1x0usqf"),un(B.src,H=xs)||T(B,"src",H),T(V,"title",C="Validator: "+t[0].url),T(V,"href",a="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+t[0].url),T(V,"target","_blank"),T(e,"class","zarr-list-item svelte-1x0usqf")},m(w,D){Ee(w,e,D),m(e,n),d&&d.m(n,null),m(e,r),m(e,i);for(let N=0;N<5;N+=1)_[N]&&_[N].m(i,null);m(i,s),m(i,o),m(o,u),m(o,c),m(c,f),m(e,E),m(e,g),m(g,b),b.innerHTML=p,m(g,y),m(g,z),z.innerHTML=P,m(g,q),v&&v.m(g,null),m(g,x),m(g,V),m(V,B),l=!0},p(w,[D]){if(w[2]?d?(d.p(w,D),D&4&&_e(d,1)):(d=hr(w),d.c(),_e(d,1),d.m(n,null)):d&&(In(),ye(d,1,1,()=>{d=null}),Cn()),D&1){I=je(["t","c","z","y","x"]);let N;for(N=0;N<5;N+=1){const A=fr(w,I,N);_[N]?_[N].p(A,D):(_[N]=_r(A),_[N].c(),_[N].m(i,s))}for(;N<5;N+=1)_[N].d(1)}(!l||D&1)&&h!==(h=Jt(w[0].written)+"")&&ke(f,h),(!l||D&3)&&p!==(p=(w[0].name?w[0].name.replaceAll(w[1],`<mark>${w[1]}</mark>`):"")+"")&&(b.innerHTML=p),(!l||D&66)&&P!==(P=w[6].replaceAll(w[1],`<mark>${w[1]}</mark>`)+"")&&(z.innerHTML=P),w[0].origin?v?v.p(w,D):(v=gr(w),v.c(),v.m(g,x)):v&&(v.d(1),v=null),(!l||D&1&&C!==(C="Validator: "+w[0].url))&&T(V,"title",C),(!l||D&1&&a!==(a="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+w[0].url))&&T(V,"href",a)},i(w){l||(_e(d),l=!0)},o(w){ye(d),l=!1},d(w){w&&ve(e),d&&d.d(),Ht(_,w),v&&v.d()}}}function qs(t,e,n){let r,{rowData:i}=e,{textFilter:s}=e,o,u,c,h=1;if(i.size_x&&i.size_y){let f=Math.max(i.size_x,i.size_y);for(c=0;f>256;)c+=1,f=f/2;h=i.size_x/i.size_y}return Sn(async()=>{let f=await Gt(i.url);n(2,o=f[0]),n(3,u=f[1]),f[2]}),t.$$set=f=>{"rowData"in f&&n(0,i=f.rowData),"textFilter"in f&&n(1,s=f.textFilter)},t.$$.update=()=>{var f;t.$$.dirty&3&&n(6,r=s!=""&&((f=i.description)!=null&&f.includes(s))?i.description:"")},[i,s,o,u,c,h,r]}class Ws extends lt{constructor(e){super(),ot(this,e,qs,Vs,Xe,{rowData:0,textFilter:1})}}function Hs(t){let e,n,r,i,s,o,u,c=t[0].source+"",h,f,E,g,b,p,y=t[0].total_count+"",z,P,q,x,V,B,H;return{c(){e=L("div"),n=L("label"),r=L("img"),o=ne(),u=L("div"),h=ee(c),f=ne(),E=L("br"),g=ne(),b=L("span"),p=ee("("),z=ee(y),P=ee(" images)"),x=L("input"),T(r,"title",i=t[0].url),T(r,"class","sourceLogo svelte-1mddads"),T(r,"alt","Source logo"),un(r.src,s=Yn(t[0].source))||T(r,"src",s),T(b,"title",q=t[0].child_csv.length+" collections"),T(x,"type","radio"),T(x,"name","source"),x.value=V=t[0].source,T(x,"class","svelte-1mddads"),T(n,"class","svelte-1mddads"),T(e,"class","source svelte-1mddads")},m(C,a){Ee(C,e,a),m(e,n),m(n,r),m(n,o),m(n,u),m(u,h),m(u,f),m(u,E),m(u,g),m(u,b),m(b,p),m(b,z),m(b,P),m(u,x),B||(H=Ze(x,"change",function(){En(t[1])&&t[1].apply(this,arguments)}),B=!0)},p(C,[a]){t=C,a&1&&i!==(i=t[0].url)&&T(r,"title",i),a&1&&!un(r.src,s=Yn(t[0].source))&&T(r,"src",s),a&1&&c!==(c=t[0].source+"")&&ke(h,c),a&1&&y!==(y=t[0].total_count+"")&&ke(z,y),a&1&&q!==(q=t[0].child_csv.length+" collections")&&T(b,"title",q),a&1&&V!==(V=t[0].source)&&(x.value=V)},i:Ie,o:Ie,d(C){C&&ve(e),B=!1,H()}}}function Ks(t,e,n){let{source:r}=e,{handleFilter:i}=e;return t.$$set=s=>{"source"in s&&n(0,r=s.source),"handleFilter"in s&&n(1,i=s.handleFilter)},[r,i]}class Js extends lt{constructor(e){super(),ot(this,e,Ks,Hs,Xe,{source:0,handleFilter:1})}}function mr(t,e,n){const r=t.slice();return r[28]=e[n],r}function pr(t,e,n){const r=t.slice();return r[28]=e[n],r}function yr(t,e,n){const r=t.slice();return r[33]=e[n],r}function br(t,e,n){const r=t.slice();return r[36]=e[n],r}function vr(t){let e,n;return e=new Js({props:{source:t[36],handleFilter:t[14]}}),{c(){We(e.$$.fragment)},m(r,i){Be(e,r,i),n=!0},p(r,i){const s={};i[0]&2&&(s.source=r[36]),e.$set(s)},i(r){n||(_e(e.$$.fragment,r),n=!0)},o(r){ye(e.$$.fragment,r),n=!1},d(r){Ue(e,r)}}}function wr(t){let e,n,r,i,s,o,u,c=je(Ne.getCsvSourceList(t[7])),h=[];for(let f=0;f<c.length;f+=1)h[f]=kr(yr(t,c,f));return{c(){for(let f=0;f<h.length;f+=1)h[f].c();e=ne(),n=L("div"),r=L("label"),i=L("input"),s=ee(`
              ❌ Clear Source Filter`),T(i,"type","radio"),T(i,"name","source"),i.value="",T(i,"class","svelte-10rw35n"),T(r,"class","svelte-10rw35n"),T(n,"class","source clear svelte-10rw35n")},m(f,E){for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(f,E);Ee(f,e,E),Ee(f,n,E),m(n,r),m(r,i),m(r,s),o||(u=Ze(i,"change",t[14]),o=!0)},p(f,E){if(E[0]&65664){c=je(Ne.getCsvSourceList(f[7]));let g;for(g=0;g<c.length;g+=1){const b=yr(f,c,g);h[g]?h[g].p(b,E):(h[g]=kr(b),h[g].c(),h[g].m(e.parentNode,e))}for(;g<h.length;g+=1)h[g].d(1);h.length=c.length}},d(f){f&&(ve(e),ve(n)),Ht(h,f),o=!1,u()}}}function kr(t){let e,n,r,i,s,o=(t[33].source==t[7]?Sr(t[33].url):t[33].source)+"",u,c,h=t[33].image_count+"",f,E,g,b,p;return{c(){e=L("div"),n=L("label"),r=L("input"),s=ne(),u=ee(o),c=ee(" ("),f=ee(h),E=ee(")"),T(r,"type","radio"),T(r,"name","collection"),r.value=i=t[33].url,T(r,"class","svelte-10rw35n"),T(n,"title",g="Filter by Collection: "+t[33].url),T(n,"class","svelte-10rw35n"),T(e,"class","source svelte-10rw35n")},m(y,z){Ee(y,e,z),m(e,n),m(n,r),m(n,s),m(n,u),m(n,c),m(n,f),m(n,E),b||(p=Ze(r,"change",t[16]),b=!0)},p(y,z){z[0]&128&&i!==(i=y[33].url)&&(r.value=i),z[0]&128&&o!==(o=(y[33].source==y[7]?Sr(y[33].url):y[33].source)+"")&&ke(u,o),z[0]&128&&h!==(h=y[33].image_count+"")&&ke(f,h),z[0]&128&&g!==(g="Filter by Collection: "+y[33].url)&&T(n,"title",g)},d(y){y&&ve(e),b=!1,p()}}}function Er(t){let e,n=t[28]+"",r,i;return{c(){e=L("option"),r=ee(n),e.__value=i=t[4][t[28]],He(e,e.__value)},m(s,o){Ee(s,e,o),m(e,r)},p(s,o){o[0]&16&&n!==(n=s[28]+"")&&ke(r,n),o[0]&16&&i!==(i=s[4][s[28]])&&(e.__value=i,He(e,e.__value))},d(s){s&&ve(e)}}}function Ar(t,e){let n,r=e[28]+"",i,s;return{key:t,first:null,c(){n=L("option"),i=ee(r),n.__value=s=e[5][e[28]],He(n,n.__value),this.first=n},m(o,u){Ee(o,n,u),m(n,i)},p(o,u){e=o,u[0]&32&&r!==(r=e[28]+"")&&ke(i,r),u[0]&32&&s!==(s=e[5][e[28]])&&(n.__value=s,He(n,n.__value))},d(o){o&&ve(n)}}}function Gs(t){let e,n,r,i;return n=new Ws({props:{rowData:t[0][t[27]],textFilter:t[9]}}),{c(){e=L("div"),We(n.$$.fragment),T(e,"slot","item"),T(e,"style",r=t[26]),T(e,"class","row svelte-10rw35n")},m(s,o){Ee(s,e,o),Be(n,e,null),i=!0},p(s,o){const u={};o[0]&134217729&&(u.rowData=s[0][s[27]]),o[0]&512&&(u.textFilter=s[9]),n.$set(u),(!i||o[0]&67108864&&r!==(r=s[26]))&&T(e,"style",r)},i(s){i||(_e(n.$$.fragment,s),i=!0)},o(s){ye(n.$$.fragment,s),i=!1},d(s){s&&ve(e),Ue(n)}}}function Ys(t){let e,n,r,i,s,o,u,c,h=Jt(t[3])+"",f,E,g=t[1].length+"",b,p,y,z,P,q,x,V,B,H,C,a,l,d,I=t[6]!=="0"?"All Dimensions":"Dimension Count",_,v,w,D,N,A,K,O,fe=t[8]==""?"Organism":"All Organisms",he,R,G,S,j=t[8]==""?"Imaging Modality":"All Modalities",Z,W=[],$=new Map,M,F,re,oe,ie,ae,ue,Q,Oe,pe,De,we,Ce,te,de,Le,Y,Je,Me=t[0].length+"",xe,Ve,qe,Ae,ce,Ye,Te;n=new ji({});let Ke=je(t[1]),le=[];for(let k=0;k<Ke.length;k+=1)le[k]=vr(br(t,Ke,k));const Jr=k=>ye(le[k],1,1,()=>{le[k]=null});let Fe=t[7]!==""&&wr(t),at=je(Object.keys(t[4]).sort()),ze=[];for(let k=0;k<at.length;k+=1)ze[k]=Er(pr(t,at,k));let Bt=je(Object.keys(t[5]).sort());const Un=k=>k[28];for(let k=0;k<Bt.length;k+=1){let U=mr(t,Bt,k),ge=Un(U);$.set(ge,W[k]=Ar(ge,U))}return oe=new ft({props:{col_label:"X",col_name:"size_x",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),ae=new ft({props:{col_label:"Y",col_name:"size_y",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),Q=new ft({props:{col_label:"Z",col_name:"size_z",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),pe=new ft({props:{col_label:"C",col_name:"size_c",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),we=new ft({props:{col_label:"T",col_name:"size_t",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),te=new ft({props:{col_label:"Data size",col_name:"written",handleSort:t[12],sortedBy:t[10],sortAscending:t[11]}}),Ae=new bi({props:{width:"100%",height:600,itemCount:t[0].length,itemSize:220,getKey:t[13],$$slots:{item:[Gs,({style:k,index:U})=>({26:k,27:U}),({style:k,index:U})=>[(k?67108864:0)|(U?134217728:0)]]},$$scope:{ctx:t}}}),{c(){e=L("div"),We(n.$$.fragment),r=ne(),i=L("main"),s=L("div"),o=L("h2"),u=ee(t[2]),c=ee(` Zarr Images,
        `),f=ee(h),E=ee(", from "),b=ee(g),p=ee(" sources:"),y=ne(),z=L("div");for(let k=0;k<le.length;k+=1)le[k].c();P=ne(),Fe&&Fe.c(),q=ne(),x=L("div"),V=L("input"),B=ne(),H=L("div"),C=L("div"),C.textContent="Filter by:",a=ne(),l=L("select"),d=L("option"),_=ee(I),v=L("option"),v.textContent="2D",w=L("option"),w.textContent="3D",D=L("option"),D.textContent="4D",N=L("option"),N.textContent="5D",A=ne(),K=L("select"),O=L("option"),he=ee(fe);for(let k=0;k<ze.length;k+=1)ze[k].c();R=ne(),G=L("select"),S=L("option"),Z=ee(j);for(let k=0;k<W.length;k+=1)W[k].c();M=ne(),F=L("div"),re=ee(`Sort:
        `),We(oe.$$.fragment),ie=ne(),We(ae.$$.fragment),ue=ne(),We(Q.$$.fragment),Oe=ne(),We(pe.$$.fragment),De=ne(),We(we.$$.fragment),Ce=ne(),We(te.$$.fragment),de=ne(),Le=L("div"),Y=L("h3"),Je=ee("Showing "),xe=ee(Me),Ve=ee(" zarrs"),qe=ne(),We(Ae.$$.fragment),T(z,"class","sources svelte-10rw35n"),T(V,"placeholder","Filter by Name or Description"),T(V,"name","textFilter"),T(V,"class","svelte-10rw35n"),et(C,"white-space","nowrap"),d.__value="0",He(d,d.__value),v.__value="2",He(v,v.__value),w.__value="3",He(w,w.__value),D.__value="4",He(D,D.__value),N.__value="5",He(N,N.__value),T(l,"class","svelte-10rw35n"),O.__value="",He(O,O.__value),T(K,"class","svelte-10rw35n"),S.__value="",He(S,S.__value),T(G,"class","svelte-10rw35n"),T(H,"class","filters svelte-10rw35n"),T(x,"class","filterRow svelte-10rw35n"),T(s,"class","summary svelte-10rw35n"),et(Y,"margin-left","15px"),T(Le,"class","imageListContainer svelte-10rw35n"),T(i,"class","svelte-10rw35n"),T(e,"class","app svelte-10rw35n")},m(k,U){Ee(k,e,U),Be(n,e,null),m(e,r),m(e,i),m(i,s),m(s,o),m(o,u),m(o,c),m(o,f),m(o,E),m(o,b),m(o,p),m(s,y),m(s,z);for(let ge=0;ge<le.length;ge+=1)le[ge]&&le[ge].m(z,null);m(z,P),Fe&&Fe.m(z,null),m(s,q),m(s,x),m(x,V),m(x,B),m(x,H),m(H,C),m(H,a),m(H,l),m(l,d),m(d,_),m(l,v),m(l,w),m(l,D),m(l,N),m(H,A),m(H,K),m(K,O),m(O,he);for(let ge=0;ge<ze.length;ge+=1)ze[ge]&&ze[ge].m(K,null);m(H,R),m(H,G),m(G,S),m(S,Z);for(let ge=0;ge<W.length;ge+=1)W[ge]&&W[ge].m(G,null);m(s,M),m(s,F),m(F,re),Be(oe,F,null),m(F,ie),Be(ae,F,null),m(F,ue),Be(Q,F,null),m(F,Oe),Be(pe,F,null),m(F,De),Be(we,F,null),m(F,Ce),Be(te,F,null),m(i,de),m(i,Le),m(Le,Y),m(Y,Je),m(Y,xe),m(Y,Ve),m(Le,qe),Be(Ae,Le,null),ce=!0,Ye||(Te=[Ze(V,"input",t[19]),Ze(l,"change",t[15]),Ze(K,"change",t[17]),Ze(G,"change",t[18])],Ye=!0)},p(k,U){if((!ce||U[0]&4)&&ke(u,k[2]),(!ce||U[0]&8)&&h!==(h=Jt(k[3])+"")&&ke(f,h),(!ce||U[0]&2)&&g!==(g=k[1].length+"")&&ke(b,g),U[0]&16386){Ke=je(k[1]);let se;for(se=0;se<Ke.length;se+=1){const yt=br(k,Ke,se);le[se]?(le[se].p(yt,U),_e(le[se],1)):(le[se]=vr(yt),le[se].c(),_e(le[se],1),le[se].m(z,P))}for(In(),se=Ke.length;se<le.length;se+=1)Jr(se);Cn()}if(k[7]!==""?Fe?Fe.p(k,U):(Fe=wr(k),Fe.c(),Fe.m(z,null)):Fe&&(Fe.d(1),Fe=null),(!ce||U[0]&64)&&I!==(I=k[6]!=="0"?"All Dimensions":"Dimension Count")&&ke(_,I),(!ce||U[0]&256)&&fe!==(fe=k[8]==""?"Organism":"All Organisms")&&ke(he,fe),U[0]&16){at=je(Object.keys(k[4]).sort());let se;for(se=0;se<at.length;se+=1){const yt=pr(k,at,se);ze[se]?ze[se].p(yt,U):(ze[se]=Er(yt),ze[se].c(),ze[se].m(K,null))}for(;se<ze.length;se+=1)ze[se].d(1);ze.length=at.length}(!ce||U[0]&256)&&j!==(j=k[8]==""?"Imaging Modality":"All Modalities")&&ke(Z,j),U[0]&32&&(Bt=je(Object.keys(k[5]).sort()),W=Lr(W,U,Un,1,k,Bt,$,G,li,Ar,null,mr));const ge={};U[0]&1024&&(ge.sortedBy=k[10]),U[0]&2048&&(ge.sortAscending=k[11]),oe.$set(ge);const $t={};U[0]&1024&&($t.sortedBy=k[10]),U[0]&2048&&($t.sortAscending=k[11]),ae.$set($t);const Xt={};U[0]&1024&&(Xt.sortedBy=k[10]),U[0]&2048&&(Xt.sortAscending=k[11]),Q.$set(Xt);const en={};U[0]&1024&&(en.sortedBy=k[10]),U[0]&2048&&(en.sortAscending=k[11]),pe.$set(en);const tn={};U[0]&1024&&(tn.sortedBy=k[10]),U[0]&2048&&(tn.sortAscending=k[11]),we.$set(tn);const nn={};U[0]&1024&&(nn.sortedBy=k[10]),U[0]&2048&&(nn.sortAscending=k[11]),te.$set(nn),(!ce||U[0]&1)&&Me!==(Me=k[0].length+"")&&ke(xe,Me);const rn={};U[0]&1&&(rn.itemCount=k[0].length),U[0]&201327105|U[1]&256&&(rn.$$scope={dirty:U,ctx:k}),Ae.$set(rn)},i(k){if(!ce){_e(n.$$.fragment,k);for(let U=0;U<Ke.length;U+=1)_e(le[U]);_e(oe.$$.fragment,k),_e(ae.$$.fragment,k),_e(Q.$$.fragment,k),_e(pe.$$.fragment,k),_e(we.$$.fragment,k),_e(te.$$.fragment,k),_e(Ae.$$.fragment,k),ce=!0}},o(k){ye(n.$$.fragment,k),le=le.filter(Boolean);for(let U=0;U<le.length;U+=1)ye(le[U]);ye(oe.$$.fragment,k),ye(ae.$$.fragment,k),ye(Q.$$.fragment,k),ye(pe.$$.fragment,k),ye(we.$$.fragment,k),ye(te.$$.fragment,k),ye(Ae.$$.fragment,k),ce=!1},d(k){k&&ve(e),Ue(n),Ht(le,k),Fe&&Fe.d(),Ht(ze,k);for(let U=0;U<W.length;U+=1)W[U].d();Ue(oe),Ue(ae),Ue(Q),Ue(pe),Ue(we),Ue(te),Ue(Ae),Ye=!1,st(Te)}}}function Sr(t){return t.split("/").pop().replace(".csv","").replace("_samples","")}function Qs(t,e,n){let i=new URLSearchParams(window.location.search).get("csv");try{new URL(i)}catch{i=Ii}let s=[],o=[],u=0,c=0,h={},f={},E="0",g="",b="",p="",y="",z="";Ne.subscribe(_=>{n(0,s=B(_)),n(1,o=Ne.getCsvSourceList()),n(2,u=_.length),n(3,c=_.reduce((v,w)=>v+parseInt(w.written)||0,0))}),jr.subscribe(_=>{let v={};for(const[w,D]of Object.entries(_))v[D]=w;n(4,h=v)}),xr.subscribe(_=>{let v={};for(const[w,D]of Object.entries(_))v[D]=w;n(5,f=v)}),i&&Dr(i,Ne);let P="",q=!0;function x(_){P===_?n(11,q=!q):n(11,q=!1),n(10,P=_),Ne.sortTable(_,q)}function V(_){return s[_].url}function B(_){if(E!=="0"&&(_=_.filter(v=>v.dim_count==E)),b!=="")_=_.filter(v=>v.csv==b);else if(g!==""){let v=Ne.getCsvSourceList(g),w=[g,...v.map(D=>D.source)];_=_.filter(D=>w.includes(D.source))}return p!==""&&(_=_.filter(v=>v.organismId==p)),y!=""&&(_=_.filter(v=>v.fbbiId==y)),z!=""&&(_=_.filter(v=>{var w,D;return((w=v.description)==null?void 0:w.includes(z))||((D=v.name)==null?void 0:D.includes(z))})),_}function H(_){n(7,g=_.target.value),b="",n(0,s=B(Ne.getRows()))}function C(_){n(6,E=_.target.value),n(0,s=B(Ne.getRows()))}function a(_){b=_.target.value,n(0,s=B(Ne.getRows()))}function l(_){n(8,p=_.target.value),n(0,s=B(Ne.getRows()))}function d(_){y=_.target.value,n(0,s=B(Ne.getRows()))}function I(_){n(9,z=_.target.value),n(0,s=B(Ne.getRows()))}return t.$$.update=()=>{t.$$.dirty[0]&1&&s.some(_=>_.source)},[s,o,u,c,h,f,E,g,p,z,P,q,x,V,H,C,a,l,d,I]}class Zs extends lt{constructor(e){super(),ot(this,e,Qs,Ys,Xe,{},null,[-1,-1])}}new Zs({target:document.getElementById("app")});
